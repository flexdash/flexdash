(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/flexdash/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"07c0":function(t,e,n){"use strict";n.r(e);var i=n("3db1"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"089f":function(t,e,n){},"08a9":function(t,e,n){"use strict";n("b60a")},"0986":function(t,e,n){function i(t,e){if(e){var n=document.createElement("div");n.innerText=t,t=n.innerHTML,t=t.replace(/<br>/g,"\n")}return t=t.replace(/^(#+)\s(.*)/gm,(function(t,e,n){var i=e.length;return"<h"+i+">"+n+"</h"+i+">"})),t=t.replace(/^(.*)\n([=-]{2,})/gm,(function(t,e,n){var i="="===n[0]?"1":"2";return"<h"+i+">"+e+"</h"+i+">"})),t=t.replace(/^>\s((.+\n{0,1})+)/gm,(function(t,e){return e=e.replace(/(\n>\s|\n)/g,"<br />\n"),"<blockquote>"+e+"</blockquote>"})),t=t.replace(/^(((\t+|\s{2,}).*\n)+)/gm,(function(t,e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;"),e=e.replace(/\n/g,"<br />\n"),"<code>"+e+"</code>\n"})),t=t.replace(/^(\*\s.+\n?)+/gm,(function(t){return t=t.replace(/^\*\s(.*)\n?/gm,"<li>$1</li>"),"<ul>"+t+"</ul>"})),t=t.replace(/^([0-9]+\.\s.+\n?)+/gm,(function(t){return t=t.replace(/^[0-9]+\.\s(.*)\n?/gm,"<li>$1</li>"),"<ol>"+t+"</ol>"})),t=t.replace(/^(\|.*\n)+/gm,(function(t){for(var e=t.split(/\n/g),n=["<table>"],i=0;i<e.length-1;i++){n.push("<tr>");for(var o=e[i].split(/\|/g),a=1;a<o.length;a++)n.push("<td>"),n.push(o[a]),n.push("</td>");n.push("</tr>")}return n.push("</table>\n"),n.join("")})),t=t.split(/\n{2,}/).map((function(t){return t.replace(/^((?:(?!<)[\s\S])[\s\S]*(?:(?!>)[\s\S]))$/,"<p>$1</p>")})).join("\n"),t=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"<b>$2</b>"),t=t.replace(/[*_](.*?)[*_]/g,"<i>$1</i>"),t=t.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2">$1</a>'),t=t.replace(/\[(.*?)\]\s*\[(.*?)\]/g,(function(e,n,i){var o="";return i=i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),t.replace(new RegExp("\\["+i+"\\]:\\s*(.*)"),(function(t,e){o=e})),'<a href="'+o+'">'+n+"</a>"})),t=t.replace(/\[.*\]:.*/g,""),t=t.replace("<code><br />","<code>"),t}n("ac1f"),n("5319"),n("1276"),n("a15b"),n("d81d"),n("4d63"),n("25f0"),t.exports={name:"Markdown",props:{title:{default:"Markdown"},text:{type:String,default:"Hello World!"}},computed:{md:function(){return console.log("After:",i(this.text,!0)),i(this.text,!0)}}}},1:function(t,e){},"10cb":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"scroll"}},[t.title?n("v-card-text",{staticClass:"font-weight-bold px-0 pt-1 mb-n1 d-flex"},[n("span",{staticClass:"mx-auto"},[t._v(t._s(t.title))])]):t._e(),n("v-card-text",{staticClass:"md pt-1",staticStyle:{width:"100%"},domProps:{innerHTML:t._s(t.md)}})],1)},o=[]},"1acb":function(t,e,n){"use strict";n.r(e);var i=n("bf03"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"1ec4":function(t,e,n){"use strict";n.r(e);var i=n("d9ba"),o=n("1acb");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var r=n("2877"),s=n("6544"),c=n.n(s),l=n("7f2e"),u=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports,c()(u,{VSparkline:l["a"]})},"254b":function(t,e,n){"use strict";n.r(e);var i=n("275f"),o=n("9d9d");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var r=n("2877"),s=n("6544"),c=n.n(s),l=n("99d9"),u=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports,c()(u,{VCardTitle:l["b"]})},"26df":function(t,e){t.exports={name:"Stat",props:{unit:String,value:{default:null}},computed:{unitTxt:function(){return"--"===this.value?"":this.unit},valTxt:function(){return"number"==typeof this.value?Math.round(10*this.value)/10:null===this.value?"--":this.value}}}},"275f":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-title",{staticClass:"headline pa-0"},[n("span",{staticClass:"ma-auto"},[t._v(t._s(t.valTxt)),n("span",{staticClass:"unit"},[t._v(t._s(t.unitTxt))])])])},o=[]},"322f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"contents"}},[t.rollupMini?n("div",{class:t.rollerClasses},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mx-auto",attrs:{xsmall:"",icon:"",height:"24px"},on:{click:t.toggleRoll}},i),[n("v-icon",[t._v("mdi-arrow-"+t._s(t.rolledup?"down":"up")+"-drop-circle")])],1)]}}],null,!1,2194996837)},[n("span",[t._v("Roll widgets up/down")])])],1):t._e(),t.rollupMaxi?n("v-toolbar",{staticClass:"d-flex justify-start",attrs:{dense:"",flat:"",height:"36",color:"background"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mx-auto",attrs:{xsmall:"",icon:"",height:"24px"},on:{click:t.toggleRoll}},i),[n("v-icon",[t._v("mdi-arrow-"+t._s(t.rolledup?"down":"up")+"-drop-circle")])],1)]}}],null,!1,2194996837)},[n("span",[t._v("Roll widgets up/down")])]),n("v-toolbar-title",[t._v(t._s(t.grid.title))])],1):t._e(),t.$root.editMode?n("v-toolbar",{staticClass:"editmode",attrs:{dense:"",flat:"",color:"background"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mr-4",attrs:{small:"",icon:"",color:"grey"},on:{click:t.toggleRoll}},i),[n("v-icon",[t._v("mdi-arrow-"+t._s(t.rolledup?"down":"up")+"-drop-circle")])],1)]}}],null,!1,527658409)},[n("span",[t._v("Roll widgets up/down")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-text-field",t._g({staticClass:"mr-6 flex-grow-0",staticStyle:{width:"20ex"},attrs:{"single-line":"",dense:"","hide-details":"",label:"title",value:t.grid.title},on:{change:t.changeTitle}},i))]}}],null,!1,529640478)},[n("span",[t._v("Title to show at top of grid, if empty the grid bar is thinner")])]),n("div",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"primary"}},"v-btn",o,!1),Object.assign({},a,i)),[n("v-icon",[t._v("mdi-card-plus")])],1)]}}],null,!0)},[n("span",[t._v("Add a widget to the end of the grid")])])]}}],null,!1,4148765622),model:{value:t.add_menu,callback:function(e){t.add_menu=e},expression:"add_menu"}},[n("v-list",[n("v-subheader",[t._v("Add Widget to the end of the grid")]),t._l(t.palette(),(function(e){return n("v-list-item",{key:e,on:{click:function(n){return t.addWidget(e)}}},[n("v-list-item-title",[t._v(t._s(e))])],1)}))],2)],1)],1),n("v-spacer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mc-auto",attrs:{small:""},on:{click:function(e){return t.$emit("delete")}}},i),[t._v(" Delete grid ")])]}}],null,!1,1535469378)},[n("span",[t._v("Delete this grid and all its widgets")])])],1):t._e(),t.rolledup?t._e():n("v-container",{staticClass:"g-grid-small pt-0",attrs:{fluid:""}},t._l(t.grid.widgets,(function(e,i){return n("widget-edit",{key:e,attrs:{id:e,grid_id:t.id,edit_active:i==t.edit_ix},on:{edit:function(e){return t.toggleEdit(i,e)},move:function(e){return t.moveWidget(i,e)},delete:function(e){return t.deleteWidget(i)}}})})),1)],1)},o=[],a=n("2909"),r=(n("b64b"),n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.widgetStyle},[n("v-menu",{attrs:{value:t.edit_active&&t.reposition,"offset-y":"","allow-overflow":"","min-width":"80%","content-class":"popup-spacer","close-on-content-click":!1,"close-on-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){return[n("widget-wrap",{attrs:{config:t.widget,suppressOutput:t.suppressOutput,color:t.edit_active?"highlight":"","not-used":e},on:{edit:t.toggleEdit}})]}}])},[n("v-card",{attrs:{color:"panel"}},[n("v-card-title",{staticClass:"d-flex align-baseline"},[n("span",[t._v("Edit "+t._s(t.widget.kind)+" widget")]),n("v-text-field",{staticClass:"ml-3 mt-0 text-h6 flex-grow-0",attrs:{dense:"",value:t.widget.static["title"],"hide-details":!0},on:{input:function(e){return t.handleEdit("static","title",e)}}}),n("v-spacer"),n("v-btn",{attrs:{elevation:"0",icon:""},on:{click:t.endEdit}},[n("v-icon",[t._v("mdi-close")])],1)],1),t.edit_active?n("v-card-text",[n("v-container",{staticClass:"pa-0 pt-4",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center"}},[n("v-col",{staticClass:"d-flex",attrs:{cols:"6",sm:"4"}},[n("v-btn",{attrs:{small:""},on:{click:function(e){return t.$emit("delete")}}},[t._v("Delete widget")])],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"6",sm:"2"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"ml-2",attrs:{small:"",icon:""},on:{click:function(e){return t.moveWidget(-1)}}},i),[n("v-icon",[t._v("mdi-arrow-up-bold")])],1)]}}],null,!1,4110266859)},[n("span",[t._v("Move widget towards the top-left of the grid")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:""},on:{click:function(e){return t.moveWidget(1)}}},i),[n("v-icon",[t._v("mdi-arrow-down-bold")])],1)]}}],null,!1,171324591)},[n("span",[t._v("Move widget towards the bottom-right of the grid")])])],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",md:"4"}},[n("v-btn",{staticClass:"ml-2",attrs:{small:"",icon:""},on:{click:function(e){return t.adjustRows(-1)}}},[n("v-icon",[t._v("mdi-minus")])],1),n("v-chip",{attrs:{small:""}},[t._v(t._s(t.widget.rows)+" row"+t._s(t.widget.rows>1?"s":""))]),n("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.adjustRows(1)}}},[n("v-icon",[t._v("mdi-plus")])],1),n("v-btn",{staticClass:"ml-2",attrs:{small:"",icon:""},on:{click:function(e){return t.adjustCols(-1)}}},[n("v-icon",[t._v("mdi-minus")])],1),n("v-chip",{attrs:{small:""}},[t._v(t._s(t.widget.cols)+" col"+t._s(t.widget.cols>1?"s":""))]),n("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.adjustCols(1)}}},[n("v-icon",[t._v("mdi-plus")])],1)],1)],1),n("v-row",{attrs:{align:"center"}},t._l(t.edit_props,(function(e){return n("v-col",{key:e,staticClass:"d-flex",attrs:{cols:"12",sm:"6",md:"4"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var o=i.on,a=i.attrs;return[n("v-btn-toggle",{staticClass:"mt-2 mr-1",attrs:{mandatory:"",dense:"","background-color":"rgba(0,0,0,0)",color:"primary"},model:{value:t.prop_static[e],callback:function(n){t.$set(t.prop_static,e,n)},expression:"prop_static[prop]"}},[n("v-btn",t._g(t._b({attrs:{"x-small":"",icon:""}},"v-btn",a,!1),o),[n("v-icon",[t._v("mdi-link-variant")])],1),n("v-btn",t._g(t._b({attrs:{"x-small":"",icon:""}},"v-btn",a,!1),o),[n("v-icon",[t._v(t._s(t.prop_info[e].icon))])],1)],1)]}}],null,!0)},[n("span",[t._v("Toggle dynamic link vs. literal value")])]),t.prop_static[e]?t.prop_info[e].type===Number?n("v-text-field",{attrs:{label:e,type:"number",dense:"",hint:t.prop_info[e].hint,value:t.propVal(e)},on:{input:function(n){return t.handleEdit("static",e,n)}}}):t.prop_info[e].type===Boolean?n("v-switch",{staticClass:"mt-0 ml-2",attrs:{label:e,hint:t.prop_info[e].hint,"input-value":t.propVal(e)},on:{change:function(n){return t.handleEdit("static",e,n)}}}):t.prop_info[e].type===Array?n("v-text-field",{attrs:{label:e,dense:"",value:t.widget.static[e]||t.prop_info[e].default},on:{input:function(n){return t.handleEdit("static",e,n)}}}):(t.prop_info[e].type,n("v-text-field",{attrs:{label:e,dense:"",hint:t.prop_info[e].hint,value:t.widget.static[e]||t.prop_info[e].default},on:{input:function(n){return t.handleEdit("static",e,n)}}})):n("v-combobox",{attrs:{label:e,clearable:"",dense:"","persistent-hint":"",hint:"variable pathname (/-sep)",items:t.sdKeys,value:t.widget.dynamic[e]},on:{input:function(n){return t.handleEdit("dynamic",e,n)}}})],1)})),1)],1)],1):t._e()],1)],1)],1)}),s=[],c=(n("4de4"),n("caad"),n("2532"),n("a9e3"),n("b0c0"),n("c1f9"),n("d81d"),n("c35a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{color:t.color}},["title"in t.child_props?t.$root.editMode?n("div",{attrs:{"display:content":""}},[n("div",{staticStyle:{position:"absolute","z-index":"5",right:"0",top:"0.5ex"}},[n("v-btn",{staticClass:"justify-end align-start mt-n1",attrs:{small:"",icon:""},on:{click:t.handleEdit}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1)]):t._e():n("v-card-text",{staticClass:"d-flex pa-0 pt-1 mb-n1"},[t.title?n("span",{staticClass:"mx-auto"},[t._v(t._s(t.title))]):t._e(),t.$root.editMode?n("v-btn",{staticClass:"justify-end align-start mt-n1",attrs:{small:"",icon:""},on:{click:t.handleEdit}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e()],1),n(t.config.kind,t._b({ref:"comp",tag:"component",on:{send:function(e){return t.sendData(e)}}},"component",t.bindings,!1))],1)}),l=[],u=n("53ca"),d=(n("159b"),n("d3b7"),n("25f0"),{name:"WidgetWrap",props:{suppressOutput:{type:Boolean,default:!0},color:{type:String,default:void 0},config:{type:Object,required:!0}},data:function(){return{watchers:[],bindings:{}}},computed:{title:function(){return this.bindings.title||"--"},child_props:function(){var t=window.widgetPalette;return this.config.kind in t&&t[this.config.kind].props||{}}},watch:{config:{immediate:!0,deep:!0,handler:function(t){this.genBindings(t)}}},inject:["sendSrv","$store"],methods:{addDynBinding:function(t,e){var n=this;e in this.$store.sd||n.$set(this.$store.sd,e,void 0);var i=this.$watch((function(){return n.$store.sd[e]}),(function(e){n.updateBindingValue(t,e)}),{deep:!0,immediate:!0});return i},removeWatchers:function(){this.watchers.forEach((function(t){t()})),this.watchers.length=0},genBindings:function(t){var e=this;this.removeWatchers(),this.bindings={},t&&(Object.keys(t.static||{}).forEach((function(n){void 0!==t.static[n]&&e.$set(e.bindings,n,t.static[n])})),Object.keys(t.dynamic||{}).forEach((function(n){void 0!==t.dynamic[n]&&e.watchers.push(e.addDynBinding(n,t.dynamic[n]))})))},updateBindingValue:function(t,e){if(t in this.child_props){var n=this.child_props[t].type;if(n===Boolean)"number"===typeof e?e=!!e:"string"===typeof e?(e=e.toLowerCase(),e=["true","ok","1","yes"].includes(e)):"boolean"!==typeof e&&(e=void 0);else if(n===Number)"string"===typeof e?e=parseFloat(e):"boolean"===typeof e?e=e?1:0:"number"!==typeof e&&(e=void 0),void 0!==e&&(e=Number.parseFloat(e.toPrecision(4)));else if(n===String)Object(u["a"])(e)===Number?e=e.toString():Object(u["a"])(e)!==String&&(e=JSON.stringify(e));else if((n===Array||n===Object)&&"string"===typeof e)try{e=JSON.parse(e)}catch(i){e=void 0,console.log("Cannot convert string value for ".concat(t," to ").concat(n.name))}this.$set(this.bindings,t,e)}else console.log("Warning: updating value for ".concat(t,", but ").concat(this.config.kind," has no ").concat(t,":"),JSON.stringify(this.child_props))},handleEdit:function(){console.log("handleEdit() in widget-wrap"),this.$emit("edit","toggle")},sendData:function(t){var e=this.config.output;!this.suppressOutput&&e?(console.log("Widget ".concat(this.config.kind,"[").concat(this.config.id,"] sending ").concat(e," <-"),t),this.sendSrv(e,t)):console.log("Output of widget ".concat(this.config.kind,"[").concat(this.config.id,"] suppressed"))}}}),f=d,h=(n("db64"),n("2877")),p=n("6544"),g=n.n(p),v=n("8336"),b=n("b0af"),m=n("99d9"),_=n("132d"),y=Object(h["a"])(f,c,l,!1,null,"647c50c6",null),w=y.exports;g()(y,{VBtn:v["a"],VCard:b["a"],VCardText:m["a"],VIcon:_["a"]});var k={name:"WidgetEdit",components:{WidgetWrap:w},inject:["$store"],props:{id:{type:String,required:!0},grid_id:{type:String,require:!0},edit_active:{type:Boolean,default:!1}},data:function(){return{suppressOutput:!0,prop_static:{},saved_widget:null,reposition:!0}},computed:{widget:function(){return this.$store.widgetByID(this.id)},sdKeys:function(){return Object.keys(this.$store.sd).sort()},edit_props:function(){var t=Object.keys(this.child_props);return t.filter((function(t){return"title"!==t})).sort()},prop_info:function(){var t={String:"mdi-format-quote-close",Number:"mdi-numeric",Boolean:"mdi-yin-yang",Array:"mdi-code-brackets",Object:"mdi-code-braces"},e={},n=this.child_props;for(var i in n){var o=n[i].type||String;[String,Number,Boolean,Array,Object].includes(o)||(o=String);var a=o.name;void 0!==n[i].default&&(a+=", default: ".concat(n[i].default));var r=t[o.name];e[i]={type:o,default:n[i].default,validator:n[i].validator,hint:a,icon:r}}return e},child_props:function(){var t=window.widgetPalette;return this.widget.kind in t&&t[this.widget.kind].props||{}},widgetStyle:function(){var t="grid-row-start: span ".concat(this.widget.rows||1),e="grid-column-start: span ".concat(this.widget.cols||1);return"".concat(t,"; ").concat(e,";")}},watch:{edit_active:function(t){if(t){this.saved_widget=this.widget;var e=this;this.prop_static=Object.fromEntries(Object.keys(e.child_props).map((function(t){return[t,1-(t in e.widget.dynamic)]})))}else this.saved_widget=null}},methods:{propVal:function(t){return void 0!==this.widget.static[t]?this.widget.static[t]:this.prop_info[t].default},toggleEdit:function(){this.$emit("edit",!this.edit_active)},endEdit:function(){this.$emit("edit",!1)},handleEdit:function(t,e,n){if(t in this.widget){if("title"!=e){if(!(e in this.child_props))return;this.child_props[e].type===Number&&"string"===typeof n&&(n=Number.parseFloat(n))}this.$store.updateWidgetProp(this.id,t,e,n)}},adjustRows:function(t){var e=this,n=this.widget;n.rows=(n.rows||1)+t,n.rows<1&&(n.rows=1),n.rows>16&&(n.rows=16),this.reposition=!1,this.$nextTick((function(){e.reposition=!0}))},adjustCols:function(t){var e=this,n=this.widget;n.cols=(n.cols||1)+t,n.cols<1&&(n.cols=1),n.cols>16&&(n.cols=16),this.reposition=!1,this.$nextTick((function(){e.reposition=!0}))},moveWidget:function(t){var e=this;this.$emit("move",t),this.reposition=!1,this.$nextTick((function(){e.reposition=!0}))}}},x=k,C=(n("a6c4"),n("a609")),O=n("cc20"),S=n("62ad"),D=n("2b5d"),$=n("a523"),j=n("e449"),T=n("0fd9"),E=n("2fa4"),M=n("b73d"),N=n("8654"),A=n("3a2f"),V=Object(h["a"])(x,r,s,!1,null,"f8f39ca8",null),I=V.exports;g()(V,{VBtn:v["a"],VBtnToggle:C["a"],VCard:b["a"],VCardText:m["a"],VCardTitle:m["b"],VChip:O["a"],VCol:S["a"],VCombobox:D["a"],VContainer:$["a"],VIcon:_["a"],VMenu:j["a"],VRow:T["a"],VSpacer:E["a"],VSwitch:M["a"],VTextField:N["a"],VTooltip:A["a"]});var R={name:"FixedGrid",components:{WidgetEdit:I},inject:["$store","$config"],props:{id:{type:String}},data:function(){return{add_menu:null,edit_ix:null,rolledup:!1}},computed:{grid:function(){return this.$store.gridByID(this.id)},rollupMini:function(){return!this.$root.editMode&&!this.grid.title},rollupMaxi:function(){return!this.$root.editMode&&this.grid.title},rollerClasses:function(){var t=this.grid.widgets.length>0&&!this.rolledup&&"roller__minimal";return["d-flex","roller",t]}},methods:{palette:function(){return console.log("Palette:",window.widgetPalette),Object.keys(window.widgetPalette)},toggleEdit:function(t,e){this.edit_ix=e?t:null},addWidget:function(t){var e=this.$store.addWidget(this.id,t);this.edit_ix=e},deleteWidget:function(t){this.$store.deleteWidget(this.id,t),this.endEdit()},moveWidget:function(t,e){if(console.log("Moving widget #".concat(t," by ").concat(e)),t+e>=0&&t+e<this.grid.widgets.length){var n=Object(a["a"])(this.grid.widgets),i=n[t];n[t]=n[t+e],n[t+e]=i,this.$store.updateGrid(this.id,{widgets:n}),this.edit_ix+=e}},toggleRoll:function(){this.rolledup=!this.rolledup},changeTitle:function(t){this.$store.updateGrid(this.id,{title:t})}}},P=R,B=(n("c680"),n("d0ef"),n("8860")),L=n("da13"),F=n("5d23"),W=n("e0c7"),q=n("71d9"),G=n("2a7f"),U=Object(h["a"])(P,i,o,!1,null,"75d0743c",null);e["default"]=U.exports;g()(U,{VBtn:v["a"],VContainer:$["a"],VIcon:_["a"],VList:B["a"],VListItem:L["a"],VListItemTitle:F["b"],VMenu:j["a"],VSpacer:E["a"],VSubheader:W["a"],VTextField:N["a"],VToolbar:q["a"],VToolbarTitle:G["a"],VTooltip:A["a"]})},"34fc":function(t,e,n){"use strict";n("8896")},"3db1":function(t,e){t.exports={name:"Toggle",props:{value:{default:0},enabled:{default:!0},color:{default:"primary"},on_value:{default:!0},off_value:{default:!1},show_value:{default:!0}},data:function(){return{val:0}},computed:{bindings:function(){return{value:this.val,disabled:!this.enabled,color:this.color,trueValue:this.on_value,falseValue:this.off_value,label:this.show_value?this.label:void 0}},label:function(){var t=this.val==this.on_value?this.on_value:this.off_value;return"".concat(t)}},watch:{value:function(t){this.val=t}},methods:{change:function(t){console.log("toggle event:",t),this.$emit("send",t)}}}},"3eb2":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("v-switch",t._b({staticClass:"ma-auto",on:{change:function(e){return t.change(e)}}},"v-switch",t.bindings,!1))],1)},o=[]},"467f":function(t,e,n){},5078:function(t,e,n){"use strict";n.r(e);var i=n("10cb"),o=n("e9ba");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("08a9");var r=n("2877"),s=n("6544"),c=n.n(s),l=n("99d9"),u=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports,c()(u,{VCardText:l["a"]})},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("c1f9"),n("d81d"),n("d3b7"),n("ddb0"),n("ac1f"),n("5319"),n("1276"),n("99af");var i=n("2b0e"),o=n("ce5b"),a=n.n(o);n("bf40");i["default"].use(a.a);var r=new a.a({theme:{options:{variations:!1,customProperties:!0},themes:{light:{background:"#f7f5f5",surface:"#fffdfd",panel:"#f4f2f2",primary:"#ad1625",primary_light:"#e5504d",primary_dark:"#760000",error:"#ec7422",highlight:"#fff5ce"},dark:{background:"#0b0808",surface:"#201d1d",panel:"#262424",primary:"#ad1625",primary_light:"#e5504d",primary_dark:"#760000",error:"#ec7422",highlight:"#716741"}}}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-menu",{attrs:{"offset-y":"","allow-overflow":"","max-width":"30ex","content-class":"popup-spacer","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){return[n("v-app-bar",{attrs:{dense:"",app:"","clipped-left":"",color:"surface"}},[n("span",{staticClass:"hidden-sm-and-up"},[n("v-app-bar-nav-icon",{on:{click:function(e){t.sidebar=!t.sidebar}}})],1),n("v-toolbar-title",{staticClass:"text-h4 font-weight-bold text--secondary flex-shrink-0 mr-3",staticStyle:{"font-variant":"small-caps"}},[t._v(" "+t._s(t.gotConfig?t.dash.title:"FlexDash")+" ")]),t.gotConfig?n("v-tabs",{staticClass:"hidden-xs-only",attrs:{"icons-and-text":""},model:{value:t.tab_ix,callback:function(e){t.tab_ix=e},expression:"tab_ix"}},[t._l(t.dash_tabs,(function(i,o){return n("v-tab",{key:i+o,class:{"is-active":o==t.tab_ix},attrs:{xhref:"#tab"+o}},[t._v(" "+t._s(t.tabs[i].title)+" "),n("v-icon",{staticClass:"mb-0",attrs:{large:!t.tabs[i].title}},[t._v("mdi-"+t._s(t.tabs[i].icon))]),n("div",{staticStyle:{position:"absolute","z-index":"5",right:"0",top:"0.5ex"}},[t.$root.editMode&&o==t.tab_ix?n("v-btn",{attrs:{small:"",icon:"","not-used":e},on:{click:function(e){t.tab_edit=!t.tab_edit}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e()],1)],1)})),t.$root.editMode?n("v-btn",{staticClass:"my-auto",attrs:{"x-small":"",fab:""},on:{click:t.addTab}},[n("v-icon",[t._v("mdi-plus")])],1):t._e()],2):t._e(),n("v-tooltip",{attrs:{bottom:"",disabled:!t.canUndo,foo:e},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",disabled:!t.canUndo},on:{click:function(e){return t.$store.performUndo()}}},"v-btn",o,!1),i),[n("v-icon",[t._v("mdi-undo")])],1)]}}],null,!0)},[n("span",[t._v("undo "+t._s(t.canUndo&&t.$store.undo.buf[t.$store.undo.buf.length-1].tagline))])]),n("demo",{on:{msg:t.handleMsg}}),n("uib",{ref:"uib",on:{msg:t.handleMsg}}),n("v-menu",{attrs:{"offset-x":"","min-width":"10em"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),i),[n("v-icon",[t._v("mdi-cog")])],1)]}}],null,!0),model:{value:t.settings_menu,callback:function(e){t.settings_menu=e},expression:"settings_menu"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",[n("v-switch",{attrs:{inset:"",label:"Edit"},model:{value:t.$root.editMode,callback:function(e){t.$set(t.$root,"editMode",e)},expression:"$root.editMode"}})],1),n("v-list-item",[n("v-switch",{attrs:{inset:"",label:"Dark"},model:{value:t.$vuetify.theme.dark,callback:function(e){t.$set(t.$vuetify.theme,"dark",e)},expression:"$vuetify.theme.dark"}})],1)],1)],1)],1),t.gotConfig?n("v-navigation-drawer",{attrs:{app:"","mini-variant":""},model:{value:t.sidebar,callback:function(e){t.sidebar=e},expression:"sidebar"}},[n("div",[n("v-tabs",{attrs:{vertical:""},model:{value:t.tab_ix,callback:function(e){t.tab_ix=e},expression:"tab_ix"}},t._l(t.dash_tabs,(function(e){return n("v-tab",{key:e,staticClass:"px-0",staticStyle:{"min-width":"auto"}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-"+t._s(t.tabs[e].icon))])],1)})),1)],1)]):t._e()]}}]),model:{value:t.tab_edit,callback:function(e){t.tab_edit=e},expression:"tab_edit"}},[n("v-card",{attrs:{color:"surface"}},[n("v-card-text",{staticClass:"d-flex px-2"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:""},on:{click:function(e){return t.moveTab(-1)}}},i),[n("v-icon",[t._v("mdi-arrow-left-bold")])],1)]}}])},[n("span",[t._v("Move tab left")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:""},on:{click:function(e){return t.moveTab(1)}}},i),[n("v-icon",[t._v("mdi-arrow-right-bold")])],1)]}}])},[n("span",[t._v("Move tab right")])]),n("v-spacer"),n("v-btn",{staticClass:"mx-auto",attrs:{small:""},on:{click:t.deleteTab}},[t._v("Delete tab")]),n("v-spacer"),n("v-btn",{attrs:{small:"",elevation:"0",icon:""},on:{click:function(e){t.tab_edit=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"d-flex flex-column"},[n("v-text-field",{staticClass:"flex-grow-0",attrs:{dense:"",label:"icon","persistent-hint":"",hint:"yes",value:t.tab.icon},on:{input:function(e){return t.handleEdit("icon",e)}},scopedSlots:t._u([{key:"message",fn:function(){return[n("span",[t._v("See "),n("a",{attrs:{target:"_blank",href:"https://materialdesignicons.com"}},[t._v(" materialdesignicons.com "),n("v-icon",{attrs:{color:"primary","x-small":""}},[t._v("mdi-open-in-new")])],1)])]},proxy:!0}])}),n("v-text-field",{staticClass:"flex-grow-0 mt-6",attrs:{dense:"",label:"tab title",value:t.tab.title},on:{input:function(e){return t.handleEdit("title",e)}}}),n("v-btn",{staticClass:"mx-auto",attrs:{small:""},on:{click:t.addGrid}},[t._v("Add grid")])],1)],1)],1),n("v-main",[t.gotConfig?n("v-tabs-items",{model:{value:t.tab_ix,callback:function(e){t.tab_ix=e},expression:"tab_ix"}},[n("div",{style:{backgroundColor:t.$vuetify.theme.themes[t.theme].background}},t._l(t.dash_tabs,(function(e){return n("v-tab-item",{key:e,class:{"is-active":e==t.tab_id}},t._l(t.tabs[e].grids,(function(i,o){return n(t.grids[i].kind,{key:i,tag:"component",attrs:{id:i},on:{delete:function(n){return t.deleteGrid(e,o)}}})})),1)})),1)]):n("div",[t._v(" LOADING... ")])],1)],1)},c=[],l=n("2909"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mx-2"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:"",color:t.color}},Object.assign({},{click:t.handleClick},i)),[n("v-icon",[t._v("mdi-network")])],1)]}}])},[n("span",[t._v("Enable socket.io connection")])])],1)},d=[],f=n("e900"),h=n.n(f);window.uib_started=!1;var p={name:"Uib",data:function(){return{enabled:!1,connected:!1,msgCount:0}},computed:{color:function(){return this.enabled?this.connected?"green":"error":null}},created:function(){console.log("uib created")},deleted:function(){h.a.clearEventListeners(),console.log("uib deleted")},mounted:function(){this.enabled&&this.start()},methods:{start:function(){var t=this,e=h.a.get("ioConnected");console.log("uib mounted, uib_started=".concat(window.uib_started," Connected=").concat(e)),h.a.clearEventListeners();var n="/uib-flexdash";h.a.start({namespace:n,ioPath:"/uibuilder/vendor/socket.io",vueApp:null}),window.uib_started&&h.a.sendCtrl({from:"client",cacheControl:"REPLAY"}),window.uib_started=!0,h.a.onChange("msg",(function(e){t.msgCount++,this.enabled&&t.$emit("msg",e)})),h.a.onChange("ioConnected",(function(e){t.connected=!!e}))},send:function(t){h.a.send(t)},handleClick:function(){this.enabled=!this.enabled,window.uib_started||this.start()}}},g=p,v=n("2877"),b=n("6544"),m=n.n(b),_=n("8336"),y=n("132d"),w=n("3a2f"),k=Object(v["a"])(g,u,d,!1,null,null,null),x=k.exports;m()(k,{VBtn:_["a"],VIcon:y["a"],VTooltip:w["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mx-2"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:"",color:t.color}},Object.assign({},{click:t.handleChange},i)),[n("v-icon",[t._v("mdi-dice-multiple")])],1)]}}])},[n("span",[t._v("Enable random demo data to be fed into demo_*.")])])],1)},O=[],S=n("3835"),D=["kitchen","bedroom","study","living room","guest room"],$=function(){var t={};return function(e){var n=t[e]||[70,0,0,0],i=Object(S["a"])(n,4),o=i[0],a=i[1],r=i[2],s=i[3];function c(){var t;if(a)t=s*r;else{var e;do{e=2*Math.random()-1,s=2*Math.random()-1,r=e*e+s*s}while(r>=1);r=Math.sqrt(-2*Math.log(r)/r),t=e*r}return a^=1,t}var l,u=50,d=90;do{l=c()}while(o+l<u||o+l>d);return o+=l,t[e]=[o,a,r,s],o}}(),j="\n# Welcome to FlexDash\n\nYou are seeing the FlexDash demo dashboard. It shows a variety of _widgets_ spread across\nmultiple _tabs_. Each tab can have multiple _grids_ that lay out the widgets and that can be\nrolled up and down.\n\n### Getting started\n\nThe demo dashboard does not connect to any server and instead displays randomly generated data.\nTo connect to a server, use the _mdi-network_ icon at the top right (not implemented yet).\n\nTo edit the dashboard's configuration, switch to edit mode using the settings icon at\nthe top-right. All editing is instantaneous while the dashboard remains live. If you make\na mistake, use the undo button at the top right.\n\n### Feeding data into FlexDash\n\n_to be continued_ ...\n",T={dash:{title:"FlexDash",tabs:["t00000","t00001"]},tabs:{t00000:{id:"t00000",icon:"view-dashboard",grids:["g0"]},t00001:{id:"t00001",icon:"home-thermometer",grids:["g1","g2"]}},grids:{g0:{id:"g0",kind:"fixed-grid",widgets:["1","0","3","2","9","6","7","8","10","11","12","13","14"]},g1:{id:"g1",kind:"fixed-grid",widgets:[]},g2:{id:"g2",kind:"fixed-grid",widgets:[]}},widgets:{1:{kind:"Markdown",id:"1",cols:3,rows:3,dynamic:{},static:{title:"",text:j}},0:{kind:"Stat",id:"0",static:{title:"Bedroom",value:"cold",unit:"F"},dynamic:{value:"bedroom"},rows:1,cols:1},2:{kind:"Stat",id:"2",static:{title:"Guest Room",unit:"F"},dynamic:{value:"guest room"},rows:1,cols:1},3:{kind:"Gauge",id:"3",static:{title:"Living Room",value:50,arc:270,center:!0,unit:"F",needle_color:"red",min:30},dynamic:{value:"living room"},rows:2,cols:2},6:{kind:"Gauge",id:"6",static:{title:"Kitchen",color:"lightblue",arc:90,unit:"F",min:0},dynamic:{value:"kitchen"},rows:1,cols:1},7:{kind:"Toggle",id:"7",static:{title:"light",off_value:"0",on_value:"ON",color:"secondary",value:"ON"},dynamic:{_output:"light",value:"light"},rows:1,cols:1},8:{kind:"PushButton",id:"8",static:{title:"launch",color:"secondary",output_value:"ON",icon:"rocket-launch",tooltip:"Next stop: Mars!"},dynamic:{_output:"light"},rows:1,cols:1},9:{kind:"PushButton",id:"9",static:{title:"",icon:"watering-can"},dynamic:{},rows:1,cols:1},10:{kind:"Gauge",id:"10",static:{title:"Kitchen",arc:180,base_color:"lightgreen",color:"blue",unit:"F",radius:90,needle_color:"white"},dynamic:{value:"kitchen"},rows:1,cols:1},11:{kind:"Sparkchart",id:"11",static:{title:"Livingrm",color:"green",line_width:4,fill:!0},dynamic:{value:"living room"},rows:1,cols:1},12:{kind:"Sparkchart",id:"12",static:{title:"Living Room",bars:!0},dynamic:{value:"living room"},rows:1,cols:1},13:{kind:"Sparkchart",id:"13",static:{title:"Kitchen"},dynamic:{value:"kitchen"},rows:1,cols:2},14:{kind:"TimePlot",id:"14",static:{title:"Temperatures"},dynamic:{data:"temp_data",options:"temp_opts"},rows:4,cols:4}}},E={series:[{label:"time"},{label:"Sensor 1",scale:"C",value:"v.toFixed(1) + '°C'"},{label:"Sensor 2",scale:"C",value:"v.toFixed(1) + '°C'"},{label:"Sensor 3",scale:"C",value:"v.toFixed(1) + '°C'"}],axes:[{},{scale:"F",values:'vv.map(v => v + "°F")'},{scale:"C",values:'vv.map(v => v + "°C")',side:1,grid:{show:!1}}],scales:{F:{from:"C",range:"[ min*9/5+32, max*9/5+32 ]"}}},M={name:"Demo",data:function(){return{enable:!0,timers:[]}},computed:{color:function(){return this.enable?"green":null}},mounted:function(){this.enable&&(this.enable=!1,this.handleChange(),window.setTimeout(this.tick,3e3))},methods:{handleChange:function(){var t=this;if(this.enable=!this.enable,console.log("Demo switch changed to",this.enable),this.enable){this.$emit("msg",{topic:"$config",payload:T});for(var e=function(e){t.timers.push(window.setInterval((function(){return t.tick(D[e])}),5e3+1e3*e)),t.tick(D[e])},n=0;n<D.length;n++)e(n);this.$emit("msg",{topic:"temp_opts",payload:E}),this.timers.push(window.setInterval(this.plot,3e3)),this.plot()}else this.timers.map((function(t){return window.clrInterval(t)})),this.timer=[]},tick:function(t){var e=Math.round(10*$(t))/10;this.$emit("msg",{topic:"".concat(t),payload:e})},plot:function(){var t=[Date.now()/1e3,Math.round(10*$("p1"))/10,Math.round(10*$("p2"))/10,Math.round(10*$("p3"))/10];this.$emit("msg",{topic:"temp_data",payload:t})}}},N=M,A=Object(v["a"])(N,C,O,!1,null,null,null),V=A.exports;m()(A,{VBtn:_["a"],VIcon:y["a"],VTooltip:w["a"]});var I={name:"Dash",components:{Uib:x,Demo:V},inject:["$config","$store"],data:function(){return{appTitle:"FlexDash",sidebar:!1,gotConfig:!1,tab_ix:null,tab_edit:!1,settings_menu:null,settings:{edit:"Edit mode",theme:"Toggle theme"}}},computed:{dash:function(){return this.gotConfig?this.$config.dash:{}},dash_tabs:function(){return this.dash.tabs||[]},tab:function(){return this.tab_id?this.tabs[this.tab_id]:{}},tab_id:function(){return null!=this.tab_ix?this.dash_tabs[this.tab_ix]:null},tabs:function(){return this.gotConfig?this.$config.tabs:{}},grids:function(){return this.gotConfig?this.$config.grids:{}},theme:function(){return this.$vuetify.theme.dark?"dark":"light"},canUndo:function(){return this.$store.undo.buf.length>0},_sd:function(){return this.$store.sd},_config:function(){return this.$config}},watch:{tabs:function(t){this.tab_ix>=t.length&&(this.tab_ix=t.length-1)}},provide:function(){var t=this;return{sendSrv:function(e,n){t.$refs.uib.send({topic:e,payload:n})}}},methods:{handleMsg:function(t){if("topic"in t&&"payload"in t)return"$config"!==t.topic||(console.log("*** config received"),this.gotConfig=!0,t.payload&&t.payload.dash)?void this.$store.insertData(t.topic,t.payload):(console.log("*** No or broken config, clearing! (got:",t.payload),void this.$store.initDash());console.log("Message w/out topic/payload:",t)},addTab:function(){var t=this,e=this.$store.addTab();this.$nextTick((function(){t.tab_ix=e,t.tab_edit=!0}))},deleteTab:function(){this.$store.deleteTab(this.tab_ix),this.tab_ix>=this.$config.dash.tabs.length-1&&(this.tab_ix=this.$config.dash.tabs.length-1),this.tab_edit=!1},handleEdit:function(t,e){console.log("handleEdit",t,e);var n={};n[t]=e,this.$store.updateTab(this.tab_id,n)},moveTab:function(t){var e=this,n=this.tab_ix;if(n+t>=0&&n+t<this.dash.tabs.length){var i=Object(l["a"])(this.dash.tabs),o=i[n];i[n]=i[n+t],i[n+t]=o,this.$store.updateDash({tabs:i}),this.tab_ix+=t,this.gotConfig=!1,this.$nextTick((function(){return e.gotConfig=!0}))}},addGrid:function(){this.$store.addGrid(this.tab_id)},deleteGrid:function(t,e){this.$store.deleteGrid(t,e)}}},R=I,P=(n("6580"),n("7496")),B=n("40dc"),L=n("5bc1"),F=n("b0af"),W=n("99d9"),q=n("8860"),G=n("da13"),U=n("f6c4"),z=n("e449"),H=n("f774"),J=n("2fa4"),K=n("b73d"),X=n("71a3"),Y=n("c671"),Q=n("fe57"),Z=n("aac8"),tt=n("8654"),et=n("2a7f"),nt=Object(v["a"])(R,s,c,!1,null,null,null),it=nt.exports;m()(nt,{VApp:P["a"],VAppBar:B["a"],VAppBarNavIcon:L["a"],VBtn:_["a"],VCard:F["a"],VCardText:W["a"],VIcon:y["a"],VList:q["a"],VListItem:G["a"],VMain:U["a"],VMenu:z["a"],VNavigationDrawer:H["a"],VSpacer:J["a"],VSwitch:K["a"],VTab:X["a"],VTabItem:Y["a"],VTabs:Q["a"],VTabsItems:Z["a"],VTextField:tt["a"],VToolbarTitle:et["a"],VTooltip:w["a"]});var ot=n("67b0"),at=n("5530"),rt=n("bee2"),st=n("53ca"),ct=n("b85c"),lt=n("d4ec"),ut=n("99de"),dt=n("257e"),ft=n("262e"),ht=n("2caf"),pt=n("9072"),gt=(n("b0c0"),n("9129"),n("a9e3"),n("4de4"),n("159b"),n("b64b"),n("0481"),n("a15b"),n("4fad"),n("2ef0")),vt=n.n(gt),bt=function(t){Object(ft["a"])(n,t);var e=Object(ht["a"])(n);function n(t){var i;return Object(lt["a"])(this,n),i=e.call(this,t),i.name="StoreError",Object(ut["a"])(i,Object(dt["a"])(i))}return n}(Object(pt["a"])(Error));function mt(t,e){var n,o=t,a=Object(ct["a"])(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(""==r);else if(Array.isArray(o)){var s=parseInt(r,10);if(Number.isNaN(s))throw new bt("Array index '".concat(r,"' in '").concat(e,"' is not an int"));if(s<0||s>=o.length)throw new bt("Array index '".concat(r,"' in '").concat(e,"' > ").concat(o.length));o=o[s]}else{if("object"!==Object(st["a"])(o))throw new bt("Level '".concat(r,"' of '").concat(e,"'' is not traversable: ").concat(Object(st["a"])(o[r])));r in o&&"undefined"!==typeof o[r]||i["default"].set(o,r,{}),o=o[r]}}}catch(c){a.e(c)}finally{a.f()}return o}var _t={icon:"rocket-launch",title:"",grids:[]},yt={kind:"fixed-grid",title:"",widgets:[]},wt={kind:"stat",rows:1,cols:1,static:{title:"Stat"},dynamic:{}},kt=function(){function t(){return Object(lt["a"])(this,t),this.root=i["default"].observable({sd:{},$config:{dash:{},tabs:{},grids:{},widgets:{}}}),this.sd=this.root.sd,this.config=this.root.$config,this.queue=[],this.undo=i["default"].observable({buf:[],at:null}),this}return Object(rt["a"])(t,[{key:"insertData",value:function(t,e){var n=this,o=t.split("/");if(o=o.filter((function(t){return t.length>0})),0==o.length)throw new bt("Cannot replace entire hierarchy");if("$config"===t)return Object.keys(e).forEach((function(t){i["default"].set(n.config,t,e[t])})),void console.log("Replaced $config with:",e);"$config"!==o[0]&&o.unshift("sd");var a=o.pop(),r=mt(this.root,o),s=void 0;if(Array.isArray(r)){var c=parseInt(a,10);if(Number.isNaN(c))throw new bt("Array index '".concat(a,"' is not a number"));if(c>=0&&c<r.length){if(void 0===e)throw new bt("Cannot delete array element '".concat(c,"' in '").concat(t,"'"));s=r[c],console.log("Updated array elt ".concat(t," with"),e),i["default"].set(r,c,e)}else{if(c!=r.length)throw new bt("Array index '".concat(c,"' in '").concat(t,"' > ").concat(r.length));if(void 0===e)throw new bt("Array index '".concat(c,"' in '").concat(t,"' >= ").concat(r.length));s=void 0,console.log("Appended array elt ".concat(t," with"),e),r.push(e)}}else{if("object"!==Object(st["a"])(r))throw new bt("".concat(t," is neither Array nor Object in server state"));s=r[a],void 0!==e?(console.log("Updated ".concat(t," with:"),e),i["default"].set(r,a,e)):(console.log("Deleted ".concat(t)),delete r[a])}return s}},{key:"pushUndo",value:function(t,e){var n=Date.now(),i=this.undo;if(i.at&&i.buf.length>0&&n-i.at<6e4&&t==i.buf[i.buf.length-1].tagline)console.log("undo coalesce"),i.buf[i.buf.length-1].mutation=[].concat(Object(l["a"])(e),Object(l["a"])(i.buf[i.buf.length-1].mutation));else{i.at=n,i.buf.push({tagline:t,mutation:e});while(i.buf.length>10)i.buf.shift()}}},{key:"performUndo",value:function(){console.log("perform undo");var t=this.undo;if(0==t.buf.length)throw new bt("undo buffer is empty");var e=t.buf.pop();t.at=null,this.qMutation(null,e.mutation)}},{key:"qMutation",value:function(t,e){console.log("queueing mutation",t);var n,i=[],o=Object(ct["a"])(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.unshift([a[0],this.insertData("$config/"+a[0],a[1])])}}catch(r){o.e(r)}finally{o.f()}t&&this.pushUndo(t,i)}},{key:"genId",value:function(t,e){var n=null;while(!n||n in t)n="00000"+Math.floor(1e4*Math.random()),n=e+n.substring(n.length-5);return n}},{key:"tabByID",value:function(t){var e=this.config.tabs[t];if(e&&e.id==t)return e;throw new bt("tab ".concat(t," does not exist"))}},{key:"gridByID",value:function(t){var e=this.config.grids[t];if(e&&e.id==t)return e;throw new bt("grid ".concat(t," does not exist"))}},{key:"widgetByID",value:function(t){var e=this.config.widgets[t];if(e&&e.id==t)return e;throw new bt("widget ".concat(t," does not exist"))}},{key:"tabIDByIX",value:function(t){var e=this.config.dash.tabs;if(e&&t>=0&&t<e.length)return e[t];throw new bt("tab #".concat(t," does not exist"))}},{key:"gridIDByIX",value:function(t,e){if("string"===typeof t&&(t=this.tabByID(t)),t&&e>=0&&e<t.grids.length)return t.grids[e];throw new bt("grid #".concat(e," does not exist in tab ").concat(t.id))}},{key:"widgetIDByIX",value:function(t,e){if("string"===typeof t&&(t=this.gridByID(t)),t&&e>=0&&e<t.widgets.length)return t.widgets[e];throw new bt("widget #".concat(e," does not exist in grid ").concat(t.id))}},{key:"initDash",value:function(){if(this.config.dash.title)throw new bt("cannot init a non-empty store");this.insertData("$config/widgets",{}),this.insertData("$config/grids",{g00001:{id:"g00001",kind:"fixed-grid",widgets:[]}}),this.insertData("$config/tabs",{t00001:{id:"t00001",icon:"view-dashboard",grids:["g00001"]}}),this.insertData("$config/dash",{title:"FlexDash",tabs:["t00001"]})}},{key:"addTab",value:function(){var t=this.genId(this.config.tabs,"t"),e=this.genId(this.config.grids,"g"),n=this.config.dash.tabs.length;return this.qMutation("add a tab",[["grids/".concat(e),Object(at["a"])(Object(at["a"])({},vt.a.cloneDeep(yt)),{},{id:e})],["tabs/".concat(t),Object(at["a"])(Object(at["a"])({},vt.a.cloneDeep(_t)),{},{id:t,grids:[e]})],["dash/tabs/".concat(n),t]]),n}},{key:"deleteTab",value:function(t){var e=this,n=this.tabIDByIX(t),i=this.tabByID(n).grids,o=i.map((function(t){return e.config.grids[t].widgets})).flat();this.qMutation("delete a tab",[["dash/tabs",this.config.dash.tabs.filter((function(e,n){return n!=t}))],["tabs/".concat(n),void 0]].concat(Object(l["a"])(i.map((function(t){return["grids/".concat(t),void 0]}))),Object(l["a"])(o.map((function(t){return["widgets/".concat(t),void 0]})))))}},{key:"updateTab",value:function(t,e){this.tabByID(t),this.qMutation("update tab ".concat(Object.keys(e).join(",")),Object.entries(e).map((function(e){var n=Object(S["a"])(e,2),i=n[0],o=n[1];return["tabs/".concat(t,"/").concat(i),o]})))}},{key:"updateDash",value:function(t){this.qMutation("update dash ".concat(Object.keys(t).join(",")),Object.entries(t).map((function(t){var e=Object(S["a"])(t,2),n=e[0],i=e[1];return["dash/".concat(n),i]})))}},{key:"addGrid",value:function(t){var e=this.tabByID(t),n=this.genId(this.config.grids,"g"),i=e.grids.length;return this.qMutation("add a grid",[["grids/".concat(n),Object(at["a"])(Object(at["a"])({},vt.a.cloneDeep(yt)),{},{id:n})],["tabs/".concat(t,"/grids/").concat(i),n]]),i}},{key:"deleteGrid",value:function(t,e){var n=this.tabByID(t),i=this.gridIDByIX(n,e),o=this.gridByID(i);this.qMutation("delete a grid",[["tabs/".concat(t,"/grids"),n.grids.filter((function(t,n){return n!=e}))],["grids/".concat(i),void 0]].concat(Object(l["a"])(o.widgets.map((function(t){return["widgets/".concat(t),void 0]})))))}},{key:"updateGrid",value:function(t,e){this.gridByID(t),this.qMutation("update grid ".concat(Object.keys(e).join(",")),Object.entries(e).map((function(e){var n=Object(S["a"])(e,2),i=n[0],o=n[1];return["grids/".concat(t,"/").concat(i),o]})))}},{key:"addWidget",value:function(t,e){var n=this.gridByID(t),i=this.genId(this.config.widgets,"w"),o=n.widgets.length;return this.qMutation("add a widget",[["widgets/".concat(i),Object(at["a"])(Object(at["a"])({},vt.a.cloneDeep(wt)),{},{id:i,kind:e,static:{title:e}})],["grids/".concat(t,"/widgets/").concat(o),i]]),o}},{key:"deleteWidget",value:function(t,e){var n=this.gridByID(t),i=this.widgetIDByIX(n,e);this.qMutation("delete a widget",[["grids/".concat(t,"/widgets"),n.widgets.filter((function(t,n){return n!=e}))],["widgets/".concat(i),void 0]])}},{key:"updateWidget",value:function(t,e){this.widgetByID(t),this.qMutation("update widget ".concat(Object.keys(e).join(",")),Object.entries(e).map((function(e){var n=Object(S["a"])(e,2),i=n[0],o=n[1];return["widgets/".concat(t,"/").concat(i),o]})))}},{key:"updateWidgetProp",value:function(t,e,n,i){this.widgetByID(t),this.qMutation("update widget prop ".concat(e,":").concat(n),[["widgets/".concat(t,"/").concat(e,"/").concat(n),i]])}}]),t}(),xt=new kt,Ct=xt;function Ot(t){return Object.fromEntries(t.keys().map((function(e){var n=t(e),o=e.split("/").pop().replace(/\.\w+$/,""),a=o.replace(/-\w/g,(function(t){return t[1].toLocaleUpperCase()}));return a=a[0].toLocaleUpperCase()+a.substr(1),i["default"].component(a,n.default||n),console.log("Imported ".concat(a," globally from ").concat(e)),[a,n.default]})))}window.io=n("8055"),i["default"].config.productionTip=!1,i["default"].use(ot["a"]),i["default"].loadScript("./date_helpers.js");var St=n("5a91");window.widgetPalette=Ot(St);var Dt=n("ac25");window.gridPalette=Ot(Dt),new i["default"]({vuetify:r,data:{editMode:!1},provide:{$config:Ct.config,$store:Ct},render:function(t){return t(it)}}).$mount("#app")},"58a3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gauge-card d-flex"},[n("svg-gauge",t._b({style:t.gauge_valign,attrs:{value:t.value}},"svg-gauge",t.$props,!1)),n("div",{staticClass:"gauge-card--label d-flex flex-column mx-auto",class:t.txt_valign},[n("v-card-text",{staticClass:"gauge-value d-flex pa-0 width100"},[n("span",{staticClass:"mx-auto"},[t._v(t._s(t.valTxt)),n("span",{staticClass:"unit"},[t._v(t._s(t.unitTxt))])])]),t.title?n("v-card-text",{staticClass:"gauge-title d-flex pa-0"},[n("span",{staticClass:"mx-auto"},[t._v(t._s(t.title))])]):t._e()],1)],1)},o=[],a=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"gauge",attrs:{viewBox:t.vbox,preserveAspectRatio:t.ar}},[n("circle",{staticClass:"gauge-base",attrs:{cx:"0",cy:"0",fill:"transparent",r:t.stroke_radius,stroke:t.base_color,"stroke-width":t.stroke_width,transform:t.xform,"stroke-dasharray":t.stroke_bdash}}),n("circle",{staticClass:"gauge-stroke",attrs:{cx:"0",cy:"0",fill:"transparent",r:t.stroke_radius,stroke:t.color,"stroke-width":t.stroke_width,transform:t.xform,"stroke-dasharray":t.stroke_sdash}}),n("line",{staticClass:"gauge-needle",attrs:{x1:t.needle_start,y1:0,x2:100,y2:0,stroke:t.needle_color,"stroke-width":"2",transform:t.nform}})])}),r=[],s=(n("99af"),{name:"SvgGauge",props:{min:{type:Number,default:0},max:{type:Number,default:100},value:{type:Number,default:30},color:{type:String,default:"--v-purple-base"},base_color:{type:String,default:"lightgrey"},needle_color:{type:String,default:"white"},radius:{type:Number,default:70},arc:{type:Number,default:270},stretch:{type:Boolean,default:!1}},computed:{frac:function(){var t=(this.value-this.min)/(this.max-this.min);return Math.min(1,Math.max(0,t))},stroke_width:function(){return 100-this.radius},stroke_radius:function(){return 100-this.stroke_width/2},needle_start:function(){return 100-1.25*this.stroke_width},circumference:function(){return 2*this.stroke_radius*Math.PI},stroke_bdash:function(){var t=this.arc*this.circumference/360;return"".concat(t," ").concat(this.circumference)},stroke_sdash:function(){var t=this.arc*this.frac*this.circumference/360;return"".concat(t," ").concat(this.circumference)},xform:function(){return"rotate(".concat(270-this.arc/2,", 0, 0)")},nform:function(){return"rotate(".concat(270-this.arc/2+this.arc*this.frac,", 0, 0)")},ar:function(){return this.stretch?"none":"xMidYMid"},vbox:function(){var t=this.arc>=180?100:this.needle_start,e=(this.arc-180)/2*Math.PI/180,n=100+t*Math.sin(e),i=this.arc>=180?200:200*Math.cos(e);return"-".concat(i/2," -100 ").concat(i," ").concat(n)}}}),c=s,l=n("2877"),u=Object(l["a"])(c,a,r,!1,null,null,null),d=u.exports,f={name:"Gauge",components:{SvgGauge:d},props:{value:{type:Number,default:null},unit:{type:String,default:""},title:{type:String,default:"Gauge"},arc:{type:Number,default:90,validator:function(t){return t>10&&t<=360}},center:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},color:{type:String,default:"green"},base_color:{type:String,default:"lightgrey"},needle_color:{type:String,default:"white"},radius:{type:Number,default:70},stretch:{type:Boolean,default:!1}},computed:{txt_valign:function(){var t=null!==this.center?this.center:!(this.arc<200);return t?"my-auto":"mt-auto"},gauge_valign:function(){return this.arc<180?"height:auto;":""},unitTxt:function(){return"--"===this.value?"":this.unit},valTxt:function(){return"number"==typeof this.value?Math.round(10*this.value)/10:null===this.value?"--":this.value}}},h=f,p=(n("ce88"),n("6544")),g=n.n(p),v=n("99d9"),b=Object(l["a"])(h,i,o,!1,null,"d0e2edf8",null);e["default"]=b.exports;g()(b,{VCardText:v["a"]})},"5a91":function(t,e,n){var i={"./gauge.vue":"58a3","./markdown.vue":"5078","./push-button.vue":"63e2","./sparkchart.vue":"1ec4","./stat.vue":"254b","./time-plot.vue":"6bc8","./toggle.vue":"a9ef"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id="5a91"},"5cc2":function(t,e){t.exports={name:"PushButton",props:{enabled:{default:!0},color:{default:"primary"},output_value:{default:25},icon:{default:null},title:{default:"Button"},tooltip:{default:null}},computed:{bindings:function(){return{disabled:!this.enabled,color:this.color}}},methods:{clickEv:function(t){console.log("PushButton event:",t),this.$emit("send",this.output_value)}}}},"63e2":function(t,e,n){"use strict";n.r(e);var i=n("dc81"),o=n("829b");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("34fc");var r=n("2877"),s=n("6544"),c=n.n(s),l=n("8336"),u=n("132d"),d=n("3a2f"),f=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,"68ce9d17",null);e["default"]=f.exports,c()(f,{VBtn:l["a"],VIcon:u["a"],VTooltip:d["a"]})},6580:function(t,e,n){"use strict";n("467f")},"6bc8":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-1"},[n("div",{staticStyle:{"xx-background-color":"#eef"}})])}],a=(n("99af"),n("d81d"),n("159b"),n("cb29"),n("d3b7"),n("ddb0"),n("07ac"),n("ab54")),r=(n("fa7e"),["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#ffffff","#000000"]),s={name:"TimePlot",props:{options:{type:Object,default:function(){return null}},data:{type:Array,default:function(){},validator:function(t){return Array.isArray(t)&&t.length}}},data:function(){return{chart:null,ro:null,width:40,chart_data:null,dark_watcher:null}},watch:{options:function(){console.log("Time-plot options changed"),this._destroy(),this._create()},data:function(t){if(t){var e=Array.isArray(t[0]);if(this.chart&&this.chart_data&&!e){for(var n=this.chart_data.length,i=0;i<n;i++)this.chart_data[i].push(t[i]);var o=Math.max(this.width/2,20);while(this.chart_data[0].length>o)for(var a=0;a<n;a++)this.chart_data[a].shift();this.chart.setData(this.chart_data)}else this.chart&&this._destroy(),this.chart_data=this._transpose(e?t:[t]),this._create()}}},mounted:function(){var t=this;this._create(),this.ro=new ResizeObserver(this._onResize).observe(this.$el);var e=this;this.dark_watcher=this.$watch((function(){return e.$vuetify.theme.dark}),(function(){t._destroy(),t._create()}))},beforeDestroy:function(){console.log("BeforeDestroy uPlot"),this.ro&&this.ro.unobserve(this.$el),this.ro=null,this._destroy(),this.dark_watcher()},methods:{_destroy:function(){this.chart&&(console.log("Destroying uPlot"),this.chart.destroy(),this.chart=null)},_calcSize:function(){var t=this.options.width||this.$el.children[0].clientWidth,e=this.options.height||t/(this.options.aspect||2);return console.log("Time-plot container sized to ".concat(t,"x").concat(e)),this.width=t,{width:t,height:e}},_onResize:function(){this.chart&&this.chart.setSize(this._calcSize())},_transpose:function(t){if(!t||0==t.length)return[];t[0].map;var e=t[0].map((function(){return Array(t.length)}));return t.forEach((function(t,n){t.forEach((function(t,i){e[i][n]=t}))})),e},_create:function(){var t=this;if(console.log("Creating uPlot"),this.chart_data&&0!==this.chart_data.length){var e=JSON.parse(JSON.stringify(this.options));Object.assign(e,this._calcSize()),e.series||(e.series=[]);while(e.series.length<this.chart_data.length)e.series.push({});e.series.forEach((function(e,n){e.label||(e.label=n?"series "+n:"time"),n&&(e.stroke||(e.stroke=r[(n-1)%20]),e.width||(e.width=2),"string"===typeof e.value&&(e.value=new Function("u","v",'"use strict";return ('.concat(e.value,")")))),t.$vuetify.theme.dark&&(e.points||(e.points={}),e.points.fill||(e.points.fill="#1e1e1e"))})),(!e.axes||e.axes.length<2)&&(e.axes=[{},{}]),e.axes.forEach((function(e){e.values&&"string"===typeof e.values&&(e.values=new Function("u","vv","s",'"use strict";return ('.concat(e.values,")"))),t.$vuetify.theme.dark&&(e.grid||(e.grid={}),e.grid.stroke||(e.grid.stroke="#444"),e.stroke||(e.stroke="#ccc"))})),Object.values(e.scales||{}).forEach((function(t){t.range&&"string"===typeof t.range&&(t.range=new Function("u","min","max",'"use strict";return ('.concat(t.range,")")))})),console.log("uPlot options:",e),this.chart=new a["a"](e,this.chart_data,this.$el.children[0])}}}},c=s,l=(n("fe07"),n("2877")),u=Object(l["a"])(c,i,o,!1,null,null,null);e["default"]=u.exports},7408:function(t,e,n){},"829b":function(t,e,n){"use strict";n.r(e);var i=n("5cc2"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},8896:function(t,e,n){},"9d9d":function(t,e,n){"use strict";n.r(e);var i=n("26df"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},a6c4:function(t,e,n){"use strict";n("089f")},a9ef:function(t,e,n){"use strict";n.r(e);var i=n("3eb2"),o=n("07c0");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var r=n("2877"),s=n("6544"),c=n.n(s),l=n("b73d"),u=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports,c()(u,{VSwitch:l["a"]})},ac25:function(t,e,n){var i={"./fixed-grid.vue":"322f"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id="ac25"},b329:function(t,e,n){},b60a:function(t,e,n){},bf03:function(t,e,n){n("a9e3"),n("cb29"),t.exports={name:"Sparkchart",props:{value:{default:0},color:{type:String,default:"blue"},fill:{type:Boolean,default:!1},line_width:{type:Number,default:4},bars:{type:Boolean,default:!1}},data:function(){return{data:[],ro:null,height:10,width:20}},computed:{bindings:function(){return{color:this.color,fill:this.fill,lineWidth:this.line_width,padding:this.line_width,value:this.data,type:this.bars?"bar":"trend",autoLineWidth:!!this.bars,height:this.height,width:this.width}}},mounted:function(){var t=this;this.$nextTick((function(){t.$el.offsetParent?t.ro=new ResizeObserver(t._onResize).observe(t.$el.offsetParent):console.log("sparkshart oops1")}))},beforeUnmount:function(){this.ro&&this.ro.unobserve(this.$el.offsetParent)},watch:{value:function(t){if("number"===typeof t||null===t){this.data.push(t);while(this.data.length>20)this.data.shift()}else Array.isArray(t)&&(this.data=t)}},methods:{_onResize:function(){this.$el.offsetParent?(this.height=this.$el.offsetParent.clientHeight-this.$el.offsetTop,this.width=this.$el.offsetParent.clientWidth,console.log("_onResize",this.color,"Height:",this.height)):console.log("sparkchart oops2")}}}},c680:function(t,e,n){"use strict";n("ee5d")},ce88:function(t,e,n){"use strict";n("db21")},d0ef:function(t,e,n){"use strict";n("7408")},d473:function(t,e,n){},d9ba:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[n("v-sparkline",t._b({ref:"sparkl"},"v-sparkline",t.bindings,!1))],1)},o=[]},db21:function(t,e,n){},db64:function(t,e,n){"use strict";n("d473")},dc81:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pushbutton d-flex"},[n("v-tooltip",{attrs:{top:"","open-on-hover":!!t.tooltip},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"ma-auto",attrs:{large:"",dense:"","max-width":"95%"},on:{click:function(e){return t.clickEv(e)}}},"v-btn",Object.assign(t.bindings,o),!1),i),[t.icon?n("v-icon",{attrs:{large:!t.title}},[t._v("mdi-"+t._s(t.icon))]):t._e(),t._v(" "),n("span",[t._v(t._s(t.title))])],1)]}}])},[t.tooltip?n("span",[t._v(t._s(t.tooltip))]):t._e()])],1)},o=[]},e900:function(t,e,n){"use strict";var i=n("7037").default;if(n("8a79"),n("fb6a"),n("ac1f"),n("5319"),n("466d"),n("4de4"),n("1276"),n("498a"),n("a15b"),n("b0c0"),n("159b"),n("b64b"),n("99af"),n("d81d"),"undefined"===typeof o)var o=n("8055");(function(){var n=this,a=n.uibuilder,r=function(){String.prototype.endsWith||(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)});var t=this;t.version="3.3.0",t.debug=!1,t.moduleName="uibuilder",t.isUnminified=/param/.test((function(t){})),t.dummyAuth={id:null,jwt:void 0,sessionExpiry:void 0,userValidated:!1,info:{error:void 0,message:void 0,validJwt:void 0}},t._auth=void 0,t.started=!1,t.uiDebug=function(){if(t.debug){var e=arguments[0];console[e].apply(console,[].slice.call(arguments,1))}},t.me=function(){return!0===t.debug?t:"uibuilderfe.js Version: "+t.version},t.uiDebug("log","\nuibuilderfe: Debug? ",t.debug,"\n\t\tVersion? ",t.version,"\n\t\tRunning Packed version? ",!t.isUnminified,"\n "),t.setIOnamespace=function(){var e="";try{e=document.cookie.match(/uibuilder-namespace\s*=.*?\s*;/g)[0].replace("uibuilder-namespace=","").replace(";","")}catch(i){}if(""===e){var n=window.location.pathname.split("/").filter((function(t){return""!==t.trim()}));n.length>0&&n[n.length-1].endsWith(".html")&&n.pop(),e=n.pop(),t.uiDebug("log","uibuilderfe: IO Namespace - Found via url path: "+e)}else t.uiDebug("log","uibuilderfe: IO Namespace - Found via cookie: "+e);return e="/"+e,t.uiDebug("log","uibuilderfe: IO Namespace: "+e),e},t.autoSendReady=!0,t.allowScript=!0,t.allowStyle=!0,t.removeScript=!0,t.removeStyle=!0,t.msg={},t.ctrlMsg={},t.sentMsg={},t.sentCtrlMsg={},t.msgsSent=0,t.msgsReceived=0,t.msgsSentCtrl=0,t.msgsCtrl=0,t.ioConnected=!1,t.serverTimeOffset=null,t.isAuthorised=!1,t.authTokenExpiry=null,t.authData={},t.ioChannels={control:"uiBuilderControl",client:"uiBuilderClient",server:"uiBuilder"},t.retryMs=2e3,t.retryFactor=1.5,t.timerid=null,t.ioNamespace=t.setIOnamespace(),t.ioTransport=["polling","websocket"],t.loaded=!1,t.authToken="";var e=window.location.pathname.split("/").filter((function(t){return""!==t.trim()}));return e.length>0&&e[e.length-1].endsWith(".html")&&e.pop(),t.url=e.pop(),t.httpNodeRoot="/"+e.join("/"),t.ioPath=c(t.httpNodeRoot,t.moduleName,"vendor","socket.io"),t.uiDebug("debug","uibuilderfe: ioPath: "+t.ioPath+", httpNodeRoot: "+t.httpNodeRoot+", uibuilder url (not used): "+t.url),t.set=function(e,n){t[e]=n,t.uiDebug("debug","uibuilderfe: prop set - prop: "+e+", val: "+("object"===i(n)?JSON.stringify(n):n)),t.emit(e,n)},t.checkConnect=function(e,n){var i=i++||1;t.uiDebug("debug","uibuilderfe:checkConnect. Reconnect - Depth: "+i+", Delay: "+e+", Factor: "+n,t.ioNamespace,t.ioPath),t.timerid&&window.clearTimeout(t.timerid),t.timerid=window.setTimeout((function(){t.uiDebug("debug","uibuilderfe:checkConnect timeout. SIO reconnect attempt, timeout: "+e+", depth: "+i,t.ioNamespace,t.ioPath),console.info("[uibuilderfe:checkConnect:setTimeout] Socket.IO reconnection attempt. Current delay: "+e),t.socket.close(),t.socket.connect(),t.timerid=null,t.checkConnect(e*n,n)}),e)},t.checkTimestamp=function(e){if(e.hasOwnProperty("serverTimestamp")){var n=new Date(e.serverTimestamp),i=Math.round((new Date-n)/36e5);i!==t.serverTimeOffset&&(t.set("serverTimeOffset",i),t.uiDebug("log","uibuilderfe:"+t.ioChannels.server+" (server): Offset changed to: "+i))}},t.ioSetup=function(){t.uiDebug("debug","uibuilderfe:ioSetup: About to create IO. Namespace: "+t.ioNamespace+", Path: "+t.ioPath+", Transport: ["+t.ioTransport.join(", ")+"]"),t.socketOptions={path:t.ioPath,transports:t.ioTransport,transportOptions:{polling:{extraHeaders:{"x-clientid":"uibuilderfe"}}}},t.socket=o(t.ioNamespace,t.socketOptions),t.socket.on("connect",(function(){t.uiDebug("info","uibuilderfe:ioSetup: SOCKET CONNECTED - Namespace: "+t.ioNamespace," Server Channel: ",t.ioChannels.server," Control Channel: ",t.ioChannels.control),t.set("ioConnected",!0),t.timerid&&(window.clearTimeout(t.timerid),t.timerid=null)})),t.socket.on(t.ioChannels.server,(function(e){t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.server+" (server): msg received - Namespace: "+t.ioNamespace,e),e=s(e,"payload"),t.checkTimestamp(e),e._auth&&t.updateAuth(e._auth),t.allowScript&&e.hasOwnProperty("script")&&(t.newScript(e.script),t.removeScript&&delete e.script),t.allowStyle&&e.hasOwnProperty("style")&&(t.newStyle(e.style),t.removeStyle&&delete e.style),t.set("msg",e),t.set("msgsReceived",t.msgsReceived+1)})),t.socket.on(t.ioChannels.control,(function(e){if(t.uiDebug("debug","uibuilder:ioSetup:"+t.ioChannels.control+" (control): msg received - Namespace: "+t.ioNamespace,e),null===e)e={};else if("object"!==i(e)){var n={};n["uibuilderCtrl:"+t.ioChannels.control]=e,e=n}switch(e.hasOwnProperty("debug")&&(t.debug=e.debug),t.checkTimestamp(e),t.set("ctrlMsg",e),t.set("msgsCtrl",t.msgsCtrl+1),e.uibuilderCtrl){case"ready for content":e._auth&&t.updateAuth(e._auth),t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "ready for content" from server');break;case"shutdown":t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "shutdown" from server'),t.set("serverShutdown",void 0);break;case"client connect":e._auth&&t.updateAuth(e._auth),!0===t.autoSendReady&&(t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "client connect" from server, auto-sending REPLAY control msg'),t.send({uibuilderCtrl:"ready for content",cacheControl:"REPLAY"},t.ioChannels.control));break;case"authorised":t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "authorised" from server'),e._auth?t.updateAuth(e._auth):(t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "authorised" from server but without a _auth property - logon failed'),t.markLoggedOut("Logon succeeded but no _auth received, logged out"));break;case"authorisation failure":t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "authorisation failure" from server'),t.markLoggedOut("Logon authorisation failure",e._auth.authData);break;case"logged off":t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "logged off" from server'),t.markLoggedOut("Logged off by logout() request",e._auth);break;default:t.uiDebug("debug","uibuilderfe:ioSetup:"+t.ioChannels.control+' Received "'+e.uibuilderCtrl+'" from server'),e._auth&&t.updateAuth(e._auth)}})),t.socket.on("disconnect",(function(e){t.uiDebug("info","uibuilderfe:ioSetup: SOCKET DISCONNECTED - Namespace: "+t.ioNamespace+", Reason: "+e),t.set("ioConnected",!1),console.warn("[uibuilderfe:socket-disconnect] Reason: "+e),t.checkConnect(t.retryMs,t.retryFactor)})),t.socket.on("connect_error",(function(e){t.uiDebug("error","uibuilderfe:ioSetup: SOCKET CONNECT ERROR - Namespace: "+t.ioNamespace+" ioPath: "+t.ioPath+", Reason: "+e.message)})),t.socket.on("error",(function(e){t.uiDebug("warn","uibuilderfe:ioSetup: SOCKET ERROR from server - MESSAGE: ",e),t.set("socketError",e)})),t.checkConnect(t.retryMs,t.retryFactor)},t.markLoggedOut=function(e,n){void 0===t._auth&&void 0===n||(n=t.dummyAuth,void 0!==e&&(t._auth.info.message=e),t.set("isAuthorised",!1),t.set("_auth",n))},t.logon=function(e,n){void 0===t._auth&&void 0===e||(void 0===e&&(e=t._auth),void 0!==e.id&&null!==e.id&&0!==e.id.length?(e.info||(e.info=t.dummyAuth.info),t.set("_auth",e),n||t.send({uibuilderCtrl:"logon",from:"client",_auth:t._auth},t.ioChannels.control),t.uiDebug("log","[uibuilder:logon] ",t._auth)):console.error("[uibuilder:logon] No logon id supplied, ignoring request."))},t.logoff=function(e,n){void 0===t._auth&&void 0===e||(void 0===e&&(e=t._auth),void 0!==e.id&&null!==e.id&&0!==e.id.length?(e.info||(e.info=t.dummyAuth.info),t._auth=e,n||t.send({uibuilderCtrl:"logoff",from:"client",_auth:t._auth},t.ioChannels.control)):console.error("[uibuilder:logoff] No logoff id supplied, ignoring request."))},t.updateAuth=function(e){if(void 0!==t._auth||void 0!==e){if(void 0===e&&(e=t._auth),void 0===e.id||null===e.id||0===e.id.length)return console.error("[uibuilder:updateAuth] No auth id supplied by server, ignoring server response."),void(e.info&&e.info.error&&console.warn("[uibuilder:updateAuth] Error from Server: ",e.info.error));e.info||(e.info=t.dummyAuth.info),e.userValidated&&e.jwt&&!0===e.info.validJwt&&new Date(e.sessionExpiry)>new Date?(t.set("isAuthorised",!0),t.set("_auth",e)):t.markLoggedOut("Logon succeeded but no token received, logged out")}},t.sendAuth=function(){try{if(void 0===t._auth)return;return t.isAuthorised?(new Date(t._auth.sessionExpiry)>new Date||t.markLoggedOut("Automatically logged off. Token expired"),t._auth):t._auth}catch(e){return}},t.send=function(e,n){null!==n&&void 0!==n||(n=t.ioChannels.client),t.uiDebug("log","uibuilderfe: sending msg - Namespace: "+t.ioNamespace+", Channel: "+n,e),n===t.ioChannels.client?e=s(e,"payload"):n===t.ioChannels.control&&(e=s(e,"uibuilderCtrl"),e.hasOwnProperty("uibuilderCtrl")||(e.uibuilderCtrl="manual send"),e.from="client"),e._socketId=t.socket.id,e._auth=t.sendAuth(),n===t.ioChannels.client?(t.set("sentMsg",e),t.set("msgsSent",t.msgsSent+1)):n===t.ioChannels.control&&(t.set("sentCtrlMsg",e),t.set("msgsSentCtrl",t.msgsSentCtrl+1)),t.socket.emit(n,e)},t.onChange=function(e,n){t.events[e]?t.events[e].push(n):t.events[e]=[n]},t.clearEventListeners=function(){t.events=[]},t.events={},t.emit=function(e){var n=t.events[e];if(n)for(var i=Array.prototype.slice.call(arguments,1),o=0;o<n.length;o++)n[o].apply(t,i)},t.newScript=function(e){if(!0===t.allowScript&&""!==e&&"undefined"!==typeof e){t.uiDebug("log","uibuilderfe: newCode - script: "+e);var n=document.createElement("script");n.type="text/javascript",n.defer=!0,n.textContent=e,document.getElementsByTagName("body")[0].appendChild(n)}},t.newStyle=function(e){if(!0===t.allowStyle&&""!==e&&"undefined"!==typeof e){t.uiDebug("log","uibuilderfe: newStyle - style: "+e);var n=document.createElement("style");n.textContent=e,document.getElementsByTagName("head")[0].appendChild(n)}},t.showToast=function(e){if(t.vueApp)if(t.vueApp.$bvToast)if(e._uib&&null!==e._uib&&"Object"===e._uib.constructor.name){var n=t.vueApp.$createElement,i={};e._uib.options&&(i=Object.assign({},e._uib.options));var o="";e.payload&&(o+=e.payload),i.content&&(o+=i.content);var a=n("p",{domProps:{innerHTML:o}});i.title&&(i.title=n("p",{domProps:{innerHTML:i.title}})),i.append&&(i.appendToast=i.append),i.autoHideDelay&&(i.autohide=!0,i.delay=i.autoHideDelay),""!==o?t.vueApp.$bvToast.toast(a,i):console.warn("[uibuilder:toast] Toast content is blank. Not shown.")}else console.warn("[uibuilder:toast] Incoming msg requires msg._uib object, cannot create a toast");else console.warn("[uibuilder:toast] bootstrap-vue toast component not available, cannot create a toast");else console.warn("[uibuilder:toast] Vue app object not available, cannot create a toast")},t.showAlert=function(){},t.showComponentDetails=function(e){if(t.vueApp&&t.vueApp.$refs[e]){var n=t.vueApp.$refs[e],i={};if(n.$options)i={uibuilderCtrl:"vue component details",componentDetails:{ref:e,tag:n.$options._componentTag,props:n.$options._propKeys}};else{var o='[uibuilderfe:showComponentDetails] ref="'.concat(e,'" is not a Vue Component. Details cannot be returned.');t.uiDebug("warn",o),i={uibuilderCtrl:"vue component details",componentDetails:{warning:o,ref:e,tag:null,props:null}}}return i}},t.onChange("msg",(function(e){if(t.vueApp&&e._uib&&(!0===e._uib.reload&&(console.log("reloading"),location.reload()),e._uib.componentRef)){var n=t.vueApp,i=e._uib.componentRef;if(e._uib.requestDetails){var o=t.showComponentDetails(i);o&&(e.topic&&(o.topic=e.topic),t.send(o,t.ioChannels.control))}else if("globalNotification"!==i)if("globalAlert"!==i)if(i in n.$refs){if(e._uib.options&&(t.uiDebug("log","🔢📈 new component instance options received for ref",i,":",e._uib.options),Object.keys(e._uib.options).forEach((function(o){try{n.$set(n.$refs[i],o,e._uib.options[o])}catch(a){t.uiDebug("warn",'[uibuilderfe:internal:onChange] Could not update prop "'.concat(o,'" for component ref="').concat(i,'". Error: ').concat(a.message))}}))),e.payload){t.uiDebug("log","🔢📈 new component instance value received for ref",i,":",e.payload);try{n.$refs[i].$props["config"]["value"]=e.payload}catch(s){}}}else{var a='[uibuilderfe:internal:onChange] ref="'.concat(i,'" is not a Vue Component. Cannot set props.');t.uiDebug("warn",a);var r={uibuilderCtrl:"vue component details",componentDetails:{warning:a,ref:i,tag:null,props:null}};e.topic&&(r.topic=e.topic),t.send(r,t.ioChannels.control)}else t.showAlert(e);else t.showToast(e)}})),t.uiReturn={set:function(e,n){var i=["autoSendReady","ctrlMsg","debug","events","httpNodeRoot","ioChannels","ioConnected","ioNamespace","ioPath","ioTransport","isAuthorised","isUnminified","loaded","msg","msgsCtrl","msgsReceived","msgsSent","msgsSentCtrl","moduleName","retryFactor","retryMs","sentMsg","sentCtrlMsg","serverTimeOffset","socket","timerid","url","version","checkConnect","checkTimestamp","emit","get","ioSetup","logon","logoff","markLoggedOut","me","newScript","newStyle","onChange","self","set","send","sendAuth","sendCtrl","setIOnamespace","showComponentDetails","showToast","socket","uiDebug","updateAuth","uiReturn"];if(-1!==i.indexOf(e))return console.warn('[uibuilder:set] Cannot use set() on protected property "'+e+'"'),void t.uiDebug("warn",'uibuilderfe:uibuilder:set: "'+e+'" is in list of excluded properties, not set');if("_auth"===e){if(!n.id||0===n.id.length)return void console.warn("[uibuilder:set] _auth must contain a valid _auth.id property");n.info||(n.info=t.dummyAuth.info)}t.set(e,n)},get:function(e){var n=["checkConnect","checkTimestamp","emit","get","ioSetup","logon","logoff","markLoggedOut","me","newScript","newStyle","onChange","self","set","send","sendAuth","sendCtrl","setIOnamespace","showComponentDetails","showToast","socket","uiDebug","updateAuth","uiReturn"];return-1!==n.indexOf(e)?(console.warn('[uibuilder] Cannot use get() on protected property "'+e+'"'),void t.uiDebug("warn",'uibuilderfe:uibuilder:get: "'+e+'" is in list of excluded properties, not get')):(void 0===t[e]&&console.warn('[uibuilder] get() - property "'+e+'" does not exist'),t[e])},onChange:t.onChange,clearEventListeners:t.clearEventListeners,msg:t.msg,send:t.send,sendCtrl:function(e){t.send(e,t.ioChannels.control)},autoSendReady:function(e){!0!==e&&(e=!1),t.autoSendReady=e},debug:function(e){if("undefined"===typeof e)return t.debug;"boolean"===typeof e&&(t.debug=e)},uiDebug:t.uiDebug,me:t.me,start:function(e,n,i){!0!==t.started?(t.uiDebug("log","[uibuilderfe:start] start() called"),"[object Object]"===toString.call(e)?(t.uiDebug("log","✅ [uibuilderfe:start] namespace IS an object!"),!0===e._isVue?(t.uiDebug("log","✅ [uibuilderfe:start] Vue instance object IS available!"),i=e,e=void 0):(e.ioPath&&(n=e.ioPath),e.vueApp&&(i=e.vueApp),e=e.namespace?e.namespace:void 0)):i?"[object Object]"===toString.call(i)&&!0===i._isVue?t.uiDebug("log","✅ [uibuilderfe:start] Vue instance object IS available!"):(t.uiDebug("log","❌ [uibuilderfe:start] Vue instance object not available!"),i=void 0):t.uiDebug("log","❌ [uibuilderfe:start] app1 not available!"),t.uiDebug("log","[uibuilderfe:start] Calling params - namespace",e,"ioPath",n,"vueApp",i),void 0!==e&&null!==e&&(t.ioNamespace=e),void 0!==n&&null!==n&&(t.ioPath=n),void 0!==i&&null!==i&&(t.vueApp=i),t.uiDebug("log","[uibuilderfe:start] Final Socket.IO params - namespace",e,"ioPath",n),t.ioSetup(),t.started=!0):t.uiDebug("log","❌ [uibuilderfe:start] Start function already called. Do not call more than once.")},logon:t.logon,logoff:t.logoff,showComponentDetails:t.showComponentDetails,showToast:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"globalNotification",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={_uib:{componentRef:n,options:i},payload:e};t.showToast(o)},eventSend:function(e){if(e.constructor.name.endsWith("Event")&&e.currentTarget){var n=e.currentTarget,i="";try{""!==n.textContent&&(i=n.textContent.substring(0,25))}catch(o){}try{""!==n.name&&(i=n.name)}catch(o){}try{""!==n.id&&(i=n.id)}catch(o){}t.send({topic:t.msg.topic,uibDomEvent:{sourceId:i,event:e.type},payload:n.dataset})}else t.uiDebug("log","[uibuilderfe:eventSend] ARGUMENT NOT A DOM EVENT - use data attributes not function arguments to pass data")},automap:t.automap},window.addEventListener("load",(function(){t.uiDebug("debug","uibuilderfe:load: All resources loaded"),t.loaded=!0})),t.uiReturn}.call(n);function s(t,e){null!==e&&void 0!==e||(e="payload"),"string"!==typeof e&&(console.warn("[uibuilderfe:makeMeAnObject] WARNING: property parameter must be a string and not: "+i(e)),e="payload");var n={};return"object"===i(t)?n=t:null!==t&&(n[e]=t),n}function c(){var t=Array.prototype.slice.call(arguments),e="/"+t.map((function(t){return t.replace(/^\/|\/$/g,"")})).filter((function(t){return t})).join("/");return e.replace("//","/")}r.noConflict=function(){return n.uibuilder=a,r},t.exports&&(e=t.exports=r),e.uibuilder=r}).call(this)},e9ba:function(t,e,n){"use strict";n.r(e);var i=n("0986"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},ee5d:function(t,e,n){},fe07:function(t,e,n){"use strict";n("b329")}});
//# sourceMappingURL=app.7a6922af.js.map