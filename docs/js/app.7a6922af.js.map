{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/widgets/toggle.vue?4e8a","webpack:///./src/widgets/markdown.vue?6ff5","webpack:///src/widgets/markdown.vue","webpack:///./src/widgets/markdown.vue?61ef","webpack:///./src/widgets/sparkchart.vue?d44b","webpack:///./src/widgets/sparkchart.vue","webpack:///./src/widgets/stat.vue","webpack:///src/widgets/stat.vue","webpack:///./src/widgets/stat.vue?1f72","webpack:///./src/grids/fixed-grid.vue?b509","webpack:///./src/components/widget-edit.vue?e579","webpack:///./src/components/widget-wrap.vue?3e47","webpack:///src/components/widget-wrap.vue","webpack:///./src/components/widget-wrap.vue?de6c","webpack:///./src/components/widget-wrap.vue?dc94","webpack:///src/components/widget-edit.vue","webpack:///./src/components/widget-edit.vue?e620","webpack:///./src/components/widget-edit.vue?bd7a","webpack:///src/grids/fixed-grid.vue","webpack:///./src/grids/fixed-grid.vue?2394","webpack:///./src/grids/fixed-grid.vue?41e7","webpack:///./src/widgets/push-button.vue?30f5","webpack:///src/widgets/toggle.vue","webpack:///./src/widgets/toggle.vue?123a","webpack:///./src/widgets/markdown.vue?6f68","webpack:///./src/plugins/vuetify.js","webpack:///./src/dash.vue?f44c","webpack:///./src/components/uib.vue?ede7","webpack:///src/components/uib.vue","webpack:///./src/components/uib.vue?d183","webpack:///./src/components/uib.vue","webpack:///./src/components/demo.vue?58e9","webpack:///src/components/demo.vue","webpack:///./src/components/demo.vue?edd0","webpack:///./src/components/demo.vue","webpack:///src/dash.vue","webpack:///./src/dash.vue?273e","webpack:///./src/dash.vue?8b55","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/widgets/gauge.vue?9966","webpack:///./src/components/svg-gauge.vue?c34b","webpack:///src/components/svg-gauge.vue","webpack:///./src/components/svg-gauge.vue?385a","webpack:///./src/components/svg-gauge.vue","webpack:///src/widgets/gauge.vue","webpack:///./src/widgets/gauge.vue?bdc7","webpack:///./src/widgets/gauge.vue?b5df","webpack:///./src/widgets sync \\S+\\.vue$","webpack:///src/widgets/push-button.vue","webpack:///./src/widgets/push-button.vue?0a27","webpack:///./src/dash.vue?7541","webpack:///./src/widgets/time-plot.vue?3f96","webpack:///src/widgets/time-plot.vue","webpack:///./src/widgets/time-plot.vue?2205","webpack:///./src/widgets/time-plot.vue?6c1b","webpack:///./src/widgets/push-button.vue?36c8","webpack:///./src/widgets/stat.vue?ff45","webpack:///./src/components/widget-edit.vue?51e5","webpack:///./src/widgets/toggle.vue","webpack:///./src/grids sync \\S+\\.vue$","webpack:///src/widgets/sparkchart.vue","webpack:///./src/grids/fixed-grid.vue?3664","webpack:///./src/widgets/gauge.vue?58e3","webpack:///./src/grids/fixed-grid.vue?cda0","webpack:///./src/widgets/sparkchart.vue?b397","webpack:///./src/components/widget-wrap.vue?9bc6","webpack:///./src/widgets/push-button.vue?d02c","webpack:///./public/uibuilderfe.js","webpack:///./src/widgets/markdown.vue?52c7","webpack:///./src/widgets/time-plot.vue?5fff"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","tfmarkdown","md","disableHtml","document","createElement","innerText","innerHTML","replace","hc","hashcount","ttype","text","all","rows","a","split","out","cols","join","map","path","ref","RegExp","path2","render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","_v","_s","title","_e","domProps","staticRenderFns","component","VSparkline","VCardTitle","valTxt","unitTxt","class","rollerClasses","attrs","scopedSlots","_u","fn","on","_g","toggleRoll","rolledup","grid","$root","changeTitle","menu","tt","_b","assign","model","callback","$$v","add_menu","expression","_l","palette","kind","$event","addWidget","$emit","w","ix","id","edit_ix","toggleEdit","moveWidget","deleteWidget","style","edit_active","reposition","widget","suppressOutput","static","handleEdit","endEdit","adjustRows","adjustCols","prop","prop_static","$set","prop_info","icon","type","Number","hint","propVal","Boolean","Array","default","sdKeys","dynamic","color","child_props","config","tag","sendData","bindings","props","computed","watch","immediate","deep","handler","inject","methods","addDynBinding","var_name","$store","sd","self","undefined","removeWatchers","watchers","forEach","genBindings","keys","updateBindingValue","val","toLowerCase","parseFloat","JSON","parse","console","log","sendSrv","VBtn","VCard","VCardText","VIcon","components","grid_id","edit_props","cp","filter","String","includes","pi","widgetStyle","saved_widget","fromEntries","which","updateWidgetProp","dir","VBtnToggle","VChip","VCol","VCombobox","VContainer","VMenu","VRow","VSpacer","VSwitch","VTextField","VTooltip","rollupMini","rollupMaxi","widgetPalette","widget_ix","updateGrid","VList","VListItem","VListItemTitle","VSubheader","VToolbar","VToolbarTitle","enabled","on_value","off_value","show_value","label","change","ev","Vue","use","Vuetify","theme","options","variations","customProperties","themes","light","background","surface","panel","primary","primary_light","primary_dark","error","highlight","dark","sidebar","gotConfig","dash","tab_ix","tid","tabs","editMode","tab_edit","addTab","canUndo","performUndo","undo","buf","tagline","handleMsg","settings_menu","$vuetify","moveTab","deleteTab","tab","proxy","addGrid","backgroundColor","tab_id","g","grids","deleteGrid","click","handleClick","uib_started","created","deleted","mounted","start","namespace","nodered","msgCount","msg","connected","v","send","handleChange","step","phase","z","state","x2","enable","setTimeout","tick","timers","setInterval","plot","timer","dash_tabs","_sd","_config","provide","$refs","uib","topic","payload","insertData","initDash","$nextTick","$config","what","updateTab","updateDash","grid_ix","VApp","VAppBar","VAppBarNavIcon","VMain","VNavigationDrawer","VTab","VTabItem","VTabs","VTabsItems","StoreError","message","Error","walkTree","root","node","isArray","parseInt","isNaN","set","empty_tab","empty_grid","widgets","empty_widget","Store","observable","queue","at","k","unshift","pop","old","mutation","now","Date","u","qMutation","msgs","pushUndo","collection","prefix","Math","floor","random","substring","tabByID","gridByID","g00001","t00001","genId","_","cloneDeep","tabIDByIX","flat","entries","gridIDByIX","widget_id","widgetIDByIX","widgetByID","instance","loadComponentsFromDir","requireComponent","fileName","componentConfig","baseName","componentName","toLocaleUpperCase","substr","io","require","productionTip","LoadScript","loadScript","requireWidgets","requireGrids","gridPalette","vuetify","store","h","Dash","$mount","$props","txt_valign","vbox","ar","stroke_radius","base_color","stroke_width","xform","stroke_bdash","stroke_sdash","needle_start","needle_color","nform","min","max","radius","arc","stretch","frac","circumference","SvgGauge","unit","center","ctr","gauge_valign","round","webpackContext","req","webpackContextResolve","e","code","resolve","output_value","tooltip","clickEv","_m","colors","validator","_destroy","_create","chart","chart_data","setData","_transpose","ro","ResizeObserver","_onResize","observe","$el","dark_watcher","$watch","beforeDestroy","unobserve","destroy","_calcSize","width","setSize","tr","opts","series","stroke","points","fill","axes","ax","values","scales","range","line_width","bars","lineWidth","padding","autoLineWidth","height","beforeUnmount","offsetParent","clientHeight","offsetTop","clientWidth","previous_uibuilder","uibuilder","endsWith","suffix","indexOf","version","debug","moduleName","isUnminified","test","param","dummyAuth","jwt","sessionExpiry","userValidated","info","validJwt","_auth","started","uiDebug","arguments","me","setIOnamespace","ioNamespace","cookie","match","location","pathname","trim","autoSendReady","allowScript","allowStyle","removeScript","removeStyle","ctrlMsg","sentMsg","sentCtrlMsg","msgsSent","msgsReceived","msgsSentCtrl","msgsCtrl","ioConnected","serverTimeOffset","isAuthorised","authTokenExpiry","authData","ioChannels","control","client","server","retryMs","retryFactor","timerid","ioTransport","loaded","authToken","fullPath","url","httpNodeRoot","ioPath","urlJoin","stringify","emit","checkConnect","delay","factor","depth","clearTimeout","socket","close","connect","checkTimestamp","receivedMsg","serverTimestamp","offset","ioSetup","socketOptions","transports","transportOptions","polling","extraHeaders","makeMeAnObject","updateAuth","newScript","script","newStyle","receivedCtrlMsg","uibuilderCtrl","markLoggedOut","reason","warn","err","localReason","logon","api","logoff","sendAuth","msgToSend","channel","from","_socketId","onChange","events","clearEventListeners","evt","args","defer","textContent","getElementsByTagName","appendChild","showToast","vueApp","$bvToast","_uib","constructor","toastOptions","content","vNodesContent","append","appendToast","autoHideDelay","autohide","toast","showAlert","showComponentDetails","componentRef","$options","_componentTag","_propKeys","warning","reload","requestDetails","uiReturn","excluded","sendCtrl","sw","onOff","toString","_isVue","eventSend","domevent","currentTarget","target","uibDomEvent","sourceId","event","dataset","automap","addEventListener","thing","paths","noConflict"],"mappings":"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","file":"js/app.7a6922af.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/flexdash/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&scoped=true&lang=js&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./markdown.vue?vue&type=style&index=0&lang=css&\"","<!-- Markdown - Widget to display some (poor man's) Markdown, such as instructions.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n<template>\n  <div style=\"width:100%; height:100%;overflow-y:scroll;\">\n    <v-card-text v-if=\"title\" class=\"font-weight-bold px-0 pt-1 mb-n1 d-flex\">\n      <span class=\"mx-auto\">{{title}}</span>\n    </v-card-text>\n    <v-card-text v-html=\"md\" class=\"md pt-1\" style=\"width:100%\"></v-card-text>\n  </div>\n</template>\n\n<style>\n.v-card__text.md h1 { font-size: 1.375rem; font-weight: 900; margin: 12px 0px 12px; }\n.v-card__text.md h2 { font-size: 1.2rem;   font-weight: 700; margin: 12px 0px 8px; }\n.v-card__text.md h3 { font-size: 1.0rem;   font-weight: 700; margin: 12px 0px 8px; }\n.v-card__text.md h4 { font-size: 0.875rem; font-weight: 700; margin: 8px 0px 4px; }\n.v-card__text.md h5 { font-size: 0.875rem; font-weight: 500; margin: 8px 0px 4px; }\n.v-card__text.md h6 { font-size: 0.875rem; font-weight: 500; margin: 8px 0px 4px; }\n.v-card__text.md { line-height: 1.10rem; padding-top: 0px; padding-bottom: 0px; }\n</style>\n\n<script scoped>\n  module.exports = {\n    name: 'Markdown',\n\n    props: {\n      title: { default: \"Markdown\" },\n      text: { type: String, default: \"Hello World!\" },\n    },\n\n    computed: {\n      md() {\n        //console.log(\"Before:\", this.text.replace(/\\n/g, \"\\\\n\"))\n        console.log(\"After:\", tfmarkdown(this.text, true))\n        return tfmarkdown(this.text, true) },\n    },\n\n  }\n\n\nfunction tfmarkdown(md, disableHtml) {\n  if (disableHtml) {\n    var d = document.createElement('div');\n    d.innerText = md;\n    md = d.innerHTML;\n    md = md.replace(/<br>/g, '\\n');\n  }\n  \n  // Titles\n  md = md.replace(/^(#+)\\s(.*)/gm, function(all, hashcount, title){\n    var hc = hashcount.length;\n    return '<h'+hc+'>'+title+'</h'+hc+'>';\n  });\n  md = md.replace(/^(.*)\\n([=-]{2,})/gm, function(all, title, ttype){\n    var hc = ttype[0] === '=' ? '1' : '2';\n    return '<h'+hc+'>'+title+'</h'+hc+'>';\n  });\n\n  // Blockquotes and code blocks\n  md = md.replace(/^>\\s((.+\\n{0,1})+)/gm, function(all, text){\n    text = text.replace(/(\\n>\\s|\\n)/g, '<br />\\n');\n    return '<blockquote>'+text+'</blockquote>';\n  });\n  md = md.replace(/^(((\\t+|\\s{2,}).*\\n)+)/gm, function(all, text){\n    text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n    text = text.replace(/\\n/g, '<br />\\n');\n    return '<code>'+text+'</code>\\n';\n  });\n\n  // Ordered and unordered lists\n  md = md.replace(/^(\\*\\s.+\\n?)+/gm, function(all){\n    all = all.replace(/^\\*\\s(.*)\\n?/gm, '<li>$1</li>');\n    return '<ul>'+all+'</ul>';\n  });\n  md = md.replace(/^([0-9]+\\.\\s.+\\n?)+/gm, function(all){\n    all = all.replace(/^[0-9]+\\.\\s(.*)\\n?/gm, '<li>$1</li>');\n    return '<ol>'+all+'</ol>';\n  });\n\n  // Simple (non-markdown) tables\n  md = md.replace(/^(\\|.*\\n)+/gm, function(a) {\n    var rows = a.split(/\\n/g);\n    var out = ['<table>']\n    for (var i=0; i<rows.length-1; i++) {\n      out.push('<tr>');\n      var cols = rows[i].split(/\\|/g);\n      for (var j=1; j<cols.length; j++) {\n        out.push('<td>');\n        out.push(cols[j]);\n        out.push('</td>');\n      }\n      out.push('</tr>');\n    }\n    out.push('</table>\\n');\n    return out.join('');\n  });\n\n  // Paragraphs\n  //md = md.replace(/(^|\\n{2,})([^<])(.*?)([^>])($|\\n{2,})/sg, \"\\n<p>$2$3$4</p>\\n\");\n  md = md.split(/\\n{2,}/).map(txt => txt.replace(/^([^<].*[^>])$/s, \"<p>$1</p>\")).join('\\n')\n  \n  // Bold, italics and links\n  md = md.replace(/(\\*\\*|__)(.*?)(\\*\\*|__)/g, '<b>$2</b>');\n  md = md.replace(/[*_](.*?)[*_]/g, '<i>$1</i>');\n  md = md.replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\">$1</a>');\n\n  // Reference-style links\n  md = md.replace(/\\[(.*?)\\]\\s*\\[(.*?)\\]/g, function(all, text, ref) {\n    var path = '';\n    ref = ref.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    md.replace(new RegExp('\\\\['+ref+'\\\\]:\\\\s*(.*)'), function(all2, path2) {\n      path = path2;\n    });\n    return '<a href=\"'+path+'\">'+text+'</a>';\n  });\n\n  // Remove reference lines\n  md = md.replace(/\\[.*\\]:.*/g, '');\n\n  // Paragraphs -- doesn't work, puts </P. at end of first line of para\n  //md = md.replace(/(^|\\n{2,})([^<])(.*)/g, '\\n<p>$2$3</p>');\n\n  // Remove extra line breaks etc\n  md = md.replace('<code><br />', '<code>');\n\n  return md;\n}\n\n/* The above tf-markdown implementation comes from\n   https://github.com/twofront/TF-Markdown\n   and is licensed as follows:\n\nThe MIT License (MIT)\n\nCopyright (c) 2014 Two Front Productions Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\",\"overflow-y\":\"scroll\"}},[(_vm.title)?_c('v-card-text',{staticClass:\"font-weight-bold px-0 pt-1 mb-n1 d-flex\"},[_c('span',{staticClass:\"mx-auto\"},[_vm._v(_vm._s(_vm.title))])]):_vm._e(),_c('v-card-text',{staticClass:\"md pt-1\",staticStyle:{\"width\":\"100%\"},domProps:{\"innerHTML\":_vm._s(_vm.md)}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sparkchart.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sparkchart.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./sparkchart.vue?vue&type=template&id=2b08e67e&\"\nimport script from \"./sparkchart.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./sparkchart.vue?vue&type=script&scoped=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSparkline } from 'vuetify/lib/components/VSparkline';\ninstallComponents(component, {VSparkline})\n","import { render, staticRenderFns } from \"./stat.vue?vue&type=template&id=3cfaef16&\"\nimport script from \"./stat.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./stat.vue?vue&type=script&scoped=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCardTitle})\n","<!-- Stat - Simple status widget that can display a numeric or text value. An unit string can\n     optionally be appended and is rendered as a superscript.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n<template>\n  <v-card-title class=\"headline pa-0\">\n    <span class=\"ma-auto\">{{valTxt}}<span class=\"unit\">{{unitTxt}}</span></span>\n  </v-card-title>\n</template>\n\n<script scoped>\n  module.exports = {\n    name: 'Stat',\n\n    props: {\n      unit: String,\n      value: { default: null },\n    },\n\n    computed: {\n      unitTxt: function() { return this.value === \"--\" ? \"\" : this.unit; },\n      valTxt: function() {\n        if (typeof this.value == 'number') return Math.round(this.value*10.0)/10.0\n        else if (this.value === null) return \"--\";\n        else return this.value;\n      },\n    },\n\n  }\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card-title',{staticClass:\"headline pa-0\"},[_c('span',{staticClass:\"ma-auto\"},[_vm._v(_vm._s(_vm.valTxt)),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(_vm.unitTxt))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"contents\"}},[(_vm.rollupMini)?_c('div',{class:_vm.rollerClasses},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mx-auto\",attrs:{\"xsmall\":\"\",\"icon\":\"\",\"height\":\"24px\"},on:{\"click\":_vm.toggleRoll}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-\"+_vm._s(_vm.rolledup ? 'down' : 'up')+\"-drop-circle\")])],1)]}}],null,false,2194996837)},[_c('span',[_vm._v(\"Roll widgets up/down\")])])],1):_vm._e(),(_vm.rollupMaxi)?_c('v-toolbar',{staticClass:\"d-flex justify-start\",attrs:{\"dense\":\"\",\"flat\":\"\",\"height\":\"36\",\"color\":\"background\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mx-auto\",attrs:{\"xsmall\":\"\",\"icon\":\"\",\"height\":\"24px\"},on:{\"click\":_vm.toggleRoll}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-\"+_vm._s(_vm.rolledup ? 'down' : 'up')+\"-drop-circle\")])],1)]}}],null,false,2194996837)},[_c('span',[_vm._v(\"Roll widgets up/down\")])]),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.grid.title))])],1):_vm._e(),(_vm.$root.editMode)?_c('v-toolbar',{staticClass:\"editmode\",attrs:{\"dense\":\"\",\"flat\":\"\",\"color\":\"background\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mr-4\",attrs:{\"small\":\"\",\"icon\":\"\",\"color\":\"grey\"},on:{\"click\":_vm.toggleRoll}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-\"+_vm._s(_vm.rolledup ? 'down' : 'up')+\"-drop-circle\")])],1)]}}],null,false,527658409)},[_c('span',[_vm._v(\"Roll widgets up/down\")])]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({staticClass:\"mr-6 flex-grow-0\",staticStyle:{\"width\":\"20ex\"},attrs:{\"single-line\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"label\":\"title\",\"value\":_vm.grid.title},on:{\"change\":_vm.changeTitle}},on))]}}],null,false,529640478)},[_c('span',[_vm._v(\"Title to show at top of grid, if empty the grid bar is thinner\")])]),_c('div',[_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar menu = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar tt = ref.on;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"small\":\"\",\"icon\":\"\",\"color\":\"primary\"}},'v-btn',attrs,false),Object.assign({}, tt, menu)),[_c('v-icon',[_vm._v(\"mdi-card-plus\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"Add a widget to the end of the grid\")])])]}}],null,false,4148765622),model:{value:(_vm.add_menu),callback:function ($$v) {_vm.add_menu=$$v},expression:\"add_menu\"}},[_c('v-list',[_c('v-subheader',[_vm._v(\"Add Widget to the end of the grid\")]),_vm._l((_vm.palette()),function(kind){return _c('v-list-item',{key:kind,on:{\"click\":function($event){return _vm.addWidget(kind)}}},[_c('v-list-item-title',[_vm._v(_vm._s(kind))])],1)})],2)],1)],1),_c('v-spacer'),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mc-auto\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.$emit('delete')}}},on),[_vm._v(\" Delete grid \")])]}}],null,false,1535469378)},[_c('span',[_vm._v(\"Delete this grid and all its widgets\")])])],1):_vm._e(),(!_vm.rolledup)?_c('v-container',{staticClass:\"g-grid-small pt-0\",attrs:{\"fluid\":\"\"}},_vm._l((_vm.grid.widgets),function(w,ix){return _c('widget-edit',{key:w,attrs:{\"id\":w,\"grid_id\":_vm.id,\"edit_active\":ix == _vm.edit_ix},on:{\"edit\":function($event){return _vm.toggleEdit(ix, $event)},\"move\":function($event){return _vm.moveWidget(ix, $event)},\"delete\":function($event){return _vm.deleteWidget(ix)}}})}),1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:(_vm.widgetStyle)},[_c('v-menu',{attrs:{\"value\":_vm.edit_active && _vm.reposition,\"offset-y\":\"\",\"allow-overflow\":\"\",\"min-width\":\"80%\",\"content-class\":\"popup-spacer\",\"close-on-content-click\":false,\"close-on-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(on){return [_c('widget-wrap',{attrs:{\"config\":_vm.widget,\"suppressOutput\":_vm.suppressOutput,\"color\":_vm.edit_active?'highlight':'',\"not-used\":on},on:{\"edit\":_vm.toggleEdit}})]}}])},[_c('v-card',{attrs:{\"color\":\"panel\"}},[_c('v-card-title',{staticClass:\"d-flex align-baseline\"},[_c('span',[_vm._v(\"Edit \"+_vm._s(_vm.widget.kind)+\" widget\")]),_c('v-text-field',{staticClass:\"ml-3 mt-0 text-h6 flex-grow-0\",attrs:{\"dense\":\"\",\"value\":_vm.widget.static['title'],\"hide-details\":true},on:{\"input\":function($event){return _vm.handleEdit('static', 'title', $event)}}}),_c('v-spacer'),_c('v-btn',{attrs:{\"elevation\":\"0\",\"icon\":\"\"},on:{\"click\":_vm.endEdit}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),(_vm.edit_active)?_c('v-card-text',[_c('v-container',{staticClass:\"pa-0 pt-4\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"6\",\"sm\":\"4\"}},[_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.$emit('delete')}}},[_vm._v(\"Delete widget\")])],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"6\",\"sm\":\"2\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"ml-2\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.moveWidget(-1)}}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-up-bold\")])],1)]}}],null,false,4110266859)},[_c('span',[_vm._v(\"Move widget towards the top-left of the grid\")])]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.moveWidget(1)}}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-down-bold\")])],1)]}}],null,false,171324591)},[_c('span',[_vm._v(\"Move widget towards the bottom-right of the grid\")])])],1),_c('v-col',{staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.adjustRows(-1)}}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1),_c('v-chip',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.widget.rows)+\" row\"+_vm._s(_vm.widget.rows > 1?'s':''))]),_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.adjustRows(1)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.adjustCols(-1)}}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1),_c('v-chip',{attrs:{\"small\":\"\"}},[_vm._v(_vm._s(_vm.widget.cols)+\" col\"+_vm._s(_vm.widget.cols > 1 ? 's' : ''))]),_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.adjustCols(1)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1)],1),_c('v-row',{attrs:{\"align\":\"center\"}},_vm._l((_vm.edit_props),function(prop){return _c('v-col',{key:prop,staticClass:\"d-flex\",attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn-toggle',{staticClass:\"mt-2 mr-1\",attrs:{\"mandatory\":\"\",\"dense\":\"\",\"background-color\":\"rgba(0,0,0,0)\",\"color\":\"primary\"},model:{value:(_vm.prop_static[prop]),callback:function ($$v) {_vm.$set(_vm.prop_static, prop, $$v)},expression:\"prop_static[prop]\"}},[_c('v-btn',_vm._g(_vm._b({attrs:{\"x-small\":\"\",\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-link-variant\")])],1),_c('v-btn',_vm._g(_vm._b({attrs:{\"x-small\":\"\",\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(_vm._s(_vm.prop_info[prop].icon))])],1)],1)]}}],null,true)},[_c('span',[_vm._v(\"Toggle dynamic link vs. literal value\")])]),(!_vm.prop_static[prop])?_c('v-combobox',{attrs:{\"label\":prop,\"clearable\":\"\",\"dense\":\"\",\"persistent-hint\":\"\",\"hint\":\"variable pathname (/-sep)\",\"items\":_vm.sdKeys,\"value\":_vm.widget.dynamic[prop]},on:{\"input\":function($event){return _vm.handleEdit('dynamic', prop, $event)}}}):(_vm.prop_info[prop].type === Number)?_c('v-text-field',{attrs:{\"label\":prop,\"type\":\"number\",\"dense\":\"\",\"hint\":_vm.prop_info[prop].hint,\"value\":_vm.propVal(prop)},on:{\"input\":function($event){return _vm.handleEdit('static', prop, $event)}}}):(_vm.prop_info[prop].type === Boolean)?_c('v-switch',{staticClass:\"mt-0 ml-2\",attrs:{\"label\":prop,\"hint\":_vm.prop_info[prop].hint,\"input-value\":_vm.propVal(prop)},on:{\"change\":function($event){return _vm.handleEdit('static', prop, $event)}}}):(_vm.prop_info[prop].type === Array)?_c('v-text-field',{attrs:{\"label\":prop,\"dense\":\"\",\"value\":_vm.widget.static[prop]||_vm.prop_info[prop].default},on:{\"input\":function($event){return _vm.handleEdit('static', prop, $event)}}}):(_vm.prop_info[prop].type === Object)?_c('v-text-field',{attrs:{\"label\":prop,\"dense\":\"\",\"hint\":_vm.prop_info[prop].hint,\"value\":_vm.widget.static[prop]||_vm.prop_info[prop].default},on:{\"input\":function($event){return _vm.handleEdit('static', prop, $event)}}}):_c('v-text-field',{attrs:{\"label\":prop,\"dense\":\"\",\"hint\":_vm.prop_info[prop].hint,\"value\":_vm.widget.static[prop]||_vm.prop_info[prop].default},on:{\"input\":function($event){return _vm.handleEdit('static', prop, $event)}}})],1)}),1)],1)],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"color\":_vm.color}},[(!('title' in _vm.child_props))?_c('v-card-text',{staticClass:\"d-flex pa-0 pt-1 mb-n1\"},[(_vm.title)?_c('span',{staticClass:\"mx-auto\"},[_vm._v(_vm._s(_vm.title))]):_vm._e(),(_vm.$root.editMode)?_c('v-btn',{staticClass:\"justify-end align-start mt-n1\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":_vm.handleEdit}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-pencil\")])],1):_vm._e()],1):(_vm.$root.editMode)?_c('div',{attrs:{\"display:content\":\"\"}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"z-index\":\"5\",\"right\":\"0\",\"top\":\"0.5ex\"}},[_c('v-btn',{staticClass:\"justify-end align-start mt-n1\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":_vm.handleEdit}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-pencil\")])],1)],1)]):_vm._e(),_c(_vm.config.kind,_vm._b({ref:\"comp\",tag:\"component\",on:{\"send\":function($event){return _vm.sendData($event)}}},'component',_vm.bindings,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Widget - Wrapper around actual widget components providing bindings to server data.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n\n     The Widget gets passed in a configuration, which tells it which actual component to instatiate\n     and to which server data variables each of the component's props need to be bound. The Widget\n     then draws a v-card with a title and places the component inside.\n-->\n\n<template>\n  <v-card :color=\"color\">\n\n    <!-- Widget title & buttons shown when the child component does _not_ show the title -->\n    <v-card-text v-if=\"!('title' in child_props)\" class=\"d-flex pa-0 pt-1 mb-n1\">\n      <!-- title and edit button -->\n      <span v-if=\"title\" class=\"mx-auto\">{{title}}</span>\n      <v-btn small icon class=\"justify-end align-start mt-n1\" v-if=\"$root.editMode\"\n             @click=\"handleEdit\">\n        <v-icon small>mdi-pencil</v-icon>\n      </v-btn>\n    </v-card-text>\n\n    <!-- Widget edit button w/o title when the child component shows the title itself -->\n    <div display:content v-else-if=\"$root.editMode\">\n      <!-- we need to make sure we're floating way above the widget content... -->\n      <div style=\"position:absolute; z-index:5; right:0; top:0.5ex;\">\n        <v-btn small icon class=\"justify-end align-start mt-n1\" @click=\"handleEdit\">\n          <v-icon small>mdi-pencil</v-icon>\n        </v-btn>\n      </div>\n    </div>\n\n    <!-- actual component, pass in its bindings -->\n    <component :is=\"config.kind\" v-bind=\"bindings\" ref=\"comp\" @send=\"sendData($event)\">\n    </component>\n  </v-card>\n</template>\n\n<script scoped>\n\nexport default {\n  name: 'WidgetWrap',\n\n  props: {\n    suppressOutput: { type: Boolean, default: true }, // suppress child output reaching store.sd\n    color: { type: String, default: undefined }, // background color to highlight the card\n\n    // config specifies how each prop of the inner component gets set. It has \"static bindings\"\n    // to literal values and it has \"dynamic bindings\" to server data fields, i.e. to\n    // store.sd[some_var] (some_var can actually be a path so it's not quite as simple).\n    // { kind, id, rows, cols, static, dynamic } (rows & cols are managed by the grid)\n    // TODO: should sanity-check the config and show a broken-widget widget if it's not OK\n    config: { type: Object, required: true },\n  },\n\n  data() { return {\n    watchers: [], // list of watchers used in bindings so we can remove them\n    bindings: {}, // mapping of prop_name -> current_value used in v-bind to child\n  }},\n\n  computed: {\n    // title shown by widget wrapper\n    title() { return this.bindings.title || \"--\" },\n\n    // child_props holds a description of the properties of the child component, this is used to\n    // convert types and raise warning messages. (Note that this is not reactive in the component\n    // definition.)\n    child_props() {\n      const p = window.widgetPalette\n      if (this.config.kind in p) return p[this.config.kind].props || {}\n      return {}\n    },\n  },\n\n  watch: {\n    // Generate bindings from store.sd[some_var] -> this.bindings\n    // This is how data flows from the server data to the inner component.\n    // It would be nice if we could make this.bindings computed properties but this is not\n    // possible because we have to update this.watchers as a side-effect.\n    config: {\n      immediate: true,\n      deep: true,\n      handler(config) { this.genBindings(config) },\n    },\n  },\n\n  inject: [ 'sendSrv', '$store' ],\n\n  methods: {\n    // addDynBinding adds a dynamic binding of store.sd[var_name] -> bindings[key]\n    // TODO: perform type conversion and precision adjustment when assigning\n    addDynBinding(key, var_name) {\n      const self = this\n      if (!(var_name in this.$store.sd)) {\n        // in vue2 we can't add a watcher to something that doesn't exist\n        // so we create it as undefined and handle that properly when we eventually insert\n        // something *it's a hack*\n        self.$set(this.$store.sd, var_name, undefined)\n      }\n      const w = this.$watch(\n          () => self.$store.sd[var_name],\n          (newVal) => { self.updateBindingValue(key, newVal) },\n          {deep: true, immediate: true})\n      return w\n    },\n\n    removeWatchers() {\n      this.watchers.forEach(w => {w()})\n      this.watchers.length = 0\n    },\n\n    // Generate bindings from store.sd -> bindings according to config. Collect watchers created.\n    genBindings(config) {\n      //console.log(\"Generating bindings, config:\", config)\n      this.removeWatchers()\n      // generate bindings, dynamic overrides static\n      this.bindings = {}\n      if (config) {\n        Object.keys(config.static||{}).forEach(p => {\n          if (config.static[p] !== undefined)\n            this.$set(this.bindings, p, config.static[p])\n        })\n        Object.keys(config.dynamic||{}).forEach(p => {\n          if (config.dynamic[p] !== undefined)\n            this.watchers.push( this.addDynBinding(p, config.dynamic[p]) )\n        })\n      }\n    },\n\n    // Update the value of a dynamic binding, perform some type conversion in the process\n    // so we match the type declaration.\n    // FIXME: need to have some warning show up in UI if the validation will fail 'cause otherwise\n    // it's very difficult to locate such issues\n    updateBindingValue(prop, val) {\n      if (!(prop in this.child_props)) {\n        console.log(`Warning: updating value for ${prop}, but ${this.config.kind} has no ${prop}:`,\n          JSON.stringify(this.child_props))\n        return\n      }\n      let type = this.child_props[prop].type // note: may be undefined...\n\n      if (type === Boolean) {\n        if (typeof val === 'number') {\n          val = !!val\n        } else if (typeof val === 'string') {\n          val = val.toLowerCase()\n          val = ['true','ok','1','yes'].includes(val)\n        } else if (typeof val !== 'boolean') {\n          val = undefined\n        }\n\n      } else if (type === Number) {\n        if (typeof val === 'string') val = parseFloat(val)\n        else if (typeof val === 'boolean') val = val ? 1 : 0\n        else if (typeof val !== 'number') val = undefined\n        if (val !== undefined)\n          val = Number.parseFloat(val.toPrecision(4)) // FIXME: let the user specify precision\n\n      } else if (type === String) {\n        if (typeof val === Number) val = val.toString()\n        else if (typeof val !== String) val = JSON.stringify(val)\n\n      } else if ((type === Array || type === Object) && typeof val === 'string') {\n        try {\n          val = JSON.parse(val)\n        } catch (exc) {\n          val = undefined\n          // FIXME: should have a warning show in the UI while in edit mode\n          console.log(`Cannot convert string value for ${prop} to ${type.name}`)\n        }\n      }\n\n      //console.log(`Updating ${this.config.kind}.${prop} as ${type&&type.name}`,\n      //    `with ${typeof val} ${val}`)\n\n      this.$set(this.bindings, prop, val)\n    },\n\n    handleEdit() { console.log(`handleEdit() in widget-wrap`); this.$emit('edit', 'toggle') },\n\n    sendData(data) {\n      const o = this.config.output\n      if (!this.suppressOutput && o) {\n        console.log(`Widget ${this.config.kind}[${this.config.id}] sending ${o} <-`, data)\n        this.sendSrv(o, data)\n      } else {\n        console.log(`Output of widget ${this.config.kind}[${this.config.id}] suppressed`)\n      }\n    },\n  },\n\n}\n\n</script>\n\n<style scoped>\n.v-card { height: 100%; width: 100% }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-wrap.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-wrap.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./widget-wrap.vue?vue&type=template&id=647c50c6&scoped=true&\"\nimport script from \"./widget-wrap.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./widget-wrap.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./widget-wrap.vue?vue&type=style&index=0&id=647c50c6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"647c50c6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCard,VCardText,VIcon})\n","<!-- WidgetEdit - Wrapper around actual widget components providing editing functionality for\n     modifying the bindings.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n\n     WidgetEdit provides a floating card extension with controls to edit the widget's bindings.\n     The set of available properties are detected by inspecting the component, specifically,\n     the definition of its props.\n\n     Currently editing is a bit spread out over the grid, widget-wrapper and this component.\n     The widget-wrapper has the edit button and the grid has the ultimate control.\n\n     FIXME: This component should be refactored. Each type of input should become its own\n     component that gets plopped down into the grid and fed its specific config as a model.\n     This way the long validation and type switcharoo gets broken up. Maybe in the end the two\n     widget-xxx components can be merged again... All this would also allow the editing components\n     to be reused in other parts of the dashboard.\n-->\n\n<template>\n  <!-- without div the v-for in parent gets confused by v-menu -->\n  <div :style=\"widgetStyle\">\n    <!-- v-menu is used to display a floating v-card below the component for editing\n         We control the activation and deactivation of the menu ourselves, though. -->\n    <v-menu :value=\"edit_active && reposition\" offset-y allow-overflow min-width=\"80%\"\n            content-class=\"popup-spacer\"\n            :close-on-content-click=\"false\" :close-on-click=\"false\">\n\n      <!-- Widget proper -->\n      <template v-slot:activator=\"on\">\n        <widget-wrap :config=\"widget\" :suppressOutput=\"suppressOutput\" @edit=\"toggleEdit\"\n                     :color=\"edit_active?'highlight':''\" :not-used=\"on\">\n        </widget-wrap>\n      </template>\n\n      <!-- Editing panel shown floating below widget -->\n      <v-card color=\"panel\">\n        <v-card-title class=\"d-flex align-baseline\">\n          <span>Edit {{widget.kind}} widget</span>\n          <v-text-field dense class=\"ml-3 mt-0 text-h6 flex-grow-0\"\n                        :value=\"widget.static['title']\" :hide-details=\"true\"\n                        @input=\"handleEdit('static', 'title', $event)\">\n          </v-text-field>\n          <v-spacer></v-spacer>\n          <v-btn elevation=0 icon @click=\"endEdit\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-card-title>\n\n        <v-card-text v-if=\"edit_active\"><!-- v-if 'cause edited_xx vars not always set -->\n          <v-container fluid class=\"pa-0 pt-4\">\n            <!-- Display row with delete button, move buttons, and resize controls -->\n            <v-row align=\"center\">\n              <v-col class=\"d-flex\" cols=\"6\" sm=\"4\">\n                <!-- delete widget -->\n                <v-btn small @click=\"$emit('delete')\">Delete widget</v-btn>\n              </v-col>\n              <v-col class=\"d-flex\" cols=\"6\" sm=\"2\">\n                <!-- move widget up/down -->\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn small icon @click=\"moveWidget(-1)\" class=\"ml-2\" v-on=\"on\">\n                      <v-icon>mdi-arrow-up-bold</v-icon></v-btn>\n                  </template>\n                  <span>Move widget towards the top-left of the grid</span>\n                </v-tooltip>\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn small icon @click=\"moveWidget(1)\" v-on=\"on\">\n                      <v-icon>mdi-arrow-down-bold</v-icon></v-btn>\n                  </template>\n                  <span>Move widget towards the bottom-right of the grid</span>\n                </v-tooltip>\n              </v-col>\n              <v-col class=\"d-flex\" cols=\"12\" sm=\"6\" md=\"4\">\n                <!-- adjust widget rows -->\n                <v-btn small icon @click=\"adjustRows(-1)\" class=\"ml-2\">\n                  <v-icon>mdi-minus</v-icon></v-btn>\n                <v-chip small>{{widget.rows}} row{{widget.rows > 1?'s':''}}</v-chip>\n                <v-btn small icon @click=\"adjustRows(1)\">\n                  <v-icon>mdi-plus</v-icon></v-btn>\n                <!-- adjust widget columns -->\n                <v-btn small icon @click=\"adjustCols(-1)\" class=\"ml-2\">\n                  <v-icon>mdi-minus</v-icon></v-btn>\n                <v-chip small>{{widget.cols}} col{{widget.cols > 1 ? 's' : ''}}</v-chip>\n                <v-btn small icon @click=\"adjustCols(1)\">\n                  <v-icon>mdi-plus</v-icon></v-btn>\n              </v-col>\n            </v-row>\n\n            <!-- Display component properties for editing -->\n            <v-row align=\"center\">\n              <!-- For each property of the component, show a combobox to select what gets bound -->\n              <v-col class=\"d-flex\" cols=\"12\" sm=\"6\" md=\"4\" v-for=\"prop in edit_props\" :key=prop>\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn-toggle mandatory dense v-model=\"prop_static[prop]\" class=\"mt-2 mr-1\"\n                                  background-color=\"rgba(0,0,0,0)\" color=\"primary\">\n                      <v-btn x-small icon v-bind=\"attrs\" v-on=\"on\">\n                        <v-icon>mdi-link-variant</v-icon></v-btn>\n                      <v-btn x-small icon v-bind=\"attrs\" v-on=\"on\">\n                        <v-icon>{{prop_info[prop].icon}}</v-icon></v-btn>\n                    </v-btn-toggle>\n                  </template>\n                  <span>Toggle dynamic link vs. literal value</span>\n                </v-tooltip>\n                <!-- dynamic link -->\n                <v-combobox v-if=\"!prop_static[prop]\"\n                    :label=\"prop\" clearable dense persistent-hint\n                    hint='variable pathname (/-sep)'\n                    :items=\"sdKeys\"\n                    :value=\"widget.dynamic[prop]\"\n                    @input=\"handleEdit('dynamic', prop, $event)\">\n                </v-combobox>\n                <!-- number -->\n                <v-text-field v-else-if=\"prop_info[prop].type === Number\"\n                    :label=\"prop\" type=\"number\" dense\n                    :hint=\"prop_info[prop].hint\"\n                    :value=\"propVal(prop)\"\n                    @input=\"handleEdit('static', prop, $event)\">\n                </v-text-field>\n                <!-- boolean -->\n                <v-switch v-else-if=\"prop_info[prop].type === Boolean\"\n                    :label=\"prop\" class=\"mt-0 ml-2\"\n                    :hint=\"prop_info[prop].hint\"\n                    :input-value=\"propVal(prop)\"\n                    @change=\"handleEdit('static', prop, $event)\">\n                </v-switch>\n                <!-- array -->\n                <v-text-field v-else-if=\"prop_info[prop].type === Array\"\n                    :label=\"prop\" dense\n                    :value=\"widget.static[prop]||prop_info[prop].default\"\n                    @input=\"handleEdit('static', prop, $event)\">\n                </v-text-field>\n                <!-- object -->\n                <v-text-field v-else-if=\"prop_info[prop].type === Object\"\n                    :label=\"prop\" dense\n                    :hint=\"prop_info[prop].hint\"\n                    :value=\"widget.static[prop]||prop_info[prop].default\"\n                    @input=\"handleEdit('static', prop, $event)\">\n                </v-text-field>\n                <!-- string -->\n                <v-text-field v-else\n                    :label=\"prop\" dense\n                    :hint=\"prop_info[prop].hint\"\n                    :value=\"widget.static[prop]||prop_info[prop].default\"\n                    @input=\"handleEdit('static', prop, $event)\">\n                </v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n      </v-card>\n\n    </v-menu>\n  </div>\n</template>\n\n<script scoped>\n\nimport WidgetWrap from '@/components/widget-wrap'\n\nexport default {\n  name: 'WidgetEdit',\n\n  components: { WidgetWrap },\n  inject: [ '$store' ],\n\n  props: {\n    id: { type: String, required: true }, // my widget ID\n    grid_id: { type: String, require: true }, // the grid this widget is in\n    edit_active: { type: Boolean, default: false }, // we're being edited\n  },\n\n  data() { return {\n    suppressOutput: true,\n    prop_static: {}, // manual toggle between static and dynamic binding\n    saved_widget: null, // widget props for revert function\n    // hack to reposition the edit window when changing widget shape/position, this will go\n    // away once we have dragging...\n    reposition: true,\n  }},\n\n  computed: {\n    // this widget's configuration\n    widget() { return this.$store.widgetByID(this.id) },\n\n    // list of keys from store.sd to show in editing combobox\n    sdKeys() { return Object.keys(this.$store.sd).sort() },\n\n    // list of child prop names for editing, excluding title\n    edit_props() {\n      const cp = Object.keys(this.child_props)\n      return cp.filter(p => p !== 'title').sort()\n    },\n\n    // collect info for all the properties via introspection and massage\n    // returns {name:{type, default, validator, hint, icon},...}\n    // prop types: String, Number, Boolean, Array, Object, Date //, Function, Symbol\n    prop_info() {\n      const icons = { String: 'mdi-format-quote-close', Number: 'mdi-numeric',\n          Boolean: 'mdi-yin-yang', Array: \"mdi-code-brackets\", Object: \"mdi-code-braces\" }\n      let pi = {}\n      const cp = this.child_props\n      for (let name in cp) {\n        let type = cp[name].type || String\n        if (![String, Number, Boolean, Array, Object].includes(type)) type = String\n        let hint = type.name\n        if (cp[name].default !== undefined) hint += `, default: ${cp[name].default}`\n        let icon = icons[type.name]\n        pi[name] = {type, default: cp[name].default, validator: cp[name].validator,\n                    hint, icon}\n      }\n      return pi\n    },\n\n    // child_props holds a description of the properties of the child component, this is used to\n    // convert types and raise warning messages. (Note that this is not reactive in the component\n    // definition.)\n    child_props() {\n      const p = window.widgetPalette\n      if (this.widget.kind in p) return p[this.widget.kind].props || {}\n      return {}\n    },\n\n    // style attribute for widget to determine size\n    widgetStyle() {\n      // note: if rows/cols don't exist when the widget is created the widgetStyle will not\n      // recompute in Vue2\n      const row = `grid-row-start: span ${this.widget.rows||1}`\n      const col = `grid-column-start: span ${this.widget.cols||1}`\n      return `${row}; ${col};`\n    },\n\n  },\n\n  watch: {\n    edit_active(val) {\n      if (val) {\n        this.saved_widget = this.widget\n        // set the dynamic/static toggles according to what's in the config.\n        // Afterwards they're controlled by the user.\n        let self = this\n        this.prop_static = Object.fromEntries(\n          // if prop in config.dynamic then 0 (not static) else 1 (static)\n          Object.keys(self.child_props).map(p => [p, 1 - (p in self.widget.dynamic)])\n        )\n      } else {\n        this.saved_widget = null\n      }\n    }\n  },\n\n  methods: {\n    // value of a property: either config if set, else default\n    propVal(prop) {\n      if (this.widget.static[prop] !== undefined) return this.widget.static[prop]\n      else return this.prop_info[prop].default\n    },\n\n    // toggle edit handles the edit event from the child component\n    toggleEdit() { this.$emit('edit', !this.edit_active) },\n    // cancel button in edit panel\n    endEdit() { this.$emit('edit', false) },\n\n    handleEdit(which, prop, value) {\n      //console.log(\"edit:\", which, prop, value)\n      if (!(which in this.widget)) return\n\n      if (prop != 'title') {\n        if (!(prop in this.child_props)) return\n\n        // handle Number coming in as String\n        if (this.child_props[prop].type === Number && typeof value === 'string') {\n          value = Number.parseFloat(value)\n        }\n      }\n\n      this.$store.updateWidgetProp(this.id, which, prop, value)\n    },\n\n    // adjust number of rows spanned by widget (dir=-1/+1)\n    adjustRows(dir) {\n      const w = this.widget\n      w.rows = (w.rows||1) + dir\n      if (w.rows < 1) w.rows = 1\n      if (w.rows > 16) w.rows = 16\n      // reposition the edit window\n      this.reposition = false; this.$nextTick(() => {this.reposition = true})\n    },\n\n    // adjust number of cols spanned by widget (dir=-1/+1)\n    adjustCols(dir) {\n      const w = this.widget\n      w.cols = (w.cols||1) + dir\n      if (w.cols < 1) w.cols = 1\n      if (w.cols > 16) w.cols = 16\n      this.reposition = false; this.$nextTick(() => {this.reposition = true})\n    },\n\n    moveWidget(dir) {\n      this.$emit('move', dir)\n      this.reposition = false; this.$nextTick(() => {this.reposition = true})\n    },\n\n  },\n\n}\n\n</script>\n\n<style scoped>\n.popup-spacer { margin-top: 3px; margin-bottom: 3px; }\n.v-input__append-outer { margin-left: 0px !important; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-edit.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-edit.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./widget-edit.vue?vue&type=template&id=f8f39ca8&scoped=true&\"\nimport script from \"./widget-edit.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./widget-edit.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./widget-edit.vue?vue&type=style&index=0&id=f8f39ca8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8f39ca8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VBtnToggle,VCard,VCardText,VCardTitle,VChip,VCol,VCombobox,VContainer,VIcon,VMenu,VRow,VSpacer,VSwitch,VTextField,VTooltip})\n","<!-- Grid - Container to manage a grid of widgets dynamically placed on the page.\n     Handles the layout of the widgets as well as the editing mode.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <div style=\"display: contents;\">\n\n    <!-- Hacky roll-up/roll-down icon at the top-center of the grid if there's no title -->\n    <div v-if=\"rollupMini\" :class=\"rollerClasses\">\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on }\">\n          <v-btn xsmall icon height=\"24px\" class=\"mx-auto\" @click=\"toggleRoll\" v-on=\"on\">\n            <v-icon>mdi-arrow-{{rolledup ? 'down' : 'up'}}-drop-circle</v-icon>\n          </v-btn>\n        </template>\n        <span>Roll widgets up/down</span>\n      </v-tooltip>\n    </div>\n\n    <!-- Normal-mode title bar, when we have a title -->\n    <v-toolbar dense flat v-if=\"rollupMaxi\" height=36 color=\"background\"\n               class=\"d-flex justify-start\">\n      <!-- roll-up/down button -->\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on }\">\n          <v-btn xsmall icon height=\"24px\" class=\"mx-auto\" @click=\"toggleRoll\" v-on=\"on\">\n            <v-icon>mdi-arrow-{{rolledup ? 'down' : 'up'}}-drop-circle</v-icon>\n          </v-btn>\n        </template>\n        <span>Roll widgets up/down</span>\n      </v-tooltip>\n      <!-- grid title -->\n      <v-toolbar-title>{{grid.title}}</v-toolbar-title>\n    </v-toolbar>\n\n    <!-- Editing toolbar above grid proper -->\n    <v-toolbar v-if=\"$root.editMode\" dense flat color=\"background\" class=\"editmode\">\n      <!-- roll-up/down button -->\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on }\">\n          <v-btn small icon color=\"grey\" @click=\"toggleRoll\" class=\"mr-4\" v-on=\"on\">\n            <v-icon>mdi-arrow-{{rolledup ? 'down' : 'up'}}-drop-circle</v-icon>\n          </v-btn>\n        </template>\n        <span>Roll widgets up/down</span>\n      </v-tooltip>\n\n      <!-- grid title text field -->\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field single-line dense hide-details label=\"title\" class=\"mr-6 flex-grow-0\"\n                        v-on=\"on\" :value=\"grid.title\" @change=\"changeTitle\" style=\"width: 20ex\">\n          </v-text-field>\n        </template>\n        <span>Title to show at top of grid, if empty the grid bar is thinner</span>\n      </v-tooltip>\n\n      <!-- Menu to add widget -->\n      <div>\n        <v-menu offset-y v-model=\"add_menu\">\n          <!-- Menu activator, i.e. the button -->\n          <template v-slot:activator=\"{ on:menu, attrs }\">\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on:tt }\">\n                <v-btn small icon color=\"primary\" v-bind=\"attrs\" v-on=\"{...tt, ...menu}\">\n                  <v-icon>mdi-card-plus</v-icon>\n                </v-btn>\n              </template>\n              <span>Add a widget to the end of the grid</span>\n            </v-tooltip>\n          </template>\n          <!-- Menu content -->\n          <v-list>\n            <v-subheader>Add Widget to the end of the grid</v-subheader>\n            <v-list-item v-for=\"kind in palette()\" :key=\"kind\"\n                         @click=\"addWidget(kind)\">\n              <v-list-item-title>{{kind}}</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-menu>\n      </div>\n\n      <v-spacer></v-spacer>\n      <!-- Button to delete the grid -->\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on }\">\n          <v-btn small @click=\"$emit('delete')\" class=\"mc-auto\" v-on=\"on\">\n            Delete grid\n          </v-btn>\n        </template>\n        <span>Delete this grid and all its widgets</span>\n      </v-tooltip>\n\n    </v-toolbar>\n\n    <!-- Grid of widgets -->\n    <v-container fluid v-if=\"!rolledup\" class=\"g-grid-small pt-0\">\n      <widget-edit v-for=\"(w,ix) in grid.widgets\" :key=\"w\" :id=\"w\" :grid_id=\"id\"\n                   :edit_active=\"ix == edit_ix\" @edit=\"toggleEdit(ix, $event)\"\n                   @move=\"moveWidget(ix, $event)\" @delete=\"deleteWidget(ix)\">\n      </widget-edit>\n    </v-container>\n  </div>\n</template>\n\n<script scoped>\n\nimport WidgetEdit from '@/components/widget-edit'\n\nexport default {\n  name: 'FixedGrid',\n\n  components: { WidgetEdit },\n  inject: [ '$store', '$config' ],\n\n  props: {\n    id: { type: String }, // this grid's ID\n  },\n\n  data() { return {\n    add_menu: null, // true while adding widget menu is shown\n    edit_ix: null, // widget being edited\n    rolledup: false, // whether grid is rolled-up\n  }},\n\n  computed: {\n    // grid config: {id, kind, icon, widgets}\n    grid() { return this.$store.gridByID(this.id) },\n    rollupMini() { return !this.$root.editMode && !this.grid.title },\n    rollupMaxi() { return !this.$root.editMode &&  this.grid.title },\n    rollerClasses() { // classes for mini roll-up div\n      const rm = this.grid.widgets.length>0 &&  !this.rolledup && 'roller__minimal'\n      return [ 'd-flex', 'roller', rm ]\n    },\n  },\n\n  methods: {\n    // palette returns the list of available widgets for the add-widget drop-down\n    palette() {\n      console.log(\"Palette:\", window.widgetPalette);\n      return Object.keys(window.widgetPalette)\n    },\n\n    toggleEdit(ix, on) { this.edit_ix = on ? ix : null },\n\n    addWidget(kind) {\n      const widget_ix = this.$store.addWidget(this.id, kind)\n      this.edit_ix = widget_ix // start editing the new widget\n    },\n\n    // handle widget delete event coming up from widget-edit\n    deleteWidget(ix) {\n      this.$store.deleteWidget(this.id, ix)\n      this.endEdit()\n    },\n\n    // move a widget up/down (dir=-1/1)\n    moveWidget(ix, dir) {\n      console.log(`Moving widget #${ix} by ${dir}`)\n      if (!(ix+dir >= 0 && ix+dir < this.grid.widgets.length)) return\n      let ww = [ ...this.grid.widgets ] // clone\n      let w = ww[ix]; ww[ix] = ww[ix+dir]; ww[ix+dir] = w // swap\n      this.$store.updateGrid(this.id, { widgets: ww })\n      this.edit_ix += dir\n    },\n\n    toggleRoll() { this.rolledup = !this.rolledup },\n    changeTitle(ev) { this.$store.updateGrid(this.id, { title: ev }) },\n\n  },\n\n}\n\n</script>\n\n<style scoped>\n\n/* style for button groups in the edit toolbar */\n.v-toolbar__content div { margin-right: 4ex; }\n\n/* style for roll-up/roll-down bar when there's no toolbar */\n.roller { width: 100% }\n.roller.roller__minimal { height: 22px; }\n\n/* style to make grid happen */\n.g-grid-large {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(18em, 1fr));\n  gap: 0.5em;\n  grid-auto-flow: dense;\n}\n.g-grid-small {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(7em, 1fr));\n  grid-auto-rows: 4.5em;\n  gap: 0.5em;\n  grid-auto-flow: dense;\n}\n.g-grid-margin { margin: 0.5em; }\n\n</style>\n<style>\n.editmode.theme--light .v-toolbar__content { border-top: 1px solid #e0e0e0; }\n.editmode.theme--dark .v-toolbar__content { border-top: 1px solid #111; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fixed-grid.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fixed-grid.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./fixed-grid.vue?vue&type=template&id=75d0743c&scoped=true&\"\nimport script from \"./fixed-grid.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./fixed-grid.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./fixed-grid.vue?vue&type=style&index=0&id=75d0743c&scoped=true&lang=css&\"\nimport style1 from \"./fixed-grid.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75d0743c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VContainer,VIcon,VList,VListItem,VListItemTitle,VMenu,VSpacer,VSubheader,VTextField,VToolbar,VToolbarTitle,VTooltip})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./push-button.vue?vue&type=style&index=0&id=68ce9d17&scoped=true&lang=css&\"","<!-- Toggle - Simple switch/toggle widget that can show the state of a toggle and/or let\n     the user change a value.\n     Note that this is called toggle instead of switch 'cause switch is an html element\n     and causes a conflict.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n<template>\n  <div class=\"d-flex\">\n    <v-switch class=\"ma-auto\" v-bind=\"bindings\" @change=\"change($event)\"></v-switch>\n  </div>\n</template>\n\n<script scoped>\nmodule.exports = {\n  name: 'Toggle',\n\n  props: {\n    value: { default: 0 },\n    enabled: { default: true },\n    color: { default: \"primary\" },\n    on_value: { default: true },\n    off_value: { default: false },\n    show_value: { default: true },\n  },\n\n  data() { return {\n    val: 0,  // current value being displayed, separate from this.value to avoid mutating prop\n  }},\n\n  computed: {\n    // actual bindings passed into v-switch, these are a bit of a massage of the props\n    // 'cause of name changes and some heuristics\n    bindings() { return {\n      value: this.val,\n      disabled: !this.enabled,\n      color: this.color,\n      trueValue: this.on_value,\n      falseValue: this.off_value,\n      label: this.show_value ? this.label : undefined,\n    }},\n\n    // use the v-switch label to display the current value\n    label() {\n      const v = this.val == this.on_value ? this.on_value : this.off_value\n      return `${v}`\n    },\n  },\n\n  watch: {\n    value(v) { this.val = v; },\n  },\n\n  methods: {\n    // change from v-switch is only emitted when the user toggles, not when input value changes\n    change(ev) {\n      console.log(\"toggle event:\", ev)\n      this.$emit('send', ev)\n    },\n  },\n\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex\"},[_c('v-switch',_vm._b({staticClass:\"ma-auto\",on:{\"change\":function($event){return _vm.change($event)}}},'v-switch',_vm.bindings,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./markdown.vue?vue&type=template&id=100342b6&\"\nimport script from \"./markdown.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./markdown.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./markdown.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCardText } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCardText})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify';\nimport 'vuetify/dist/vuetify.min.css'\n//import colors from 'vuetify/lib/util/colors'\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  theme: {\n    options: {\n      variations: false, // generate darken-N and lighten-N variations\n      customProperties: true, // generates --v-primary-base, etc, CSS colors\n    },\n    themes: {\n      light: {\n        background: '#f7f5f5', // page background\n        surface: '#fffdfd', // widget surfaces\n        panel: '#f4f2f2', // editing panel\n        primary: '#ad1625', // node-red red\n        primary_light: '#e5504d',\n        primary_dark: '#760000',\n        error: '#ec7422',\n        highlight: '#fff5ce', // selected widget\n      },\n      dark: {\n        background: '#0b0808',\n        surface: '#201d1d',\n        panel: '#262424',\n        primary: '#ad1625', // node-red red\n        primary_light: '#e5504d',\n        primary_dark: '#760000',\n        error: '#ec7422',\n        highlight: '#716741',\n      },\n    },\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-menu',{attrs:{\"offset-y\":\"\",\"allow-overflow\":\"\",\"max-width\":\"30ex\",\"content-class\":\"popup-spacer\",\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(on){return [_c('v-app-bar',{attrs:{\"dense\":\"\",\"app\":\"\",\"clipped-left\":\"\",\"color\":\"surface\"}},[_c('span',{staticClass:\"hidden-sm-and-up\"},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){_vm.sidebar = !_vm.sidebar}}})],1),_c('v-toolbar-title',{staticClass:\"text-h4 font-weight-bold text--secondary flex-shrink-0 mr-3\",staticStyle:{\"font-variant\":\"small-caps\"}},[_vm._v(\" \"+_vm._s(_vm.gotConfig ? _vm.dash.title : \"FlexDash\")+\" \")]),(_vm.gotConfig)?_c('v-tabs',{staticClass:\"hidden-xs-only\",attrs:{\"icons-and-text\":\"\"},model:{value:(_vm.tab_ix),callback:function ($$v) {_vm.tab_ix=$$v},expression:\"tab_ix\"}},[_vm._l((_vm.dash_tabs),function(tid,ix){return _c('v-tab',{key:tid+ix,class:{'is-active': ix == _vm.tab_ix},attrs:{\"xhref\":'#tab'+ix}},[_vm._v(\" \"+_vm._s(_vm.tabs[tid].title)+\" \"),_c('v-icon',{staticClass:\"mb-0\",attrs:{\"large\":!_vm.tabs[tid].title}},[_vm._v(\"mdi-\"+_vm._s(_vm.tabs[tid].icon))]),_c('div',{staticStyle:{\"position\":\"absolute\",\"z-index\":\"5\",\"right\":\"0\",\"top\":\"0.5ex\"}},[(_vm.$root.editMode && ix==_vm.tab_ix)?_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\",\"not-used\":on},on:{\"click\":function($event){_vm.tab_edit=!_vm.tab_edit}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-pencil\")])],1):_vm._e()],1)],1)}),(_vm.$root.editMode)?_c('v-btn',{staticClass:\"my-auto\",attrs:{\"x-small\":\"\",\"fab\":\"\"},on:{\"click\":_vm.addTab}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1):_vm._e()],2):_vm._e(),_c('v-tooltip',{attrs:{\"bottom\":\"\",\"disabled\":!_vm.canUndo,\"foo\":on},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\",\"disabled\":!_vm.canUndo},on:{\"click\":function($event){return _vm.$store.performUndo()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-undo\")])],1)]}}],null,true)},[_c('span',[_vm._v(\"undo \"+_vm._s(_vm.canUndo && _vm.$store.undo.buf[_vm.$store.undo.buf.length-1].tagline))])]),_c('demo',{on:{\"msg\":_vm.handleMsg}}),_c('uib',{ref:\"uib\",on:{\"msg\":_vm.handleMsg}}),_c('v-menu',{attrs:{\"offset-x\":\"\",\"min-width\":\"10em\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-cog\")])],1)]}}],null,true),model:{value:(_vm.settings_menu),callback:function ($$v) {_vm.settings_menu=$$v},expression:\"settings_menu\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',[_c('v-switch',{attrs:{\"inset\":\"\",\"label\":\"Edit\"},model:{value:(_vm.$root.editMode),callback:function ($$v) {_vm.$set(_vm.$root, \"editMode\", $$v)},expression:\"$root.editMode\"}})],1),_c('v-list-item',[_c('v-switch',{attrs:{\"inset\":\"\",\"label\":\"Dark\"},model:{value:(_vm.$vuetify.theme.dark),callback:function ($$v) {_vm.$set(_vm.$vuetify.theme, \"dark\", $$v)},expression:\"$vuetify.theme.dark\"}})],1)],1)],1)],1),(_vm.gotConfig)?_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"mini-variant\":\"\"},model:{value:(_vm.sidebar),callback:function ($$v) {_vm.sidebar=$$v},expression:\"sidebar\"}},[_c('div',[_c('v-tabs',{attrs:{\"vertical\":\"\"},model:{value:(_vm.tab_ix),callback:function ($$v) {_vm.tab_ix=$$v},expression:\"tab_ix\"}},_vm._l((_vm.dash_tabs),function(t){return _c('v-tab',{key:t,staticClass:\"px-0\",staticStyle:{\"min-width\":\"auto\"}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-\"+_vm._s(_vm.tabs[t].icon))])],1)}),1)],1)]):_vm._e()]}}]),model:{value:(_vm.tab_edit),callback:function ($$v) {_vm.tab_edit=$$v},expression:\"tab_edit\"}},[_c('v-card',{attrs:{\"color\":\"surface\"}},[_c('v-card-text',{staticClass:\"d-flex px-2\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.moveTab(-1)}}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-left-bold\")])],1)]}}])},[_c('span',[_vm._v(\"Move tab left\")])]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.moveTab(1)}}},on),[_c('v-icon',[_vm._v(\"mdi-arrow-right-bold\")])],1)]}}])},[_c('span',[_vm._v(\"Move tab right\")])]),_c('v-spacer'),_c('v-btn',{staticClass:\"mx-auto\",attrs:{\"small\":\"\"},on:{\"click\":_vm.deleteTab}},[_vm._v(\"Delete tab\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"small\":\"\",\"elevation\":\"0\",\"icon\":\"\"},on:{\"click\":function($event){_vm.tab_edit=false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',{staticClass:\"d-flex flex-column\"},[_c('v-text-field',{staticClass:\"flex-grow-0\",attrs:{\"dense\":\"\",\"label\":\"icon\",\"persistent-hint\":\"\",\"hint\":\"yes\",\"value\":_vm.tab.icon},on:{\"input\":function($event){return _vm.handleEdit('icon', $event)}},scopedSlots:_vm._u([{key:\"message\",fn:function(){return [_c('span',[_vm._v(\"See \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://materialdesignicons.com\"}},[_vm._v(\" materialdesignicons.com \"),_c('v-icon',{attrs:{\"color\":\"primary\",\"x-small\":\"\"}},[_vm._v(\"mdi-open-in-new\")])],1)])]},proxy:true}])}),_c('v-text-field',{staticClass:\"flex-grow-0 mt-6\",attrs:{\"dense\":\"\",\"label\":\"tab title\",\"value\":_vm.tab.title},on:{\"input\":function($event){return _vm.handleEdit('title', $event)}}}),_c('v-btn',{staticClass:\"mx-auto\",attrs:{\"small\":\"\"},on:{\"click\":_vm.addGrid}},[_vm._v(\"Add grid\")])],1)],1)],1),_c('v-main',[(_vm.gotConfig)?_c('v-tabs-items',{model:{value:(_vm.tab_ix),callback:function ($$v) {_vm.tab_ix=$$v},expression:\"tab_ix\"}},[_c('div',{style:({ backgroundColor: _vm.$vuetify.theme.themes[_vm.theme].background})},_vm._l((_vm.dash_tabs),function(id){return _c('v-tab-item',{key:id,class:{'is-active': id == _vm.tab_id}},_vm._l((_vm.tabs[id].grids),function(g,ix){return _c(_vm.grids[g].kind,{key:g,tag:\"component\",attrs:{\"id\":g},on:{\"delete\":function($event){return _vm.deleteGrid(id, ix)}}})}),1)}),1)]):_c('div',[_vm._v(\" LOADING... \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mx-2\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"small\":\"\",\"icon\":\"\",\"color\":_vm.color}},Object.assign({}, {click:_vm.handleClick}, on)),[_c('v-icon',[_vm._v(\"mdi-network\")])],1)]}}])},[_c('span',[_vm._v(\"Enable socket.io connection\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Uib - Wrapper around uibuilder, the socket.io connection to the node-red server.\n     Maintains the connection, displays an icon and error messages, emits messages received.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <v-icon :color=\"color\">mdi-network</v-icon>\n</template>\n<template>\n  <div class=\"mx-2\">\n    <v-tooltip bottom>\n      <template v-slot:activator=\"{on}\">\n        <v-btn small icon :color=\"color\" v-on=\"{click:handleClick, ...on}\">\n          <v-icon>mdi-network</v-icon>\n        </v-btn>\n      </template>\n      <span>Enable socket.io connection</span>\n    </v-tooltip>\n  </div>\n</template>\n\n<script scoped>\n// eslint\nimport uibuilder from '@/../public/uibuilderfe.js'\nwindow.uib_started = false;\n\nexport default {\n  name: 'Uib',\n\n  data: () => ({\n    enabled: false,\n    connected: false,\n    msgCount: 0,\n  }),\n\n  computed: {\n    color() { return this.enabled? (this.connected ? \"green\" : \"error\") : null },\n  },\n\n  created() { console.log(\"uib created\") },\n\n  deleted() {\n    uibuilder.clearEventListeners()\n    console.log(\"uib deleted\")\n  },\n\n  // Called after vue components are loaded and DOM built.\n  mounted() { if (this.enabled) this.start() },\n\n  methods: {\n    start() {\n      const self = this\n\n      const ioc = uibuilder.get('ioConnected')\n      console.log(`uib mounted, uib_started=${window.uib_started} Connected=${ioc}`)\n\n      // start uibuilder and its socket.io connection, start() is a no-op if it's already running\n      // we do _not_ pass the vue app 'cause we don't want uibuilder to mess with stuff\n      uibuilder.clearEventListeners() // ensure no old instances of ourself are listening\n      let nodered = process.env.VUE_APP_NR_SERVER + \"/\" + process.env.VUE_APP_UIB_NAME\n      //uibuilder.debug(true)\n      uibuilder.start({\n        namespace: nodered, ioPath: \"/uibuilder/vendor/socket.io\", vueApp: null,\n      })\n      if (window.uib_started) {\n        // fake the cache replay message so we get the init data...\n        uibuilder.sendCtrl({from: \"client\", cacheControl: \"REPLAY\"})\n      }\n      window.uib_started = true\n\n      uibuilder.onChange('msg', function(msg) {\n        self.msgCount++\n        if (this.enabled) self.$emit('msg', msg)\n      })\n\n      uibuilder.onChange('ioConnected', function(v) {\n        self.connected = !!v\n      })\n    },\n\n    // called by parent using $ref\n    send(msg) { uibuilder.send(msg) },\n\n    // button click handler\n    handleClick() {\n      this.enabled = !this.enabled\n      if (!window.uib_started) this.start()\n    },\n  },\n\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uib.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uib.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./uib.vue?vue&type=template&id=1c971b00&\"\nimport script from \"./uib.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./uib.vue?vue&type=script&scoped=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VIcon,VTooltip})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mx-2\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"small\":\"\",\"icon\":\"\",\"color\":_vm.color}},Object.assign({}, {click:_vm.handleChange}, on)),[_c('v-icon',[_vm._v(\"mdi-dice-multiple\")])],1)]}}])},[_c('span',[_vm._v(\"Enable random demo data to be fed into demo_*.\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Demo - Fake back-end server that sends a little bit of pseudo-random demo data so we\n     can try things out without having to connect anywhere.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <div class=\"mx-2\">\n    <v-tooltip bottom>\n      <template v-slot:activator=\"{on}\">\n        <v-btn small icon :color=\"color\" v-on=\"{click:handleChange, ...on}\">\n          <v-icon>mdi-dice-multiple</v-icon>\n        </v-btn>\n      </template>\n      <span>Enable random demo data to be fed into demo_*.</span>\n    </v-tooltip>\n  </div>\n</template>\n\n<script scoped>\n\nconst series = [ 'kitchen', 'bedroom', 'study', 'living room', 'guest room' ]\n\n// https://stackoverflow.com/a/22080644\nconst randomStepper = (() => {\n  let state = {}\n\n  return (key) => {\n    let [value, phase, w, x2] = state[key] || [70, 0, 0, 0]\n\n    function step() {\n      let z\n      if (!phase) {\n          let x1\n          do {\n              x1 = 2.0 * Math.random() - 1.0;\n              x2 = 2.0 * Math.random() - 1.0;\n              w = x1 * x1 + x2 * x2;\n          } while (w >= 1.0);\n          w = Math.sqrt((-2.0 * Math.log(w)) / w);\n          z = x1 * w;\n      } else {\n          z = x2 * w;\n      }\n      phase ^= 1;\n  \n      return z;\n    }\n    let min = 50, max = 90, r\n    do { r = step(); } while (value + r < min || value + r > max);\n    value += r;\n    state[key] = [value, phase, w, x2]\n    return value\n  }\n})()\n\nconst welcome_text = `\n# Welcome to FlexDash\n\nYou are seeing the FlexDash demo dashboard. It shows a variety of _widgets_ spread across\nmultiple _tabs_. Each tab can have multiple _grids_ that lay out the widgets and that can be\nrolled up and down.\n\n### Getting started\n\nThe demo dashboard does not connect to any server and instead displays randomly generated data.\nTo connect to a server, use the _mdi-network_ icon at the top right (not implemented yet).\n\nTo edit the dashboard's configuration, switch to edit mode using the settings icon at\nthe top-right. All editing is instantaneous while the dashboard remains live. If you make\na mistake, use the undo button at the top right.\n\n### Feeding data into FlexDash\n\n_to be continued_ ...\n`\n\nconst demo_config = {\n  \"dash\": {\n      \"title\": \"FlexDash\",\n      \"tabs\": [ \"t00000\", \"t00001\" ]\n  },\n  \"tabs\": {\n      \"t00000\": { \"id\": \"t00000\", \"icon\": \"view-dashboard\", \"grids\": [ \"g0\" ] },\n      \"t00001\": { \"id\": \"t00001\", \"icon\": \"home-thermometer\", \"grids\": [ \"g1\", \"g2\" ] }\n  },\n  \"grids\": {\n      \"g0\": { \"id\": \"g0\", \"kind\": \"fixed-grid\",\n              \"widgets\": [ \"1\", \"0\", \"3\", \"2\", \"9\", \"6\", \"7\", \"8\", \"10\", \"11\", \"12\", \"13\", \"14\" ]\n      },\n      \"g1\": { \"id\": \"g1\", \"kind\": \"fixed-grid\", \"widgets\": [] },\n      \"g2\": { \"id\": \"g2\", \"kind\": \"fixed-grid\", \"widgets\": [] }\n  },\n  \"widgets\": {\n      \"1\": { \"kind\": \"Markdown\", \"id\": \"1\", \"cols\": 3, \"rows\": 3, \"dynamic\": {},\n            \"static\": { \"title\": \"\", \"text\": welcome_text } },\n      \"0\": { \"kind\": \"Stat\", \"id\": \"0\",\n             \"static\": { \"title\": \"Bedroom\", \"value\": \"cold\", \"unit\": \"F\" },\n             \"dynamic\": { \"value\": \"bedroom\" }, \"rows\": 1, \"cols\": 1 },\n      \"2\": { \"kind\": \"Stat\", \"id\": \"2\",\n             \"static\": { \"title\": \"Guest Room\", \"unit\": \"F\" },\n             \"dynamic\": { \"value\": \"guest room\" }, \"rows\": 1, \"cols\": 1 },\n      \"3\": { \"kind\": \"Gauge\", \"id\": \"3\",\n             \"static\": { \"title\": \"Living Room\", \"value\": 50, \"arc\": 270, \"center\": true,\n                         \"unit\": \"F\", \"needle_color\": \"red\", \"min\": 30 },\n             \"dynamic\": { \"value\": \"living room\" }, \"rows\": 2, \"cols\": 2 },\n      \"6\": { \"kind\": \"Gauge\", \"id\": \"6\",\n             \"static\": { \"title\": \"Kitchen\", \"color\": \"lightblue\", \"arc\": 90, \"unit\":\"F\", \"min\":0},\n             \"dynamic\": { \"value\": \"kitchen\" }, \"rows\": 1, \"cols\": 1 },\n      \"7\": { \"kind\": \"Toggle\", \"id\": \"7\",\n             \"static\": { \"title\": \"light\", \"off_value\": \"0\", \"on_value\": \"ON\",\n                         \"color\": \"secondary\", \"value\": \"ON\" },\n             \"dynamic\": { \"_output\": \"light\", \"value\": \"light\" }, \"rows\": 1, \"cols\": 1 },\n      \"8\": { \"kind\": \"PushButton\", \"id\": \"8\",\n             \"static\": { \"title\": \"launch\", \"color\": \"secondary\", \"output_value\": \"ON\",\n                         \"icon\": \"rocket-launch\", \"tooltip\": \"Next stop: Mars!\" },\n             \"dynamic\": { \"_output\": \"light\" }, \"rows\": 1, \"cols\": 1 },\n      \"9\": { \"kind\": \"PushButton\", \"id\": \"9\",\n             \"static\": { \"title\": \"\", \"icon\": \"watering-can\" },\n             \"dynamic\": {}, \"rows\": 1, \"cols\": 1 },\n      \"10\": { \"kind\": \"Gauge\", \"id\": \"10\",\n             \"static\": { \"title\": \"Kitchen\", \"arc\":180, \"base_color\": \"lightgreen\", \"color\":\"blue\",\n                         \"unit\": \"F\", \"radius\": 90, \"needle_color\": \"white\" },\n             \"dynamic\": { \"value\": \"kitchen\" }, \"rows\": 1, \"cols\": 1 },\n      \"11\": { \"kind\": \"Sparkchart\", \"id\": \"11\",\n             \"static\": { \"title\": \"Livingrm\", \"color\": \"green\", \"line_width\": 4, \"fill\": true },\n             \"dynamic\": { \"value\": \"living room\" }, \"rows\": 1, \"cols\": 1 },\n      \"12\": { \"kind\": \"Sparkchart\", \"id\": \"12\",\n             \"static\": { \"title\": \"Living Room\", \"bars\": true },\n             \"dynamic\": { \"value\": \"living room\" }, \"rows\": 1, \"cols\": 1 },\n      \"13\": { \"kind\": \"Sparkchart\", \"id\": \"13\",\n             \"static\": { \"title\": \"Kitchen\" },\n             \"dynamic\": { \"value\": \"kitchen\" }, \"rows\": 1, \"cols\": 2 },\n      \"14\": { \"kind\": \"TimePlot\", \"id\": \"14\",\n             \"static\": { \"title\": \"Temperatures\" },\n             \"dynamic\": { \"data\": \"temp_data\", \"options\": \"temp_opts\" }, \"rows\": 4, \"cols\": 4 }\n    }\n}\n\nconst plot_opts = {\n    series: [\n        { label: \"time\" },\n        { label: \"Sensor 1\", scale: \"C\", value: \"v.toFixed(1) + 'C'\"},\n        { label: \"Sensor 2\", scale: \"C\", value: \"v.toFixed(1) + 'C'\"},\n        { label: \"Sensor 3\", scale: \"C\", value: \"v.toFixed(1) + 'C'\"}, ],\n    axes: [ {}, {\n            scale: \"F\",\n            values: /*(u, vv, s) =>*/ 'vv.map(v => v + \"F\")',\n        }, {\n            scale: \"C\",\n            values: /*(u, vv, s) =>*/ 'vv.map(v => v + \"C\")',\n            side: 1,\n            grid: {show: false},\n        } ],\n    scales: {\n        \"F\": { from: \"C\", range: /*(u, min, max) =>*/ '[ min*9/5+32, max*9/5+32 ]' }, },\n}\n\nexport default {\n  name: 'Demo',\n\n  data: () => ({\n    enable: true,\n    timers: [],\n  }),\n\n  computed: {\n    color() { return this.enable ? \"green\" : null },\n  },\n\n  // Called after vue components are loaded and DOM built.\n  mounted() {\n    if (this.enable) {\n      // if the demo stuff is enabled at mount time we kick everything off here\n      this.enable = false\n      this.handleChange()\n      window.setTimeout(this.tick, 3000)\n    }\n  },\n\n  methods: {\n    // handle a demo switch toggle\n    handleChange() {\n      this.enable = !this.enable\n      console.log(\"Demo switch changed to\", this.enable)\n      if (this.enable) {\n        // send dashboard configuration\n        this.$emit('msg', {topic: '$config', payload: demo_config})\n        // start interval timers to send data for stats, gauges, etc\n        for (let i=0; i<series.length; i++) {\n          this.timers.push(window.setInterval(()=>this.tick(series[i]), 5000+i*1000))\n          this.tick(series[i])\n        }\n        // send time plot config and start interval timer for plot\n        this.$emit('msg', {topic: 'temp_opts', payload: plot_opts})\n        this.timers.push(window.setInterval(this.plot, 3000))\n        this.plot()\n      } else {\n        // kill all the timers\n        this.timers.map((t) => window.clrInterval(t))\n        this.timer = []\n      }\n    },\n\n    tick(s) {\n      const t = Math.round(10*randomStepper(s))/10\n      //console.log(`Demo: demo_${s}=${t}`)\n      this.$emit('msg', {topic: `${s}`, payload: t})\n    },\n\n    plot() {\n      let data = [ Date.now()/1000, Math.round(10*randomStepper(\"p1\"))/10,\n          Math.round(10*randomStepper(\"p2\"))/10, Math.round(10*randomStepper(\"p3\"))/10 ]\n      this.$emit('msg', {topic: 'temp_data', payload: data})\n    },\n  },\n\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./demo.vue?vue&type=template&id=a1e1e898&\"\nimport script from \"./demo.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./demo.vue?vue&type=script&scoped=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VIcon,VTooltip})\n","<!-- Dash - Main Vue component for the entire page.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <v-app>\n\n    <!-- wrapping nav in a menu to be able to bring up an editing card -->\n    <v-menu v-model=\"tab_edit\" offset-y allow-overflow max-width=\"30ex\"\n            content-class=\"popup-spacer\" :close-on-content-click=\"false\">\n      <template v-slot:activator=\"on\">\n\n        <!-- Top title/navigation bar -->\n        <v-app-bar dense app clipped-left color=\"surface\">\n          <!-- Hamburger menu shown on smallest devices only -->\n          <span class=\"hidden-sm-and-up\">\n            <v-app-bar-nav-icon @click=\"sidebar = !sidebar\"></v-app-bar-nav-icon>\n          </span>\n\n          <!-- Title -->\n          <v-toolbar-title class=\"text-h4 font-weight-bold text--secondary flex-shrink-0 mr-3\"\n                           style=\"font-variant: small-caps\">\n            {{ gotConfig ? dash.title : \"FlexDash\" }}\n          </v-toolbar-title>\n\n          <!-- Tabs -->\n          <v-tabs v-model=tab_ix icons-and-text class=\"hidden-xs-only\" v-if=\"gotConfig\">\n            <v-tab v-for=\"(tid, ix) in dash_tabs\" :key=\"tid+ix\" :xhref=\"'#tab'+ix\"\n                   :class=\"{'is-active': ix == tab_ix}\">\n                   <!-- set class above as work-around for vuetify issue #11405-->\n              <!-- Text and icon for the tab -->\n              {{tabs[tid].title}}\n              <v-icon :large=\"!tabs[tid].title\" class=\"mb-0\">mdi-{{tabs[tid].icon}}</v-icon>\n              <!-- Button to edit the tab -->\n              <div style=\"position:absolute; z-index:5; right:0; top:0.5ex;\">\n                <v-btn small icon v-if=\"$root.editMode && ix==tab_ix\"\n                       @click=\"tab_edit=!tab_edit\" :not-used=\"on\">\n                  <v-icon small>mdi-pencil</v-icon>\n                </v-btn>\n              </div>\n            </v-tab>\n            <!-- Button to add a tab -->\n            <v-btn v-if=\"$root.editMode\" x-small fab @click=\"addTab\" class=\"my-auto\">\n              <v-icon>mdi-plus</v-icon>\n            </v-btn>\n          </v-tabs>\n\n          <!-- Undo button -->\n          <v-tooltip bottom :disabled=\"!canUndo\" :foo=\"on\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn icon v-bind=\"attrs\" v-on=\"on\"\n                     :disabled=\"!canUndo\" @click=\"$store.performUndo()\">\n                <v-icon>mdi-undo</v-icon>\n              </v-btn>\n            </template>\n            <span>undo {{ canUndo && $store.undo.buf[$store.undo.buf.length-1].tagline }}</span>\n          </v-tooltip>\n\n          <!-- Connection icons -->\n          <demo @msg=\"handleMsg\"></demo>\n          <uib ref=\"uib\" @msg=\"handleMsg\"></uib>\n\n          <!-- Settings menu at far right -->\n          <v-menu offset-x min-width=\"10em\" v-model=\"settings_menu\">\n            <!-- Menu activator, i.e. the button -->\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn icon v-bind=\"attrs\" v-on=\"on\"><v-icon>mdi-cog</v-icon></v-btn>\n            </template>\n            <!-- Settings Menu -->\n            <v-list dense>\n              <v-list-item>\n                <v-switch v-model=\"$root.editMode\" inset label=\"Edit\"></v-switch>\n              </v-list-item>\n              <v-list-item>\n                <v-switch v-model=\"$vuetify.theme.dark\" inset label=\"Dark\"></v-switch>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </v-app-bar>\n\n        <!-- Navigation drawer opening from the left on small devices to show tabs -->\n        <v-navigation-drawer v-model=\"sidebar\" app mini-variant v-if=\"gotConfig\">\n          <div>\n          <v-tabs vertical v-model=tab_ix>\n            <v-tab v-for=\"t in dash_tabs\" :key=\"t\" class=\"px-0\" style=\"min-width: auto\">\n              <v-icon large>mdi-{{tabs[t].icon}}</v-icon>\n            </v-tab>\n          </v-tabs>\n          </div>\n        </v-navigation-drawer>\n      </template>\n\n      <!-- Editing panel shown floating below tab -->\n      <v-card color=\"surface\">\n        <v-card-text class=\"d-flex px-2\">\n          <!-- move tab left/right -->\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{ on }\">\n              <v-btn small icon @click=\"moveTab(-1)\" class=\"\" v-on=\"on\">\n                <v-icon>mdi-arrow-left-bold</v-icon></v-btn>\n            </template>\n            <span>Move tab left</span>\n          </v-tooltip>\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{ on }\">\n              <v-btn small icon @click=\"moveTab(1)\" v-on=\"on\">\n                <v-icon>mdi-arrow-right-bold</v-icon></v-btn>\n            </template>\n            <span>Move tab right</span>\n          </v-tooltip>\n          <v-spacer></v-spacer>\n\n          <!-- delete tab -->\n          <v-btn small @click=\"deleteTab\" class=\"mx-auto\">Delete tab</v-btn>\n          <v-spacer></v-spacer>\n\n          <!-- close dialog button -->\n          <v-btn small elevation=0 icon @click=\"tab_edit=false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-card-text>\n\n        <v-card-text class=\"d-flex flex-column\">\n          <!-- icon selector -->\n          <v-text-field dense label=\"icon\" persistent-hint hint=\"yes\" class=\"flex-grow-0\"\n                        :value=\"tab.icon\" @input=\"handleEdit('icon', $event)\">\n            <template v-slot:message>\n              <span>See\n                <a target=\"_blank\" href='https://materialdesignicons.com'>\n                   materialdesignicons.com\n                   <v-icon color=\"primary\" x-small>mdi-open-in-new</v-icon>\n                </a>\n              </span>\n            </template>\n          </v-text-field>\n\n          <!-- tab title -->\n          <v-text-field dense label=\"tab title\" class=\"flex-grow-0 mt-6\"\n                        :value=\"tab.title\" @input=\"handleEdit('title', $event)\">\n          </v-text-field>\n\n          <v-btn small @click=\"addGrid\" class=\"mx-auto\">Add grid</v-btn>\n        </v-card-text>\n\n      </v-card>\n    </v-menu>\n\n    <v-main>\n      <v-tabs-items v-if=\"gotConfig\" v-model=\"tab_ix\">\n        <div :style=\"{ backgroundColor: $vuetify.theme.themes[theme].background}\">\n          <v-tab-item v-for=\"(id) in dash_tabs\" :key=\"id\"\n                      :class=\"{'is-active': id == tab_id}\">\n                      <!-- set class above as work-around for vuetify issue #11405-->\n            <component v-for=\"(g, ix) in tabs[id].grids\" :key=\"g\"\n                       v-bind:is=\"grids[g].kind\" :id=\"g\"\n                       @delete=\"deleteGrid(id, ix)\">\n            </component>\n          </v-tab-item>\n        </div>\n      </v-tabs-items>\n      <div v-else>\n        LOADING...\n      </div>\n    </v-main>\n\n  </v-app>\n</template>\n\n<script scoped>\nimport Uib from '@/components/uib'\nimport Demo from '@/components/demo'\n//const J = JSON.stringify\n\nexport default {\n  name: 'Dash',\n\n  components: { Uib, Demo, },\n  inject: [ '$config', '$store' ],\n\n  data: () => ({\n    appTitle: 'FlexDash',\n    sidebar: false, // disabled for now\n    gotConfig: false, // set to true when we've received the initial config\n    tab_ix: null, // which tab we're on\n    tab_edit: false, // turns tab editing drawer on/off\n\n    settings_menu: null, // whether settings menu is open or not\n    settings: { edit: 'Edit mode', theme: 'Toggle theme' }, // options in the settings menu\n  }),\n\n  computed: {\n    // note: some of the following get evaluated before the config is loaded, the gotConfig\n    // guard ensures that they do get re-evaluated when it is loaded despite Vue2 issues...\n    dash() { return this.gotConfig ? this.$config.dash : {} },\n    dash_tabs() { return this.dash.tabs || [] }, // tabs to show, handling init\n    tab() { return this.tab_id ? this.tabs[this.tab_id] : {} },\n    tab_id() { return this.tab_ix != null ? this.dash_tabs[this.tab_ix] : null }, // current tab ID\n    tabs() { return this.gotConfig ? this.$config.tabs : {} }, // make accessible in template\n    grids() { return this.gotConfig ? this.$config.grids : {} }, // make accessible in template\n    theme() { return (this.$vuetify.theme.dark) ? 'dark' : 'light' },\n    canUndo() { return this.$store.undo.buf.length > 0 },\n\n    // for debugging purposes, these show up in the vue devtools\n    _sd() { return this.$store.sd },\n    _config() { return this.$config },\n  },\n\n  watch: {\n    // ensure the current tab exists\n    tabs(tt) {\n      if (this.tab_ix >= tt.length) this.tab_ix = tt.length-1\n    },\n  },\n\n  provide() {\n    const self = this\n    return {\n      // send a \"raw\" message to the server, should be used primarily to send user input, which\n      // gets mapped into server-data (self.sd) and thus where the nested component knows which\n      // key of self.sd is to be updated.\n      sendSrv(topic, payload) {\n        self.$refs.uib.send({topic: topic, payload: payload})\n      },\n    }\n  },\n\n  methods: {\n    // Handle a msg event emitted by a server connection, process the message and\n    // inject it into the store.\n    handleMsg(msg) {\n      // Ignore if there's not topic and payload\n      if (!('topic' in msg && 'payload' in msg)) {\n        console.log(\"Message w/out topic/payload:\", msg)\n        return\n      }\n\n      // Do some special handling of dashboard config messages\n      if (msg.topic === \"$config\") {\n        console.log(\"*** config received\")\n        this.gotConfig = true\n\n        // sanity check the config for bootstrapping purposes\n        if (!msg.payload || !msg.payload.dash) {\n          console.log(\"*** No or broken config, clearing! (got:\", msg.payload)\n          this.$store.initDash()\n          return\n        }\n      }\n\n      // Insert into store.\n      this.$store.insertData(msg.topic, msg.payload)\n    },\n\n    // handle buttons for tab editing\n    addTab() {\n      const tab_ix = this.$store.addTab()\n      this.$nextTick(() => {\n        this.tab_ix = tab_ix\n        this.tab_edit = true // switch to editing the new tab\n      })\n    },\n    deleteTab() {\n      this.$store.deleteTab(this.tab_ix)\n      if (this.tab_ix >= this.$config.dash.tabs.length-1) // this.dash_tabs has not updated yet\n        this.tab_ix = this.$config.dash.tabs.length-1\n      this.tab_edit = false\n    },\n\n    // edit tab props, such as title\n    handleEdit(what, ev) {\n      console.log('handleEdit', what, ev)\n      const prop = {}; prop[what] = ev\n      this.$store.updateTab(this.tab_id, prop)\n    },\n\n    moveTab(dir) {\n      const ix = this.tab_ix\n      if (!(ix+dir >= 0 && ix+dir < this.dash.tabs.length)) return\n      let tt = [ ...this.dash.tabs ] // clone\n      let t = tt[ix]; tt[ix] = tt[ix+dir]; tt[ix+dir] = t // swap\n      this.$store.updateDash({ tabs: tt })\n      this.tab_ix += dir\n      // we need to force a full re-eval of the rendered stuff else the association between\n      // the tabs and the content is screwed-up\n      this.gotConfig = false\n      this.$nextTick( ()=> this.gotConfig = true )\n    },\n\n    addGrid() {\n      this.$store.addGrid(this.tab_id)\n    },\n\n    // delete event coming up from the grid component\n    deleteGrid(tab_id, grid_ix) {\n      this.$store.deleteGrid(tab_id, grid_ix)\n    },\n\n  },\n\n}\n</script>\n\n<style>\n[v-cloak] > * { display:none }\n[v-cloak]::before { content: \"loading\" }\n \n/* Remove some excessive padding at left&right, especially for small devices */\n.v-app-bar > .v-toolbar__content { padding: 0px 8px; }\n/* Improve vertical alignment of items in toolbar extension (justify-content superceded by mx-auto)*/\n.v-app-bar > .v-toolbar__extension { align-items: end; justify-content: center; }\n.v-app-bar > .v-toolbar__extension input { padding-top: 0px !important; }\n/* Add a hairline between the normal app bar and the extension */\n.v-app-bar.theme--light .v-toolbar__extension { border-top: 1px solid #e0e0e0; }\n.v-app-bar.theme--dark .v-toolbar__extension { border-top: 1px solid #111; }\n\n.popup-spacer { margin-top: 2px; margin-bottom: 3px; }\n\n/* this is probably the wrong place for these little utility classes... */\n.width100 { width: 100%; }\n.unit { font-size: 70%; vertical-align: 20%; margin-left: 0.1em; }\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./dash.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./dash.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./dash.vue?vue&type=template&id=7759dbb6&\"\nimport script from \"./dash.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./dash.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./dash.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VBtn,VCard,VCardText,VIcon,VList,VListItem,VMain,VMenu,VNavigationDrawer,VSpacer,VSwitch,VTab,VTabItem,VTabs,VTabsItems,VTextField,VToolbarTitle,VTooltip})\n","// Store - Manages the data reflected from the server, which consts of the \"server data\"\n// that is displayed by the dashboard as well as the \"config\" of the dashboard itself.\n// Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n\nimport Vue from 'vue'\nimport _ from 'lodash'\n\nexport class StoreError extends Error {\n  constructor (message) {\n    super(message)\n    this.name = 'StoreError'\n    return this\n  }\n}\n\n// ===== helper functions\n\n// walkTree takes the root of an object hierarchy and a dot-separated path, then walks\n// down the tree along the path and returns the final node in the tree.\nfunction walkTree(root, path) {\n  let node = root\n  for (const d of path) {\n    // handle empty path element (e.g. consecutive slashes\n    if (d == '') {\n      // do nothing\n    // handle traversing an array, need to parse index into an int\n    } else if (Array.isArray(node)) {\n      const ix = parseInt(d, 10)\n      if (Number.isNaN(ix)) {\n        throw new StoreError(`Array index '${d}' in '${path}' is not an int`)\n      } else if (ix < 0 || ix >= node.length) {\n        throw new StoreError(`Array index '${d}' in '${path}' > ${node.length}`)\n      }\n      node = node[ix]\n    } else if (typeof node === 'object') {\n      // need to handle undefined here because we explicitly set properties to undefined if\n      // we need to attach a watcher to a property that doesn't exist\n      if (!(d in node) || typeof node[d] === 'undefined')\n        Vue.set(node, d, {}) // allow new subtrees to be created\n      node = node[d]\n    } else {\n      throw new StoreError(`Level '${d}' of '${path}'' is not traversable: ${typeof node[d]}`)\n    }\n  }\n  return node\n}\n\n// export helper functions for testing purposes\nexport const functions = {walkTree}\n\n// ===== Store class\n\n// empty objects for addTab, addGrid, etc. The ID is missing and must be added!\nconst empty_tab = { icon: 'rocket-launch', title: \"\", grids: [] }\nconst empty_grid = { kind: 'fixed-grid', title: \"\", widgets: [] }\nconst empty_widget = { kind: 'stat', rows:1, cols:1, static:{title:\"Stat\"}, dynamic:{} }\n\nexport class Store {\n  constructor () {\n    // At init we need to populate $config a little so Vue2's watchers work, sigh...\n    this.root = Vue.observable({sd:{}, $config: {dash:{}, tabs:{}, grids:{}, widgets:{}}})\n    this.sd = this.root.sd // server data, i.e. the data being visualized by the dashboard\n    this.config = this.root.$config // the dashboard's configuration\n    this.queue = [] // queue of mutations to send to the server\n    this.undo = Vue.observable({ buf:[], at:null }) // undo steps\n    return this\n  }\n\n  // insert data from a server message into the store.\n  // Interprets the topic string as a hierarchy of object \"levels\" separated by slashes and\n  // mutates the data at the final path element.\n  // If the path does not exist it is created using objects, i.e., arrays must be insrted\n  // explicitly and cannot be created just by traversing a path.\n  // If the type of the second to last path element (i.e. the last \"directory\" element) is\n  // an array then a value can be appended by writing to one past the last index.\n  // insertData returns the old value that got updated so it can be used to undo the\n  // insertion (except that intermediate path elements that were created in the traversal\n  // will not be deleted by this).\n  // TODO: this should throw an exception in case of error\n  // FIXME: we currently assign undefined in order to delete an item, which works for objects but\n  // not arrays, although technically it leaves the property in the object. Should figure out\n  // whether to actually delete object properties but that may interfere with reactive watchers.\n  // Undefined also serializes to null in JSON, so it's impossible to delete something from the\n  // server end. Update: gotta really delete stuff, at least in the $config, else we try to\n  // render deleted stuff...\n  insertData(topic, payload) {\n    let tt = topic.split(\"/\") // split levels of hierarchy\n    tt = tt.filter(t => t.length > 0) // remove empty components, e.g. leading slash\n    if (tt.length == 0) {\n      throw new StoreError(\"Cannot replace entire hierarchy\")\n    }\n\n    if (topic === \"$config\") {\n      // beware of Vue2 reactivity limitations...\n      //Vue.set(this.root, '$config', payload)\n      //this.config = this.root.$config\n      Object.keys(payload).forEach(k => { Vue.set(this.config, k, payload[k]) })\n      console.log(\"Replaced $config with:\", payload)\n      return\n    }\n\n    if (tt[0] !== \"$config\") tt.unshift(\"sd\")\n    const t = tt.pop() // separate off last level\n    const dir = walkTree(this.root, tt) // start at root\n    // now dir[t] is the field to update\n\n    // perform the update\n    let old = undefined\n    if (Array.isArray(dir)) {\n      const ix = parseInt(t, 10)\n      if (!Number.isNaN(ix)) {\n        if (ix >= 0 && ix < dir.length) {\n          if (payload === undefined) // can't produce a simple undo\n            throw new StoreError(`Cannot delete array element '${ix}' in '${topic}'`)\n          old = dir[ix]\n          console.log(`Updated array elt ${topic} with`, payload)\n          Vue.set(dir, ix, payload)\n        } else if (ix == dir.length) {\n          if (payload === undefined)\n            throw new StoreError(`Array index '${ix}' in '${topic}' >= ${dir.length}`)\n          old = undefined\n          console.log(`Appended array elt ${topic} with`, payload)\n          dir.push(payload)\n        } else {\n          throw new StoreError(`Array index '${ix}' in '${topic}' > ${dir.length}`)\n        }\n      } else {\n        throw new StoreError(`Array index '${t}' is not a number`)\n      }\n    } else if (typeof(dir) === 'object') {\n      old = dir[t]\n      if (payload !== undefined) {\n        console.log(`Updated ${topic} with:`, payload)\n        Vue.set(dir, t, payload) // $set 'cause we may add new props to dir\n      } else {\n        console.log(`Deleted ${topic}`)\n        delete dir[t]\n      }\n    } else {\n      throw new StoreError(`${topic} is neither Array nor Object in server state`)\n    }\n     return old\n  }\n\n  // pushUndo pushes a mutation onto the undo buffer but coalesces consecutive mutations with the\n  // same tagline if they happen within a minute of one-another in order to make undo meaningful\n  // when performing repetitive actions, such as hitting the + button on a numeric input.\n  pushUndo(tagline, mutation) {\n    const now = Date.now()\n    const u = this.undo\n    if (u.at && u.buf.length > 0 && now-u.at < 60000 && tagline == u.buf[u.buf.length-1].tagline)\n    {\n      // coalesce FIXME: should also coalesce mutations that update the same thing...\n      console.log(\"undo coalesce\")\n      u.buf[u.buf.length-1].mutation = [ ...mutation, ...u.buf[u.buf.length-1].mutation ]\n    } else {\n      // std push\n      u.at = now\n      u.buf.push({tagline, mutation})\n      while (u.buf.length > 10) u.buf.shift()\n    }\n  }\n\n  // performUndo replays a recorded undo mutation off the stack.\n  // TODO: consider implementing redo?\n  performUndo() {\n    console.log(\"perform undo\")\n    const u = this.undo\n    if (u.buf.length == 0) throw new StoreError(\"undo buffer is empty\")\n    const m = u.buf.pop()\n    u.at = null\n    this.qMutation(null, m.mutation)\n  }\n\n  // qMutation in the central function through which all mutations to the config must be\n  // funneled. It applies the mutation locally and queues it for sending to the server,\n  // then waits for an ack with a timeout.\n  // It also records the mutation in the undo buffer.\n  // The tagline is a string that goes into the undo buffer and is indended to help the user\n  // identify what the undo will do. Msgs is an array of [path, value] tuples with the\n  // leading \"$config/\" omitted from the path.\n  // If tagline is null, no undo steps are recorded, this is primarily used to perform\n  // undo steps themselves.\n  qMutation(tagline, msgs) {\n    console.log(\"queueing mutation\", tagline)\n    // apply the mutation locally and save the undo steps\n    let undo = []\n    for (const m of msgs) {\n      undo.unshift([m[0], this.insertData(\"$config/\" + m[0], m[1])]) // unshift to reverse the order\n    }\n    if (tagline) this.pushUndo(tagline, undo)\n\n    // send the mutation to the server\n    // TODO!\n  }\n\n  // generate an id for a new item in a collection\n  // example: to generate a new widget ID use genId(store.config.widgets, \"w\")\n  genId(collection, prefix) {\n    let id = null\n    while (!id || id in collection) {\n      id = \"00000\" + Math.floor(Math.random() * 10000)\n      id = prefix + id.substring(id.length-5)\n    }\n    return id\n  }\n\n  // ===== Getters with error checks\n\n  tabByID(id) {\n    const tab = this.config.tabs[id]\n    if (tab && tab.id == id) return tab\n    throw new StoreError(`tab ${id} does not exist`)\n  }\n\n  gridByID(id) {\n    const grid = this.config.grids[id]\n    if (grid && grid.id == id) return grid\n    throw new StoreError(`grid ${id} does not exist`)\n  }\n\n  widgetByID(id) {\n    const widget = this.config.widgets[id]\n    if (widget && widget.id == id) return widget\n    throw new StoreError(`widget ${id} does not exist`)\n  }\n\n  tabIDByIX(ix) {\n    const tabs = this.config.dash.tabs\n    if (tabs && ix >= 0 && ix < tabs.length) return tabs[ix]\n    throw new StoreError(`tab #${ix} does not exist`)\n  }\n\n  // tab may be a tab_id (string) or a tab object\n  gridIDByIX(tab, ix) {\n    if (typeof tab === 'string') tab = this.tabByID(tab)\n    if (tab && ix >= 0 && ix < tab.grids.length) return tab.grids[ix]\n    throw new StoreError(`grid #${ix} does not exist in tab ${tab.id}`)\n  }\n\n  // grid may be a grid_id (string) or a grid object\n  widgetIDByIX(grid, ix) {\n    if (typeof grid === 'string') grid = this.gridByID(grid)\n    if (grid && ix >= 0 && ix < grid.widgets.length) return grid.widgets[ix]\n    throw new StoreError(`widget #${ix} does not exist in grid ${grid.id}`)\n  }\n\n  // ===== Operations on the dash\n\n  // initDash initializes an empty dash with a tab and a grid, all empty...\n  initDash() {\n    if (this.config.dash.title) {\n      //console.log(\"OOPS, config:\", JSON.stringify(this.config))\n      throw new StoreError(\"cannot init a non-empty store\")\n    }\n\n    this.insertData('$config/widgets', {})\n    this.insertData('$config/grids', {\n      g00001: { id: 'g00001', kind: 'fixed-grid', widgets: [] },\n    })\n    this.insertData('$config/tabs', {\n      t00001: { id: 't00001', icon: \"view-dashboard\", grids: [\"g00001\"] }\n    })\n    this.insertData('$config/dash', { title: \"FlexDash\", tabs: ['t00001'] })\n  }\n\n  // ===== Operations on tabs\n\n  // addTab adds a new tab and initializes it with an empty grid\n  // returns the index of the new tab\n  addTab() {\n      const tab_id = this.genId(this.config.tabs, \"t\")\n      const grid_id = this.genId(this.config.grids, \"g\")\n      const tab_ix = this.config.dash.tabs.length\n      this.qMutation(\"add a tab\", [\n        [`grids/${grid_id}`, {  ..._.cloneDeep(empty_grid), id: grid_id }],\n        [`tabs/${tab_id}`, { ..._.cloneDeep(empty_tab), id: tab_id, grids: [grid_id] }],\n        [`dash/tabs/${tab_ix}`, tab_id ],\n      ])\n    return tab_ix\n  }\n\n  // deleteTab with index ix\n  deleteTab(ix) {\n    const tab_id = this.tabIDByIX(ix)\n    // collect the IDs of the grids and widgets we need to delete\n    const grids = this.tabByID(tab_id).grids\n    const widgets = grids.map(g => this.config.grids[g].widgets).flat()\n\n    // construct mutation to delete the whole shebang\n    this.qMutation(\"delete a tab\", [ // FIXME: add tab title to the message once implemented\n        [ `dash/tabs`, this.config.dash.tabs.filter((t,i) => i != ix) ],\n        [ `tabs/${tab_id}`, undefined ],\n        ...grids.map(g => [ `grids/${g}`, undefined ]),\n        ...widgets.map(w => [ `widgets/${w}`, undefined ]),\n    ])\n  }\n\n  // updateTab given ID and props to update (an object that gets merged into existing props)\n  updateTab(tab_id, props) {\n    this.tabByID(tab_id) // just for the sanity check\n    this.qMutation(`update tab ${Object.keys(props).join(\",\")}`,\n      Object.entries(props).map(([k,v]) => [`tabs/${tab_id}/${k}`, v])\n    )\n  }\n\n  // updateDash props (an object that gets merged into existing props)\n  updateDash(props) {\n    this.qMutation(`update dash ${Object.keys(props).join(\",\")}`,\n      Object.entries(props).map(([k,v]) => [`dash/${k}`, v])\n    )\n  }\n\n  // ===== Operations on grids\n\n  // addGrid adds a new grid to a tab and initializes it with an empty set of widgets\n  // returns the index of the new grid in tab.grids\n  addGrid(tab_id) {\n    const tab = this.tabByID(tab_id)\n    const grid_id = this.genId(this.config.grids, \"g\")\n    const grid_ix = tab.grids.length\n    this.qMutation(\"add a grid\", [ // FIXME: add tab name when implemented\n      [`grids/${grid_id}`, { ..._.cloneDeep(empty_grid), id: grid_id } ],\n      [`tabs/${tab_id}/grids/${grid_ix}`, grid_id ],\n    ])\n    return grid_ix\n  }\n\n  // deleteGrid with index ix from tab tab_id\n  deleteGrid(tab_id, ix) {\n    const tab = this.tabByID(tab_id)\n    const grid_id = this.gridIDByIX(tab, ix)\n    const grid = this.gridByID(grid_id)\n    // construct mutation to delete the grid and its widgets\n    this.qMutation(\"delete a grid\", [ // FIXME: add tab title to the message once implemented\n      [ `tabs/${tab_id}/grids`, tab.grids.filter((g,i) => i != ix) ],\n      [ `grids/${grid_id}`, undefined ],\n      ...grid.widgets.map(w => [ `widgets/${w}`, undefined ]),\n    ])\n  }\n\n  // updateGrid given ID and props to update (an object that gets merged into existing props)\n  updateGrid(grid_id, props) {\n    this.gridByID(grid_id) // just for the sanity check\n    this.qMutation(`update grid ${Object.keys(props).join(\",\")}`,\n      Object.entries(props).map(([k,v]) => [`grids/${grid_id}/${k}`, v])\n    )\n  }\n\n  // ===== Operations on widgets\n\n  // addWidget adds a new widget of the specified kind to a grid\n  // returns the index of the new widget in the grid\n  addWidget(grid_id, kind) {\n    const grid = this.gridByID(grid_id)\n    const widget_id = this.genId(this.config.widgets, \"w\")\n    const widget_ix = grid.widgets.length\n    this.qMutation(\"add a widget\", [ // FIXME: add tab name when implemented\n      [`widgets/${widget_id}`,\n        { ..._.cloneDeep(empty_widget), id: widget_id, kind, static:{title:kind} } ],\n      [`grids/${grid_id}/widgets/${widget_ix}`, widget_id ],\n    ])\n    return widget_ix\n  }\n\n  // deleteWidget with index ix from grid grid_id\n  deleteWidget(grid_id, ix) {\n    const grid = this.gridByID(grid_id)\n    const widget_id = this.widgetIDByIX(grid, ix)\n    // construct mutation to delete the widget\n    this.qMutation(\"delete a widget\", [ // add tab title to the message once implemented\n      [ `grids/${grid_id}/widgets`, grid.widgets.filter((w,i) => i != ix) ],\n      [ `widgets/${widget_id}`, undefined ],\n    ])\n  }\n\n  // updateWidget given ID and props to update (an object that gets merged into existing props)\n  updateWidget(widget_id, props) {\n    this.widgetByID(widget_id) // just for the sanity check\n    this.qMutation(`update widget ${Object.keys(props).join(\",\")}`,\n      Object.entries(props).map(([k,v]) => [`widgets/${widget_id}/${k}`, v])\n    )\n  }\n\n  // updateWidgetProp, which is static|dynamic, prop is key within that\n  updateWidgetProp(widget_id, which, prop, value) {\n    this.widgetByID(widget_id) // just for the sanity check\n    this.qMutation(`update widget prop ${which}:${prop}`,\n      [[`widgets/${widget_id}/${which}/${prop}`, value]]\n    )\n  }\n\n\n\n\n}\n\nlet instance = new Store()\nexport default instance\n\n// for unit test purposes...\nexport function StoreReinit() { Object.assign(instance, new Store()) }\n\n","// main -- A pile of mess that needs to go somewhere.\n// Perhaps notable is the fact that we load grid and widget components globally here for now.\n// Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n\nimport Vue from 'vue'\nimport vuetify from '@/plugins/vuetify'\nimport Dash from './dash.vue'\nimport LoadScript from 'vue-plugin-load-script'\nimport store from './store'\n\n// Load socket.io from the local npm package (i.e. tell webpack to include it) and stick it into\n// a global var so uibuilder finds it.\nwindow.io = require('socket.io-client')\n\nVue.config.productionTip = false\n\nVue.use(LoadScript)\nVue.loadScript('./date_helpers.js')\n\n// loadComponentsFromDir loads all .vue files in a specific directory and returns a map of\n// their PascalCased names to their component definition (the default object being exported).\nfunction loadComponentsFromDir(requireComponent) {\n  return Object.fromEntries(\n    requireComponent.keys().map(fileName => {\n      // Load the component module\n      const componentConfig = requireComponent(fileName)\n      // Get PascalCase name of component\n      const baseName = fileName.split(\"/\").pop().replace(/\\.\\w+$/, '')\n      // Transform to PascalCase\n      let componentName = baseName.replace(/-\\w/g, s=>{return s[1].toLocaleUpperCase()})\n      componentName = componentName[0].toLocaleUpperCase() + componentName.substr(1)\n      // Register component globally\n      Vue.component(componentName, componentConfig.default || componentConfig)\n      console.log(`Imported ${componentName} globally from ${fileName}`)\n      return [ componentName, componentConfig.default ]\n    })\n  )\n}\n// Globally register all widgets from /src/widgets/*.vue and all grids from /src/grids/*.vue\n// 'cause they get instantiated dynamically in various places.\n// It's debatable whether this might be better done locally in the grid and widget components...\n// From https://vuejs.org/v2/guide/components-registration.html\nconst requireWidgets = require.context(\"./widgets\", true /*recursive*/, /\\S+\\.vue$/)\nwindow.widgetPalette = loadComponentsFromDir(requireWidgets)\nconst requireGrids = require.context(\"./grids\", true /*recursive*/, /\\S+\\.vue$/)\nwindow.gridPalette = loadComponentsFromDir(requireGrids)\n\nnew Vue({\n  vuetify,\n\n  // Hack some global variable(s) into Vue so all components can refer to them as this.$root.xxx\n  data: { // https://stackoverflow.com/questions/51275301/how-to-react-to-a-global-variable-with-vue\n    editMode: false,\n  },\n\n  // Provide the store to all components through the hierarchy\n  provide: {\n    $config: store.config,\n    $store: store,\n  },\n\n\n  render: h => h(Dash)\n}).$mount('#app')\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gauge-card d-flex\"},[_c('svg-gauge',_vm._b({style:(_vm.gauge_valign),attrs:{\"value\":_vm.value}},'svg-gauge',_vm.$props,false)),_c('div',{staticClass:\"gauge-card--label d-flex flex-column mx-auto\",class:_vm.txt_valign},[_c('v-card-text',{staticClass:\"gauge-value d-flex pa-0 width100\"},[_c('span',{staticClass:\"mx-auto\"},[_vm._v(_vm._s(_vm.valTxt)),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(_vm.unitTxt))])])]),(_vm.title)?_c('v-card-text',{staticClass:\"gauge-title d-flex pa-0\"},[_c('span',{staticClass:\"mx-auto\"},[_vm._v(_vm._s(_vm.title))])]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticClass:\"gauge\",attrs:{\"viewBox\":_vm.vbox,\"preserveAspectRatio\":_vm.ar}},[_c('circle',{staticClass:\"gauge-base\",attrs:{\"cx\":\"0\",\"cy\":\"0\",\"fill\":\"transparent\",\"r\":_vm.stroke_radius,\"stroke\":_vm.base_color,\"stroke-width\":_vm.stroke_width,\"transform\":_vm.xform,\"stroke-dasharray\":_vm.stroke_bdash}}),_c('circle',{staticClass:\"gauge-stroke\",attrs:{\"cx\":\"0\",\"cy\":\"0\",\"fill\":\"transparent\",\"r\":_vm.stroke_radius,\"stroke\":_vm.color,\"stroke-width\":_vm.stroke_width,\"transform\":_vm.xform,\"stroke-dasharray\":_vm.stroke_sdash}}),_c('line',{staticClass:\"gauge-needle\",attrs:{\"x1\":_vm.needle_start,\"y1\":0,\"x2\":100,\"y2\":0,\"stroke\":_vm.needle_color,\"stroke-width\":\"2\",\"transform\":_vm.nform}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- SvgGauge - very simple purse SVG gauge without any external dependencies (looking at you,\n     vue-svg-gauge...). The way the gauge is drawn is adapted from\n     https://www.fullstacklabs.co/blog/creating-an-svg-gauge-component-from-scratch\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <svg class=\"gauge\" :view-box.camel=\"vbox\" :preserve-aspect-ratio.camel=ar>\n    <circle class=\"gauge-base\" cx=0 cy=0 fill=\"transparent\"\n            :r=stroke_radius :stroke=base_color :stroke-width=stroke_width\n            :transform=xform :stroke-dasharray=stroke_bdash\n    />\n    <circle class=\"gauge-stroke\" cx=0 cy=0 fill=\"transparent\"\n            :r=stroke_radius :stroke=color :stroke-width=stroke_width\n            :transform=xform :stroke-dasharray=stroke_sdash\n    />\n    <line class=\"gauge-needle\" :x1=\"needle_start\" :y1=0 :x2=100 :y2=0 :stroke=\"needle_color\"\n          stroke-width=2 :transform=\"nform\"\n    />\n  </svg>\n</template>\n\n<script>\nexport default {\n  name: 'SvgGauge',\n\n  props: {\n    min: { type: Number, default: 0 }, // minimum value\n    max: { type: Number, default: 100 }, // maximum value\n    value: { type: Number, default: 30 }, // current value to show\n    color: { type: String, default: '--v-purple-base' },  // color of filled segment\n    base_color: { type: String, default: 'lightgrey' },  // color of unfilled segment\n    needle_color: { type: String, default: 'white' },  // color of needle\n    radius: { type: Number, default: 70 },  // inner radius, outer being 100\n    arc: { type: Number, default: 270 }, // number of degrees total for the ghauge arc\n    stretch: { type: Boolean, default: false },  // false: 2:1 aspect ratio, true: stretch\n  },\n\n  computed: {\n    frac() {\n      let frac = (this.value-this.min) / (this.max-this.min)\n      return Math.min(1, Math.max(0, frac))\n    },\n    stroke_width() { return 100 - this.radius },\n    stroke_radius() { return 100 - this.stroke_width/2 },\n    needle_start() { return 100 - 1.25 * this.stroke_width },\n    circumference() { return this.stroke_radius * 2 * Math.PI },\n    stroke_bdash() {\n      let arc_length = this.arc * this.circumference / 360\n      return `${arc_length} ${this.circumference}`\n    },\n    stroke_sdash() {\n      let arc_length = this.arc * this.frac * this.circumference / 360\n      return `${arc_length} ${this.circumference}`\n    },\n    xform() { return `rotate(${270 - this.arc/2}, 0, 0)` },\n    nform() { return `rotate(${270 - this.arc/2 + this.arc*this.frac}, 0, 0)` },\n    ar() { return this.stretch ? 'none' : 'xMidYMid' },\n    vbox() {\n      let r = this.arc >= 180 ? 100 : this.needle_start\n      let a = (this.arc-180)/2*Math.PI/180\n      let ysz = 100 + r * Math.sin(a)\n      let xsz = this.arc >= 180 ? 200 : 200 * Math.cos(a)\n      return `-${xsz/2} -100 ${xsz} ${ysz}`\n    },\n  },\n}\n</script>\n\n<!-- Style commented out: it's better done in the wrapper. Left as comment as a reminder.\n<style scoped>\n  svg.gauge { padding: 0.5ex; width:100%; height: 100%; }\n</style>\n-->\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./svg-gauge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./svg-gauge.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./svg-gauge.vue?vue&type=template&id=6c8202a0&\"\nimport script from \"./svg-gauge.vue?vue&type=script&lang=js&\"\nexport * from \"./svg-gauge.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!-- Gauge is a simple wrapper around the svg-gauge component.\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <div class=\"gauge-card d-flex\">\n    <svg-gauge v-bind=\"$props\" :value=\"value\" :style=\"gauge_valign\"></svg-gauge>\n    <div class=\"gauge-card--label d-flex flex-column mx-auto\" :class=\"txt_valign\">\n      <v-card-text class=\"gauge-value d-flex pa-0 width100\">\n        <span class=\"mx-auto\">{{valTxt}}<span class=\"unit\">{{unitTxt}}</span></span>\n      </v-card-text>\n      <v-card-text v-if=\"title\" class=\"gauge-title d-flex pa-0\">\n        <span class=\"mx-auto\">{{title}}</span>\n      </v-card-text>\n    </div>\n  </div>\n</template>\n\n<script scoped>\nimport SvgGauge from '../components/svg-gauge';\n\nexport default {\n  name: 'Gauge',\n\n  components: {\n    SvgGauge,\n  },\n\n  props: {\n    value: { type: Number, default: null }, // current value to show\n    unit: { type: String, default: \"\" },\n    title: { type: String, default: \"Gauge\" },\n    arc: { type: Number, default: 90,  // degrees spanned by the arc of the gauge\n           validator: (v) => v>10 && v<=360 },\n    center: { type: Boolean, default: false }, // center the text in the gauge, else bottom\n    //\n    min: { type: Number, default: 0 }, // minimum value\n    max: { type: Number, default: 100 }, // maximum value\n    color: { type: String, default: 'green' },  // color of filled segment\n    base_color: { type: String, default: 'lightgrey' },  // color of unfilled segment\n    needle_color: { type: String, default: 'white' },  // color of needle\n    radius: { type: Number, default: 70 },  // inner radius, outer being 100\n    stretch: { type: Boolean, default: false },  // false: 2:1 aspect ratio, true: stretch\n  },\n\n  computed: {\n    txt_valign() {\n      let ctr = this.center !== null ? this.center : !(this.arc < 200)\n      return ctr ? \"my-auto\" : \"mt-auto\"\n    },\n    gauge_valign() { return this.arc < 180 ? \"height:auto;\" : \"\" },\n    unitTxt() { return this.value === \"--\" ? \"\" : this.unit; },\n    valTxt() {\n      if (typeof this.value == 'number') return Math.round(this.value*10.0)/10.0\n      else if (this.value === null) return \"--\"\n      else return this.value\n    },\n  },\n}\n</script>\n\n<style scoped>\n  div.gauge-card { padding: 0.5ex; width:100%; height: 100%; }\n  div.gauge-card svg {\n    width: 100%; height: 100%;\n    z-index: 1; position: absolute; padding: 0.5ex; top: 0ex; left: 0ex; box-sizing: border-box;\n  }\n  div.gauge-card--label div { z-index: 2; position: relative; }\n  div.gauge-card--label span { margin-bottom: -0.5ex; }\n\n/* need to incorporate this for large gauges\n.gauge-large .gauge-value { line-height: 3rem; font-size: 2rem; }\n.gauge-large .gauge-title { line-height: 1.5rem; font-size: 1rem; }\n*/\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gauge.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gauge.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./gauge.vue?vue&type=template&id=d0e2edf8&scoped=true&\"\nimport script from \"./gauge.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./gauge.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./gauge.vue?vue&type=style&index=0&id=d0e2edf8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d0e2edf8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCardText } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCardText})\n","var map = {\n\t\"./gauge.vue\": \"58a3\",\n\t\"./markdown.vue\": \"5078\",\n\t\"./push-button.vue\": \"63e2\",\n\t\"./sparkchart.vue\": \"1ec4\",\n\t\"./stat.vue\": \"254b\",\n\t\"./time-plot.vue\": \"6bc8\",\n\t\"./toggle.vue\": \"a9ef\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5a91\";","<!-- PushButton - Simple button that sends a message when clicked\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n<template>\n  <div class=\"pushbutton d-flex\">\n    <v-tooltip top :open-on-hover=\"!!tooltip\">\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn large dense class=\"ma-auto\" max-width=\"95%\"\n               v-bind=\"Object.assign(bindings, attrs)\" v-on=\"on\" @click=\"clickEv($event)\">\n          <v-icon :large=\"!title\"  v-if=\"icon\">mdi-{{icon}}</v-icon> <span>{{ title }}</span>\n        </v-btn>\n      </template>\n      <span v-if=\"tooltip\">{{ tooltip }}</span>\n    </v-tooltip>\n  </div>\n</template>\n\n<script scoped>\nmodule.exports = {\n  name: 'PushButton',\n\n  props: {\n    enabled: { default: true },\n    color: { default: \"primary\" },\n    output_value: { default: 25 },\n    icon: { default: null },\n    title: { default: 'Button' },\n    tooltip: { default: null },\n  },\n\n  computed: {\n    // actual bindings passed into v-btn\n    bindings() { return {\n      disabled: !this.enabled,\n      color: this.color,\n    }},\n\n  },\n\n  methods: {\n    clickEv(ev) {\n      console.log(\"PushButton event:\", ev)\n      this.$emit('send', this.output_value)\n    },\n  },\n\n}\n</script>\n\n<style scoped>\n.pushbutton { height: 100%; }\n</style>\n","import { render, staticRenderFns } from \"./push-button.vue?vue&type=template&id=68ce9d17&scoped=true&\"\nimport script from \"./push-button.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./push-button.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./push-button.vue?vue&type=style&index=0&id=68ce9d17&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68ce9d17\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VIcon,VTooltip})\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./dash.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"px-1\"},[_c('div',{staticStyle:{\"xx-background-color\":\"#eef\"}})])}]\n\nexport { render, staticRenderFns }","<!-- TimePlot shows a time-series plot based on uPlot. It is a thin wrapper around uPlot that\n     provides a web component, that deals with resizing, and that transposes the data coming in.\n\n     The options input has to be shaped the way uPlot expects it.\n     See https://github.com/leeoniya/uPlot/tree/master/docs\n\n     The data must be either an array of data points or a single data point. If an array is\n     provided then it replaces the entire dataset being shown. If a single point is provided\n     it is appended to the current dataset and an old data point may be rotated out.\n     A data point is an array consisting of a timestamp in unix epoch format, followed by a\n     value for each series. Note that this \"row-wise\" structure gets transposed to the \n     columnar structure expected by uPlot.\n\n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n\n<template>\n  <div class=\"px-1\">\n    <div style=\"xx-background-color:#eef;\">\n      <!-- uPlot is injected here -->\n    </div>\n  </div>\n</template>\n\n<script scoped>\n\n// 20 distinct colors from https://sashamaps.net/docs/resources/20-colors/ plus black&white\nvar colors = [\n'#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0',\n'#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8',\n'#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff', '#000000'];\n\nimport uPlot from 'uplot'\nimport 'uplot/dist/uPlot.min.css'\n\nexport default {\n  name: \"TimePlot\",\n\n  props: {\n    options: { type: Object, default() {return null} }, // options as uPlot expects\n    data: { // data in row-wise format\n      type: Array,\n      default() { return undefined },\n      validator(v) { return Array.isArray(v) && v.length },\n    },\n  },\n\n  data() { return {\n    chart: null, // uPlot object instance\n    ro: null, // resize observer\n    width: 40, // width in pixels\n    chart_data: null, // actual data fed to uPlot (i.e. transposed from data)\n    dark_watcher: null, // watcher on $vuetify.theme.dark\n  }; },\n\n  watch: {\n\n    options(/*options, prevOptions*/) {\n      console.log(\"Time-plot options changed\");\n      this._destroy();\n      // FIXME: should massage chart_data if the number of series has changed\n      this._create();\n    },\n\n    data(data, /*prevData*/) { // FIXME: do we need to check that the data is new?\n      //console.log(\"Time-plot data changed:\", data);\n      if (!data) return // handle init case where data is undefined\n      const replace = Array.isArray(data[0]) // replace entire dataset vs append\n\n      // if there's no chart yet, we need to create one\n      // recreate the chart if we are replacing all the data\n      if (!this.chart || !this.chart_data || replace) {\n        if (this.chart) this._destroy();\n        this.chart_data = this._transpose(replace ? data : [data])\n        this._create();\n\n      // we're getting one data point, so append to chart (need to transpose)\n      } else {\n        const num_series = this.chart_data.length\n        for (let i=0; i<num_series; i++)\n          this.chart_data[i].push(data[i])\n        // prune the data when it reaches 1/2 the number of pixels we got in width\n        const max = Math.max(this.width/2, 20)\n        while (this.chart_data[0].length > max) {\n          for (let i=0; i<num_series; i++)\n            this.chart_data[i].shift()\n        }\n        //console.log(`Time-plot data appended, got ${this.chart_data[0].length} rows, max:${max}`)\n        this.chart.setData(this.chart_data)\n      }\n    }\n  },\n\n  mounted() {\n    this._create();\n    this.ro = new ResizeObserver(this._onResize).observe(this.$el)\n    const self = this\n    this.dark_watcher = this.$watch(\n      ()=>self.$vuetify.theme.dark,\n      ()=>{ this._destroy(); this._create() })\n  },\n\n  beforeDestroy() {\n    console.log(\"BeforeDestroy uPlot\")\n    if (this.ro) this.ro.unobserve(this.$el)\n    this.ro = null;\n    this._destroy()\n    this.dark_watcher()\n  },\n\n  methods: {\n    _destroy() {\n      if (this.chart) {\n        console.log(\"Destroying uPlot\")\n        this.chart.destroy()\n        this.chart = null\n      }\n    },\n\n    _calcSize() {\n      let width = this.options.width || this.$el.children[0].clientWidth\n      let height = this.options.height || (width / (this.options.aspect || 2))\n      console.log(`Time-plot container sized to ${width}x${height}`)\n      this.width = width\n      return { width: width, height: height }\n    },\n\n    // receive resize event and change the size of the chart if necessary\n    _onResize() {\n      if (!this.chart) return;\n      this.chart.setSize(this._calcSize());\n    },\n\n    _transpose(data) {\n      if (!data || data.length == 0) return []\n      if (!data[0].map) debugger; //eslint-disable-line\n      let tr = data[0].map(() => Array(data.length))\n      data.forEach((d, i) => {\n        d.forEach((v, j) => {\n          tr[j][i] = v\n        })\n      })\n      return tr\n    },\n\n    _create() {\n      const self = this\n      console.log(\"Creating uPlot\");\n      if (!this.chart_data || this.chart_data.length === 0) return;\n\n      // provide some reasonable defaults for the options\n      let opts = JSON.parse(JSON.stringify(this.options)); // deep clone and w/out reactivity\n      Object.assign(opts, this._calcSize());\n\n      // we need to declare the series for them to show\n      if (!opts.series) opts.series = [];\n      while (opts.series.length < this.chart_data.length) opts.series.push({});\n      opts.series.forEach(function(s, i) {\n        if (!s.label) s.label = i ? (\"series \"+i) : \"time\";\n        if (i) {\n          if (!s.stroke) s.stroke = colors[(i-1)%20];\n          if (!s.width) s.width = 2;\n          if (typeof s.value === 'string')\n            s.value = new Function('u', 'v', `\"use strict\";return (${s.value})`);\n        }\n        if (self.$vuetify.theme.dark) {\n          if (!s.points) s.points = {}\n          if (!s.points.fill) s.points.fill = '#1e1e1e'\n        }\n      });\n      \n      // fix-up axes\n      if (!opts.axes || opts.axes.length < 2) opts.axes = [{}, {}] // x axis and y axis minimum\n      opts.axes.forEach((ax) => {\n        // values can be a function to format the values\n        if (ax.values && typeof ax.values === 'string')\n          ax.values = new Function('u', 'vv', 's', `\"use strict\";return (${ax.values})`);\n        //if (!ax.labelFont) ax.labelFont = \"12px Roboto\"\n        //if (!ax.font) ax.font = \"20px Roboto\"\n        if (self.$vuetify.theme.dark) {\n          // make dark mode work\n          if (!ax.grid) ax.grid = {}\n          if (!ax.grid.stroke) ax.grid.stroke = '#444'\n          if (!ax.stroke) ax.stroke = '#ccc'\n        }\n      });\n\n      // eval scale range function, if provided\n      Object.values(opts.scales||{}).forEach((s) => {\n        if (s.range && typeof s.range === 'string')\n          s.range = new Function('u', 'min', 'max', `\"use strict\";return (${s.range})`);\n      });\n\n      console.log(\"uPlot options:\", opts);\n      this.chart = new uPlot(opts, this.chart_data, this.$el.children[0]);\n    },\n\n  },\n}\n</script>\n\n<style>\n.u-legend .u-label, .u-legend th::after, .u-legend .u-value {\n  font: 0.75rem Roboto;\n  vertical-align: bottom !important;\n}\n/* hacks for when the legend runs over */\n.v-card.theme--light table.u-legend { background-color: #fff; }\n.v-card.theme--dark table.u-legend { background-color: #1e1e1e; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./time-plot.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./time-plot.vue?vue&type=script&scoped=true&lang=js&\"","import { render, staticRenderFns } from \"./time-plot.vue?vue&type=template&id=7540a408&\"\nimport script from \"./time-plot.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./time-plot.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./time-plot.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./push-button.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./push-button.vue?vue&type=script&scoped=true&lang=js&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stat.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stat.vue?vue&type=script&scoped=true&lang=js&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-edit.vue?vue&type=style&index=0&id=f8f39ca8&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./toggle.vue?vue&type=template&id=57b838a8&\"\nimport script from \"./toggle.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./toggle.vue?vue&type=script&scoped=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\ninstallComponents(component, {VSwitch})\n","var map = {\n\t\"./fixed-grid.vue\": \"322f\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"ac25\";","<!-- Sparkline showing recent data points. If sent a value it shifts it into its data array and\n     rotates out an old one. If sent an array, it replaces its data by that array and uses the\n     length \n     Copyright 2021 Thorsten von Eicken, MIT license, see LICENSE file\n-->\n<template>\n<div style=\"width:100%; \">\n  <v-sparkline v-bind=\"bindings\" ref=\"sparkl\">\n  </v-sparkline>\n</div>\n</template>\n\n<script scoped>\nmodule.exports = {\n  name: 'Sparkchart',\n\n  props: {\n    value: { default: 0 },\n    color: { type: String, default: \"blue\" },\n    fill: { type: Boolean, default: false },\n    line_width: { type: Number, default: 4 },\n    bars: { type: Boolean, default: false },\n  },\n\n  data() { return {\n    data: [], // Array(20), // data actually displayed in sparkline\n    //data: [ 30, 32, 30, 40, 35, 45, 40, 0, 50, 55, 60, 55, 70, 80, 70, 45, 90, 85, 60, 70 ],\n    ro: null, // resize observer\n    height: 10, // height, adjusted using resize observer\n    width: 20, // width, adjusted using resize observer\n  }},\n\n  computed: {\n    bindings() {\n      return {\n        color: this.color,\n        fill: this.fill,\n        lineWidth: this.line_width,\n        padding: this.line_width,\n        value: this.data,\n        type: this.bars ? 'bar' : 'trend',\n        autoLineWidth: !!this.bars,\n        height: this.height,\n        width: this.width,\n      }\n    },\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      // sometimes the offsetParent is null, dunno whether that's a persistent problem or not...\n      // it seems to happen when switching away from the tab with the sparkchart\n      if (!this.$el.offsetParent) { console.log(\"sparkshart oops1\"); return }\n      this.ro = new ResizeObserver(this._onResize).observe(this.$el.offsetParent)\n    })\n  },\n  beforeUnmount() {\n    if (this.ro) this.ro.unobserve(this.$el.offsetParent)\n  },\n\n  watch: {\n    // watch the values coming in, if we get a number, append to array, if we get an array,\n    // use that as data\n    value(v) {\n      if (typeof v === 'number' || v === null) {\n        this.data.push(v)\n        while (this.data.length > 20) this.data.shift()\n      } else if (Array.isArray(v)) {\n        this.data = v\n      }\n    },\n\n  },\n\n  methods: {\n    // receive resize event and change the height of the chart if necessary\n    _onResize() {\n      // sometimes the offsetParent is null, dunno whether that's a persistent problem or not...\n      if (!this.$el.offsetParent) { console.log(\"sparkchart oops2\"); return }\n      this.height = this.$el.offsetParent.clientHeight - this.$el.offsetTop\n      this.width = this.$el.offsetParent.clientWidth\n      console.log(\"_onResize\", this.color, \"Height:\", this.height)\n    },\n\n  },\n\n}\n</script>\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fixed-grid.vue?vue&type=style&index=0&id=75d0743c&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gauge.vue?vue&type=style&index=0&id=d0e2edf8&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fixed-grid.vue?vue&type=style&index=1&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\"}},[_c('v-sparkline',_vm._b({ref:\"sparkl\"},'v-sparkline',_vm.bindings,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widget-wrap.vue?vue&type=style&index=0&id=647c50c6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pushbutton d-flex\"},[_c('v-tooltip',{attrs:{\"top\":\"\",\"open-on-hover\":!!_vm.tooltip},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ma-auto\",attrs:{\"large\":\"\",\"dense\":\"\",\"max-width\":\"95%\"},on:{\"click\":function($event){return _vm.clickEv($event)}}},'v-btn',Object.assign(_vm.bindings, attrs),false),on),[(_vm.icon)?_c('v-icon',{attrs:{\"large\":!_vm.title}},[_vm._v(\"mdi-\"+_vm._s(_vm.icon))]):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.title))])],1)]}}])},[(_vm.tooltip)?_c('span',[_vm._v(_vm._s(_vm.tooltip))]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* global Vue */\n/*\n  Copyright (c) 2017-2021 Julian Knight (Totally Information)\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n  http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n/**\n * This is the Front-End JavaScript for uibuilder\n * It provides a number of global objects that can be used in your own javascript.\n * @see the docs folder `./docs/uibuilderfe-js.md` for details of how to use this fully.\n * \n * Please use the default index.js file for your own code and leave this as-is.\n */\n\n'use strict'\n\n// @since 2017-10-17 CL: tell webpack that we need socket.io client if running from webpack build\nif (typeof require !== 'undefined'  &&  typeof io === 'undefined') {\n    var io = require('socket.io-client')\n}\n\n/** Create a single global using \"new\" with an anonymous function\n * ensures that everything is isolated and only what is returned is accessible\n * Isolate everything\n **/\n(function () {\n    //#region --- Type Defs --- //\n    /**\n     * @typedef {Object} _auth The standard auth object used by uibuilder security. See docs for details.\n     * Note that any other data may be passed from your front-end code in the _auth.info object.\n     * _auth.info.error, _auth.info.validJwt, _auth.info.message, _auth.info.warning\n     * @property {String} id Required. A unique user identifier.\n     * @property {String} [password] Required for login only.\n     * @property {String} [jwt] Required if logged in. Needed for ongoing session validation and management.\n     * @property {Number} [sessionExpiry] Required if logged in. Milliseconds since 1970. Needed for ongoing session validation and management.\n     * @property {boolean} [userValidated] Required after user validation. Whether the input ID (and optional additional data from the _auth object) validated correctly or not.\n     * @property {Object=} [info] Optional metadata about the user.\n     */\n    /**\n     * A string containing HTML markup\n     * @typedef {string} html\n     */\n    //#endregion --- Type Defs --- //\n\n    // Keep a copy of the starting context\n    var root = this\n    // Keep a copy of anything with a clashing name in the starting context\n    var previous_uibuilder = root.uibuilder\n\n    // Create a function with specific \"this\" context - this is the main code\n    // @since 2017-10-14 Replaced \"new (function(){})\" with \"(function(){}).call(root)\"\n    var uibuilder = (function () {\n        // Remember that things have to be defined *before* they are referenced\n\n        // Define polyfill for endsWith for IE\n        if (!String.prototype.endsWith) {\n            String.prototype.endsWith = function(suffix) {\n                return this.indexOf(suffix, this.length - suffix.length) !== -1\n            }\n        }\n\n        /** @type {Object} */\n        var self = this\n\n        //#region ======== Start of setup ======== //\n\n        self.version = '3.3.0'\n        self.debug = false // do not change directly - use .debug() method\n        self.moduleName  = 'uibuilder' // Must match moduleName in uibuilder.js on the server\n        // @ts-expect-error ts(2345) Tests loaded ver of lib to see if minified \n        self.isUnminified = /param/.test(function(param) {}) // eslint-disable-line no-unused-vars\n        /** Empty User info template\n         * @type {_auth} */\n        self.dummyAuth = {\n            id: null,\n            jwt: undefined,\n            sessionExpiry: undefined,\n            userValidated: false,\n            info: {\n                error: undefined,\n                message: undefined,\n                validJwt: undefined,\n            },\n        }\n        /** Retained User info\n         * @type {_auth|undefined} */\n        self._auth = undefined\n        /** Flag to know whether `uibuilder.start()` has been run */\n        self.started = false\n\n        /** Debugging function\n         * @param {string} type One of log|error|warn|info|dir, etc\n         * @param {...*} msg Msg(s) to send to console\n         * WARNING: ...args is ES6, it doesn't work on IE11\n         * @since 2019-02-01 Apply any number of args\n         */\n        //self.uiDebug = function (type, ...args) {\n        self.uiDebug = function () {\n            if (!self.debug) return\n\n            var type = arguments[0]\n\n            /** @since v2.0.0-dev3 2019-05-27 changed from ...apply(undefined,...) to ...apply(console,...) Fixes Issue #49 */\n            //console[type](...args)\n            console[type].apply(console, [].slice.call(arguments, 1))\n\n        } // --- End of debug function --- //\n\n        /** Returns the self object if debugging otherwise just the current version\n         * @return {object|string} Returns self or version\n        */\n        self.me = function() {\n            return self.debug === true ? self : 'uibuilderfe.js Version: ' + self.version\n        }\n\n        self.uiDebug('log', '\\nuibuilderfe: Debug? ', self.debug, '\\n\\t\\tVersion? ', self.version, '\\n\\t\\tRunning Packed version? ', !self.isUnminified, '\\n ')\n\n\n        /** Try to get the Socket.IO namespace from the current URL - won't work if page is in a sub-folder\n         * @since 2017-10-21 Improve method to cope with more complex paths - thanks to Steve Rickus @shrickus\n         * @since 2017-11-10 v1.0.1 Check cookie first then url. cookie works even if the path is more complex (e.g. sub-folder)\n         * @since 2020-01-25 Removed httpRoot from namespace to prevent proxy induced errors\n         * @return {string} Socket.IO namespace\n         */\n        self.setIOnamespace = function () {\n\n            var ioNamespace = ''\n\n            /** Try getting the namespace cookie. \n             * @since 2020-01-25 Changed to allow for duplicate cookies */\n            try {\n                ioNamespace = document.cookie.match(/uibuilder-namespace\\s*=.*?\\s*;/g)[0].replace('uibuilder-namespace=','').replace(';','')\n            // eslint-disable-next-line no-empty\n            } catch(e) {}\n\n            // if it wasn't available, try using the current url path\n            if (ioNamespace === '' ) {\n                // split url path & eliminate any blank elements, and trailing or double slashes\n                var u = window.location.pathname.split('/').filter(function(t) { return t.trim() !== '' })\n\n                /** @since v2.0.5 Extra check for 0 length, Issue #73. @since 2017-11-06 If the last element of the path is an .html file name, remove it */\n                if (u.length > 0) if (u[u.length - 1].endsWith('.html')) u.pop()\n\n                // Get the last part of the url path, this MUST match the namespace in uibuilder\n                ioNamespace = u.pop()\n\n                self.uiDebug('log', 'uibuilderfe: IO Namespace - Found via url path: ' + ioNamespace)\n            } else {\n                self.uiDebug('log', 'uibuilderfe: IO Namespace - Found via cookie: ' + ioNamespace)\n            }\n\n            // Namespace HAS to start with a /\n            ioNamespace = '/' + ioNamespace\n\n            self.uiDebug('log', 'uibuilderfe: IO Namespace: ' + ioNamespace)\n\n            return ioNamespace\n        } // --- End of set IO namespace --- //\n\n        //#region --- variables ---\n\n        /** Writable (via custom method. read via .get method) */\n        /** Automatically send a \"ready for content\" control message on window.load\n         * Set to false if you want to send this yourself (e.g. when Riot/Moon/etc mounted event triggered)\n         * see .autoSendReady method\n         */\n        self.autoSendReady= true\n\n        /** Externally Writable (via .set method, read via .get method) */\n        self.allowScript  = true   // Allow incoming msg to contain msg.script with JavaScript that will be automatically executed\n        self.allowStyle   = true   // Allow incoming msg to contain msg.style with CSS that will be automatically executed\n        self.removeScript = true   // Delete msg.code after inserting to DOM if it exists on incoming msg\n        self.removeStyle  = true   // Delete msg.style after inserting to DOM if it exists on incoming msg\n\n        /** Externally read-only (via .get method) */\n        self.msg          = {}\n        self.ctrlMsg      = {}  // copy of last control msg object received from sever\n        self.sentMsg      = {}  // copy of last msg object sent via uibuilder.send()\n        self.sentCtrlMsg  = {}  // copy of last control msg object sent via uibuilder.send() @since v2.0.0-dev3\n        self.msgsSent     = 0   // track number of messages sent to server since page load\n        self.msgsReceived = 0   // track number of messages received from server since page load\n        self.msgsSentCtrl = 0   // track number of control messages sent to server since page load\n        self.msgsCtrl     = 0   // track number of control messages received from server since page load\n        self.ioConnected  = false\n        self.serverTimeOffset = null // placeholder to track time offset from server, see fn self.socket.on(self.ioChannels.server ...)\n        self.isAuthorised = false    // Set to true if receive 'authorised' msg from server\n        self.authTokenExpiry  = null // Set on successful logon. Timestamp.\n        self.authData     = {}       // Additional data returned from logon/logoff requests\n\n        // ---- These are unlikely to be needed externally: ----\n        self.ioChannels   = { control: 'uiBuilderControl', client: 'uiBuilderClient', server: 'uiBuilder' }\n        self.retryMs      = 2000                            // starting retry ms period for manual socket reconnections workaround\n        self.retryFactor  = 1.5                             // starting delay factor for subsequent reconnect attempts\n        self.timerid      = null\n        self.ioNamespace  = self.setIOnamespace()           // Get the namespace from the current URL\n        self.ioTransport  = ['polling', 'websocket']\n        self.loaded       = false                           // Are all browser resources loaded?\n\n        // ---- These cannot be access externally via get/set: ----\n        self.authToken    = ''    // populated when receive 'authorised' msg from server, must be returned with each msg sent\n\n        //#region - Try to make sure client uses Socket.IO version from the uibuilder module (using path) @since v2.0.0 2019-02-24 allows for httpNodeRoot\n        // split current url path, eliminate any blank elements and trailing or double slashes\n        var fullPath = window.location.pathname.split('/').filter(function(t) { return t.trim() !== '' })\n        /** handle url includes file name - @since v2.0.5 Extra check for 0 length, Issue #73. */\n        if (fullPath.length > 0) if (fullPath[fullPath.length - 1].endsWith('.html')) fullPath.pop()\n        self.url = fullPath.pop() // not actually used and only gives the last path section of the url anyway\n        self.httpNodeRoot = '/' + fullPath.join('/')\n        self.ioPath       = urlJoin(self.httpNodeRoot, self.moduleName, 'vendor', 'socket.io')\n        self.uiDebug('debug', 'uibuilderfe: ioPath: ' + self.ioPath + ', httpNodeRoot: ' + self.httpNodeRoot + ', uibuilder url (not used): ' + self.url)\n        //#endregion\n\n        //#endregion --- variables ---\n\n        //#region --- internal functions --- //\n\n        /** Function to set uibuilder properties to a new value - works on any property - see uiReturn.set also for external use\n         * Also triggers any event listeners.\n         * Example: self.set('msg', {topic:'uibuilder', payload:42});\n         * @param {string} prop\n         * @param {*} val\n         */\n        self.set = function (prop, val) {\n            self[prop] = val\n            //self.uiDebug('debug', `uibuilderfe: prop set - prop: ${prop}, val: ${(typeof val === 'object') ? JSON.stringify(val) : val}` )\n            self.uiDebug('debug', 'uibuilderfe: prop set - prop: ' + prop + ', val: ' + ((typeof val === 'object') ? JSON.stringify(val) : val) )\n\n            // Trigger this prop's event callbacks (listeners)\n            self.emit(prop, val)\n\n            //self.uiDebug('debug', `uibuilderfe:uibuilder:set Property: ${prop}, Value: ${val}`)\n        }\n\n        /** Function used to check whether Socket.IO is connected to the server, reconnect if not (recursive)\n         * @param {number} delay Initial delay before checking (ms)\n         * @param {number} factor Multiplication factor for subsequent checks (delay*factor)\n         */\n        self.checkConnect = function (delay, factor) {\n            var depth = depth++ || 1\n\n            //self.uiDebug('debug', `uibuilderfe:checkConnect. Reconnect - Depth: ${depth}, Delay: ${delay}, Factor: ${factor}`)\n            self.uiDebug('debug', 'uibuilderfe:checkConnect. Reconnect - Depth: ' + depth + ', Delay: ' + delay + ', Factor: ' + factor, self.ioNamespace, self.ioPath)\n\n            // we only want one running at a time\n            if (self.timerid) window.clearTimeout(self.timerid)\n\n            // Create the new timer\n            self.timerid = window.setTimeout(function () {\n                //self.uiDebug('debug', `uibuilderfe:checkConnect timeout. SIO reconnect attempt, timeout: ${delay}, depth: ${depth}`)\n                self.uiDebug('debug', 'uibuilderfe:checkConnect timeout. SIO reconnect attempt, timeout: ' + delay + ', depth: ' + depth, self.ioNamespace, self.ioPath)\n                console.info('[uibuilderfe:checkConnect:setTimeout] Socket.IO reconnection attempt. Current delay: ' + delay)\n                \n                // this is necessary sometimes when the socket fails to connect on startup\n                self.socket.close()\n\n                // Try to reconnect\n                self.socket.connect()\n\n                // don't need to check whether we have connected as the timer will have been cleared if we have\n                self.timerid = null\n\n                // Create new timer for next time round with extended delay\n                self.checkConnect(delay * factor, factor)\n            }, delay)\n        } // --- End of checkConnect Fn--- //\n\n        /** Check supplied msg from server for a timestamp - if received, work out & store difference to browser time\n         * @param {Object} receivedMsg A message object recieved from Node-RED\n         * @returns {void} Updates self.serverTimeOffset if different to previous value\n         */\n        self.checkTimestamp = function (receivedMsg) {\n            if ( receivedMsg.hasOwnProperty('serverTimestamp') ) {\n                var serverTimestamp = new Date(receivedMsg.serverTimestamp)\n                // @ts-ignore\n                var offset = Math.round( ( (new Date()) - serverTimestamp ) / 3600000 ) // in ms / 3.6m to get hours\n                if ( offset !== self.serverTimeOffset ) {\n                    self.set('serverTimeOffset', offset )\n                    self.uiDebug('log', 'uibuilderfe:' + self.ioChannels.server + ' (server): Offset changed to: ' + offset )\n                }\n            }\n        }\n\n        /** Setup Socket.io\n         * @since v2.0.0-beta2 Moved to a function and called by the user (uibuilder.start()) so that namespace & path can be passed manually if needed\n         * @returns {void} Attaches socket.io manager to self.socket and updates self.ioNamespace & self.ioPath as needed\n         */\n        self.ioSetup = function () {\n\n            // Create the socket - make sure client uses Socket.IO version from the uibuilder module (using path)\n            self.uiDebug('debug', 'uibuilderfe:ioSetup: About to create IO. Namespace: ' + self.ioNamespace + ', Path: ' + self.ioPath + ', Transport: [' + self.ioTransport.join(', ') + ']')\n            self.socketOptions = { \n                path: self.ioPath, \n                transports: self.ioTransport, \n                transportOptions: {\n                    // Can only set headers when polling\n                    polling: {\n                        extraHeaders: {\n                            'x-clientid': 'uibuilderfe',\n                            //Authorization: 'test', //TODO: Replace with self.jwt variable? // Authorization: `Bearer ${your_jwt}`\n                        }\n                    },\n                },\n            }\n            self.socket = io(self.ioNamespace, self.socketOptions)\n\n            /** When the socket is connected - set ioConnected flag and reset connect timer  */\n            self.socket.on('connect', function () {\n                self.uiDebug('info', 'uibuilderfe:ioSetup: SOCKET CONNECTED - Namespace: ' + self.ioNamespace, ' Server Channel: ', self.ioChannels.server, ' Control Channel: ', self.ioChannels.control)\n\n                self.set('ioConnected', true)\n\n                // Reset any reconnect timers\n                if (self.timerid) {\n                    window.clearTimeout(self.timerid)\n                    self.timerid = null\n                }\n\n            }) // --- End of socket connection processing ---\n\n            // RECEIVE When Node-RED uibuilder node sends a msg over Socket.IO to us ...\n            self.socket.on(self.ioChannels.server, function (receivedMsg) {\n                self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.server + ' (server): msg received - Namespace: ' + self.ioNamespace, receivedMsg)\n\n                // Make sure that msg is an object & not null\n                receivedMsg = makeMeAnObject(receivedMsg, 'payload')\n\n                // @since 2018-10-07 v1.0.9: Work out local time offset from server\n                self.checkTimestamp(receivedMsg)\n\n                // Update _auth if needed\n                if ( receivedMsg._auth ) self.updateAuth(receivedMsg._auth)\n\n                // If the msg contains a code property (js), insert to DOM, remove from msg if required\n                if ( self.allowScript && receivedMsg.hasOwnProperty('script') ) {\n                    self.newScript(receivedMsg.script)\n                    if ( self.removeScript ) delete receivedMsg.script\n                }\n                // If the msg contains a style property (css), insert to DOM, remove from msg if required\n                if ( self.allowStyle && receivedMsg.hasOwnProperty('style') ) {\n                    self.newStyle(receivedMsg.style)\n                    if ( self.removeStyle ) delete receivedMsg.style\n                }\n\n                // Save the msg for further processing\n                self.set('msg', receivedMsg)\n\n                // Track how many messages have been received\n                self.set('msgsReceived', self.msgsReceived + 1)\n\n                /** Test auto-response - not really required but useful when getting started **/\n                /* if (self.debug) {\n                    self.send({payload: 'From: uibuilderfe - we got a message from you, thanks', origMsg: receivedMsg})\n                } */\n\n            }) // -- End of websocket receive DATA msg from Node-RED -- //\n\n            // RECEIVE a CONTROL msg from Node-RED - see also sendCtrl()\n            self.socket.on(self.ioChannels.control, function (receivedCtrlMsg) {\n                self.uiDebug('debug', 'uibuilder:ioSetup:' + self.ioChannels.control + ' (control): msg received - Namespace: ' + self.ioNamespace, receivedCtrlMsg)\n\n                // Make sure that msg is an object & not null\n                if (receivedCtrlMsg === null) {\n                    receivedCtrlMsg = {}\n                } else if (typeof receivedCtrlMsg !== 'object') {\n                    var msg = {}\n                    msg['uibuilderCtrl:'+self.ioChannels.control] = receivedCtrlMsg\n                    receivedCtrlMsg = msg\n                }\n\n                // Allow incoming control msg to change debug state (usually on the connection msg)\n                if ( receivedCtrlMsg.hasOwnProperty('debug') ) self.debug = receivedCtrlMsg.debug\n\n                // @since 2018-10-07 v1.0.9: Work out local time offset from server\n                self.checkTimestamp(receivedCtrlMsg)\n\n                self.set('ctrlMsg', receivedCtrlMsg)\n                self.set('msgsCtrl', self.msgsCtrl + 1)\n\n                /** Process control msg types */\n                switch(receivedCtrlMsg.uibuilderCtrl) {\n                    // Initial startup msg from Node-RED server\n                    case 'ready for content':\n                        if ( receivedCtrlMsg._auth ) self.updateAuth(receivedCtrlMsg._auth)\n\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"ready for content\" from server')\n\n                        break\n\n                    // Node-RED is shutting down\n                    case 'shutdown':\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"shutdown\" from server')\n                        self.set('serverShutdown', undefined)\n                        break\n\n                    // We are connected to the server\n                    case 'client connect':\n                        if ( receivedCtrlMsg._auth ) self.updateAuth(receivedCtrlMsg._auth)\n\n                        if ( self.autoSendReady === true ) {\n                            self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"client connect\" from server, auto-sending REPLAY control msg')\n\n                            // @since 0.4.8c Add cacheControl property for use with node-red-contrib-infocache\n                            self.send({\n                                'uibuilderCtrl':'ready for content',\n                                'cacheControl':'REPLAY',\n                            },self.ioChannels.control)\n                        }\n\n                        break\n\n                    // Login was accepted by the Node-RED server - note that payload may contain more info\n                    case 'authorised':\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"authorised\" from server')\n                        if ( receivedCtrlMsg._auth ) {\n                            self.updateAuth(receivedCtrlMsg._auth)\n                        } else {\n                            // This should never happen\n                            self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"authorised\" from server but without a _auth property - logon failed')\n                            self.markLoggedOut('Logon succeeded but no _auth received, logged out')\n                        }\n                        break\n\n                    // Login was rejected by the Node-RED server - note that payload may contain more info\n                    case 'authorisation failure':\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"authorisation failure\" from server')\n                        self.markLoggedOut('Logon authorisation failure', receivedCtrlMsg._auth.authData)\n                        break\n\n                    // Logoff confirmation from server - note that payload may contain more info\n                    case 'logged off':\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"logged off\" from server')\n                        self.markLoggedOut('Logged off by logout() request', receivedCtrlMsg._auth)\n                        break\n\n                    default:\n                        self.uiDebug('debug', 'uibuilderfe:ioSetup:' + self.ioChannels.control + ' Received \"' + receivedCtrlMsg.uibuilderCtrl + '\" from server')\n                        if ( receivedCtrlMsg._auth ) self.updateAuth(receivedCtrlMsg._auth)\n                        // Anything else\n\n                } // ---- End of process control msg types ---- //\n\n                /* Test auto-response\n                    if (self.debug) {\n                        self.send({payload: 'We got a control message from you, thanks'})\n                    }\n                // */\n\n            }) // -- End of websocket receive CONTROL msg from Node-RED -- //\n\n            // When the socket is disconnected ..............\n            self.socket.on('disconnect', function (reason) {\n                // reason === 'io server disconnect' - redeploy of Node instance\n                // reason === 'transport close' - Node-RED terminating\n                // reason === 'ping timeout' - didn't receive a pong response?\n                self.uiDebug('info', 'uibuilderfe:ioSetup: SOCKET DISCONNECTED - Namespace: ' + self.ioNamespace + ', Reason: ' + reason)\n\n                self.set('ioConnected', false)\n\n                console.warn('[uibuilderfe:socket-disconnect] Reason: ' + reason)\n\n                /** A workaround for SIO's failure to reconnect after a disconnection */\n                self.checkConnect(self.retryMs, self.retryFactor)\n            }) // --- End of socket disconnect processing ---\n\n            // Socket.io connection error - probably the wrong ioPath\n            self.socket.on('connect_error', function(err) {\n                self.uiDebug('error', 'uibuilderfe:ioSetup: SOCKET CONNECT ERROR - Namespace: ' + self.ioNamespace + ' ioPath: ' + self.ioPath + ', Reason: ' + err.message)\n                //console.dir(err)\n            }) // --- End of socket connect error processing ---\n            \n            // Socket.io error - from the server (socket.use middleware triggered an error response)\n            self.socket.on('error', function(err) {\n                self.uiDebug('warn', 'uibuilderfe:ioSetup: SOCKET ERROR from server - MESSAGE: ', err)\n                self.set('socketError', err)\n                //console.dir(err)\n            }) // --- End of socket error processing ---\n\n            // Ensure we are connected, retry if not\n            self.checkConnect(self.retryMs, self.retryFactor)\n\n            // TODO: Just for testing - remove or do something useful\n            // self.socket.io.on('packet', function(data){\n            //     // we get one of these for each REAL msg (not ping/pong)\n            //     console.log('PACKET', data)\n            // })\n            // self.socket.on('pong', function(latency) {\n            //     console.log('SOCKET PONG - Latency: ', latency)\n            //     //console.dir(self.socket)\n            // }) // --- End of socket pong processing ---\n\n            /* We really don't need these, just for interest\n                self.socket.io.on('packet', function(data){\n                    // We get one of these for actual messages, not ping/pong\n                    console.log('PACKET', data)\n                })\n                self.socket.on('connect_timeout', function(timeout) {\n                    self.uiDebug('log', 'SOCKET CONNECT TIMEOUT - Namespace: ' + ioNamespace + ', Timeout: ' + timeout)\n                }) // --- End of socket connect timeout processing ---\n                self.socket.on('reconnect', function(attemptNum) {\n                    self.uiDebug('log', 'SOCKET RECONNECTED - Namespace: ' + ioNamespace + ', Attempt #: ' + attemptNum)\n                }) // --- End of socket reconnect processing ---\n                self.socket.on('reconnect_attempt', function(attemptNum) {\n                    self.uiDebug('log', 'SOCKET RECONNECT ATTEMPT - Namespace: ' + ioNamespace + ', Attempt #: ' + attemptNum)\n                }) // --- End of socket reconnect_attempt processing ---\n                self.socket.on('reconnecting', function(attemptNum) {\n                    self.uiDebug('log', 'SOCKET RECONNECTING - Namespace: ' + ioNamespace + ', Attempt #: ' + attemptNum)\n                }) // --- End of socket reconnecting processing ---\n                self.socket.on('reconnect_error', function(err) {\n                    self.uiDebug('log', 'SOCKET RECONNECT ERROR - Namespace: ' + ioNamespace + ', Reason: ' + err.message)\n                    //console.dir(err)\n                }) // --- End of socket reconnect_error processing ---\n                self.socket.on('reconnect_failed', function() {\n                    self.uiDebug('log', 'SOCKET RECONNECT FAILED - Namespace: ' + ioNamespace)\n                }) // --- End of socket reconnect_failed processing ---\n                self.socket.on('ping', function() {\n                    self.uiDebug('log', 'SOCKET PING')\n                }) // --- End of socket ping processing ---\n                self.socket.on('pong', function(latency) {\n                    self.uiDebug('log', 'SOCKET PONG - Latency: ', latency)\n                }) // --- End of socket pong processing ---\n             */\n        } // ---- End of ioSetup ---- //\n        \n        /** Mark client as logged off & delete local auth data\n         * @param {String=} localReason Optional, give a reason for logoff, will be placed in self.authData\n         * @param {_auth=} _auth Data from server, uses self._auth if not provided\n         */\n        self.markLoggedOut = function(localReason, _auth) {\n            // If _auth undefined then ignore\n            if (self._auth === undefined && _auth === undefined) return\n\n            // If _auth not provided, use self._auth\n            //if ( _auth === undefined ) _auth = self._auth\n\n            // Reset auth info\n            _auth = self.dummyAuth\n\n            // Record reason if given\n            if ( localReason !== undefined ) self._auth.info.message = localReason\n\n            // Trigger change in isAuthorised\n            self.set('isAuthorised', false) // also triggers event\n\n            // Trigger change in _auth\n            self.set('_auth', _auth)\n\n            //delete self.socketOptions.transportOptions.polling.extraHeaders.Authorization\n        } // ---- End of markLoggedOut ---- //\n\n        /** Send a logon request control message\n         * Node-RED will respond with another control msg indicating success or failure,\n         * the `isAuthorised` variable is set accordingly to true or false.\n         * @param {_auth=} _auth Logon specific data to be passed to Node-RED, uses self._auth if not provided.\n         * @param {string=} [api] Optional. If set to a valid API URL, send login data to it and process response. Otherwise send login request as a control msg\n         */\n        self.logon = function(_auth, api) {\n            // If _auth undefined then ignore\n            if (self._auth === undefined && _auth === undefined) return\n\n            // If _auth not provided, use self._auth\n            if ( _auth === undefined ) _auth = self._auth\n\n            if ( _auth.id === undefined || _auth.id === null || _auth.id.length === 0 ) {\n                console.error('[uibuilder:logon] No logon id supplied, ignoring request.')\n                return\n            }\n\n            if ( ! _auth.info ) _auth.info = self.dummyAuth.info\n\n            self.set('_auth', _auth)\n\n            if (api) {\n                //TODO (see login method on vue2 test)\n            } else {\n                self.send({\n                    'uibuilderCtrl':'logon',\n                    'from': 'client',\n                    '_auth': self._auth,\n                },self.ioChannels.control)\n            }\n\n            self.uiDebug('log', '[uibuilder:logon] ', self._auth)\n        } // ---- End of logon ---- //\n\n        /** Send a logoff request control message\n         * Note that the local auth data is NOT removed here.\n         *   That happens when the client receives the control msg \"logged off\" from the server.\n         * @param {_auth=} _auth Required. Logon specific data to be passed to Node-RED\n         * @param {string} [api] Optional. If set to a valid API URL, send login data to it and process response. Otherwise send login request as a control msg\n         */\n        self.logoff = function(_auth, api) {\n            // If _auth undefined then ignore\n            if (self._auth === undefined && _auth === undefined) return\n\n            // If _auth not provided, use self._auth\n            if ( _auth === undefined ) _auth = self._auth\n\n            if ( _auth.id === undefined || _auth.id === null || _auth.id.length === 0 ) {\n                console.error('[uibuilder:logoff] No logoff id supplied, ignoring request.')\n                return\n            }\n\n            if ( ! _auth.info ) _auth.info = self.dummyAuth.info\n\n            self._auth = _auth\n\n            if (api) {\n                //TODO (see login method on vue2 test)\n            } else {\n                self.send({\n                    'uibuilderCtrl':'logoff',\n                    'from': 'client',\n                    '_auth': self._auth,\n                },self.ioChannels.control)\n            }\n        }  // ---- End of logoff ---- //\n\n        /** Update client authorisation info from server info\n         * Note that this may happen after a successful logon request or at any time\n         * a msg is received (on any channel) that contains a msg._auth object\n         * @param {_auth=} _auth Authorisation information. Defaults to self._auth if not supplied\n         */\n        self.updateAuth = function(_auth) {\n            // If _auth undefined then ignore\n            if (self._auth === undefined && _auth === undefined) return\n\n            // If _auth not provided, use self._auth\n            if ( _auth === undefined ) _auth = self._auth\n\n            // Ignore if empty object\n            //if ( Object.keys(_auth).length === 0 ) return\n\n            if ( _auth.id === undefined || _auth.id === null || _auth.id.length === 0 ) {\n                console.error('[uibuilder:updateAuth] No auth id supplied by server, ignoring server response.')\n                if (_auth.info && _auth.info.error) console.warn('[uibuilder:updateAuth] Error from Server: ', _auth.info.error)\n                return\n            }\n\n            if ( ! _auth.info ) _auth.info = self.dummyAuth.info\n\n            // Make sure user is valid & jwt is valid and current\n            if ( _auth.userValidated && _auth.jwt && _auth.info.validJwt === true && (new Date(_auth.sessionExpiry) > (new Date())) ) {\n                self.set('isAuthorised', true) // also triggers event\n\n                self.set('_auth', _auth)\n\n                //self.socketOptions.transportOptions.polling.extraHeaders.Authorization = 'Bearer ' + self.authToken\n            } else {\n                self.markLoggedOut('Logon succeeded but no token received, logged out')\n            }\n\n        } // ---- End of updateAuth ---- //\n\n        /** Returns a standard msg._auth Object either with valid authToken or none\n         * If token has expired, run the logout to invalidate the retained data.\n         * @returns {_auth|undefined}\n         */\n        self.sendAuth = function() {\n            //if ( Object.prototype.toString.call(_auth) !== '[object Object]' ) _auth = self.dummyAuth\n\n            // If anything goes wrong, don't send _auth to server\n            try {\n                if ( self._auth === undefined ) return undefined\n                // TODO: Remove extra metadata from _auth beofre sending (info, userValidated, sessionExpiry)\n                if ( self.isAuthorised ) {                \n                    if ( new Date(self._auth.sessionExpiry) > (new Date()) ) {\n                        return self._auth\n                    } else { // Token has expired so mark as logged off\n                        self.markLoggedOut('Automatically logged off. Token expired')\n                        return self._auth\n                    }\n                } else {\n                    return self._auth\n                }\n            } catch(e) {\n                return undefined\n            }\n        } // ---- End of addAuth ---- //\n\n        /** Send a standard msg back to Node-RED via Socket.IO\n         * NR will generally expect the msg to contain a payload topic\n         * @param {Object} msgToSend The msg object to send.\n         * @param {string} [channel=uiBuilderClient] The Socket.IO channel to use, must be in self.ioChannels or it will be ignored\n         */\n        self.send = function (msgToSend, channel) {\n            if ( channel === null || channel === undefined ) channel = self.ioChannels.client\n\n            self.uiDebug('log', 'uibuilderfe: sending msg - Namespace: ' + self.ioNamespace + ', Channel: ' + channel, msgToSend)\n\n            // Make sure msgToSend is an object\n            if (channel === self.ioChannels.client) {\n                msgToSend = makeMeAnObject(msgToSend, 'payload')\n            } else if (channel === self.ioChannels.control) {\n                msgToSend = makeMeAnObject(msgToSend, 'uibuilderCtrl')\n                if ( ! msgToSend.hasOwnProperty('uibuilderCtrl') ) {\n                    msgToSend.uibuilderCtrl = 'manual send'\n                }\n                // help remember where this came from as ctrl msgs can come from server or client\n                msgToSend.from = 'client'\n            }\n\n            /** @since 2020-01-02 Added _socketId which should be the same as the _socketId on the server */\n            msgToSend._socketId = self.socket.id\n\n            /** If we have an authToken and not expired, add `_auth` to output msg */\n            msgToSend._auth = self.sendAuth()\n\n            // Track how many messages have been sent & last msg sent\n            if (channel === self.ioChannels.client) {\n                self.set('sentMsg', msgToSend)\n                self.set('msgsSent', self.msgsSent + 1)\n            } else if (channel === self.ioChannels.control) {\n                self.set('sentCtrlMsg', msgToSend)\n                self.set('msgsSentCtrl', self.msgsSentCtrl + 1)\n            }\n\n            self.socket.emit(channel, msgToSend)\n        } // --- End of Send Msg Fn --- //\n\n        /** Register on-change event listeners\n         * Make it possible to register a function that will be run when the property changes.\n         * Note that you can create listeners for non-existant properties becuase\n         * Example: uibuilder.onChange('msg', function(newValue){ console.log('uibuilder.msg changed! It is now: ', newValue) })\n         *\n         * @param {string} prop The property of uibuilder that we want to monitor\n         * @param {function} callback The function that will run when the property changes, parameter is the new value of the property after change\n         */\n        self.onChange = function(prop, callback) {\n            // Note: Property does not have to exist yet\n\n            //self.uiDebug('log', `uibuilderfe:uibuilder:onchange: pushing new callback (event listener) for property: ${prop}`)\n\n            // Create a new array or add to the array of callback functions for the property in the events object\n            if (self.events[prop]) {\n                self.events[prop].push(callback)\n            } else {\n                self.events[prop] = [callback]\n            }\n        } // ---- End of onChange() ---- //\n\n        /** Forcably removes all event listeners from the events array\n         * Use if you need to re-initialise the environment\n         */\n        self.clearEventListeners = function() {\n            self.events = []\n        } // ---- End of clearEventListeners() ---- //\n\n        //#region ========== Our own event handling system ========== //\n\n        self.events = {}  // placeholder for event listener callbacks by property name\n\n        /** Trigger event listener for a given property\n         * Called when uibuilder.set is used\n         *\n         * @param {*} prop The property for which to run the callback functions\n         * @param arguments Additional arguments contain the value to pass to the event callback (e.g. newValue)\n         */\n        self.emit = function (prop) {\n            var evt = self.events[prop]\n            if (!evt) {\n                return\n            }\n            var args = Array.prototype.slice.call(arguments, 1)\n            for (var i = 0; i < evt.length; i++) {\n                evt[i].apply(self, args)\n            }\n        }\n\n        //#endregion ========== End of event handling system ========== //\n\n        //#region ========== Handle incoming code via received msg ========== //\n\n        /** Add a new script block to the end of <body> from text or an array of text\n         * @param {(string[]|string)} script\n         */\n        self.newScript = function(script) {\n            if ( self.allowScript !== true ) return\n            if ( script === '' || (typeof script === 'undefined') ) return\n            //if ( script.constructor === Array ) script.join(\"\\n\")\n\n            self.uiDebug('log', 'uibuilderfe: newCode - script: ' + script)\n            var newScript = document.createElement('script')\n            newScript.type = 'text/javascript'\n            newScript.defer = true\n            // @ts-ignore\n            newScript.textContent = script\n            document.getElementsByTagName('body')[0].appendChild(newScript)\n        }\n\n        /** Add a new style block to end of <head> from text or an array of text\n         * @param {(string[]|string)} style\n         */\n        self.newStyle = function(style) {\n            if ( self.allowStyle !== true ) return\n            if ( style === '' || (typeof style === 'undefined') ) return\n\n            self.uiDebug('log', 'uibuilderfe: newStyle - style: ' + style)\n            var newStyle = document.createElement('style')\n            // @ts-ignore\n            newStyle.textContent = style\n            document.getElementsByTagName('head')[0].appendChild(newStyle)\n        }\n\n        //#endregion ====== End of Handle incoming code via received msg ====== //\n\n        //#region ========== VueJS Specific functions ========== //\n        /** Simple function to create a bootstrap-vue toast notification from an incoming msg\n         * Requires a reference to a VueJS instance and a msg object from Node-RED.\n         * Place inside the uibuilder.on('msg', ...) function inside your Vue app's\n         * mounted section.\n         * @see https://bootstrap-vue.org/docs/components/toast\n         * @param {Object} msg A msg from Node-RED with appropriate formatting\n         */\n        self.showToast = function(msg) {                \n\n            // We need self.vueApp to be set\n            if ( ! self.vueApp ) {\n                console.warn('[uibuilder:toast] Vue app object not available, cannot create a toast')\n                return\n            }\n\n            /** Make sure that we have Vue loaded with the $bvToast function\n             *  That lets us dynamically create a toast object directly in the virtual DOM */\n            if ( ! self.vueApp.$bvToast ) {\n                console.warn('[uibuilder:toast] bootstrap-vue toast component not available, cannot create a toast')\n                return\n            }\n            /** Make sure that we have a msg._uib object */\n            if ( ! msg._uib || msg._uib === null || msg._uib.constructor.name !== 'Object' ) {\n                console.warn('[uibuilder:toast] Incoming msg requires msg._uib object, cannot create a toast')\n                return\n            }\n\n            // $createElement is a Vue function that lets you create Vue virtual DOM\n            // elements. We use it here to let us render HTML in the toast.\n            const h = self.vueApp.$createElement\n\n            /** Toast options\n             * @type {Object} toastOptions Optional metadata for the toast.\n             * @param {String|VNode|VNode[]} [toastOptions.title] Optional title, may be HTML (vNode or array of vNodes)\n             * @param {Boolean} [toastOptions.appendToast] Optional. Whether to show new toasts below previous ones still on-screen (true). Or to replace previous (false - default)\n             * @param {Number} [toastOptions.autoHideDelay] Optional. Ms until toast is auto-hidden.\n             */\n            let toastOptions = {}\n            if ( msg._uib.options ) toastOptions = Object.assign({}, msg._uib.options) // Need a copy here otherwise debug output breaks\n\n            /** Main content of the toast\n             * @type {String|VNode|VNode[]}\n             */\n            let content = ''\n            \n            // Main body content\n            if ( msg.payload ) content += msg.payload\n            if ( toastOptions.content ) content += toastOptions.content\n            // Assume that the input content is or could be HTML. create a virtual DOM element\n            const vNodesContent = h(\n                'p', {\n                    domProps: {\n                        innerHTML: content\n                    }\n                }\n            )\n\n            // The title is also allowed to have HTML\n            if ( toastOptions.title ) toastOptions.title = h(\n                'p', {\n                    domProps: {\n                        innerHTML: toastOptions.title\n                    }\n                }\n            )\n\n            // Do we want new toasts to be shown at the bottom of the list (true) instead of the top (false - default)?\n            if ( toastOptions.append ) toastOptions.appendToast = toastOptions.append\n\n            // If set, number of ms until toast is auto-hidden\n            if ( toastOptions.autoHideDelay ) {\n                toastOptions.autohide = true\n                toastOptions.delay = toastOptions.autoHideDelay\n            }\n\n            // Toast wont show anyway if content is empty, may as well warn user\n            if ( content === '' ) {\n                console.warn('[uibuilder:toast] Toast content is blank. Not shown.')\n                return\n            }\n\n            // Dynamically insert the toast to the virtual DOM\n            // Will show at top-right of the HTML element that is the app root\n            // unless you include a <b-toaster> element\n            self.vueApp.$bvToast.toast(vNodesContent, toastOptions)\n\n        } // --- End of makeToast() --- //\n\n        /** Simple function to show a bootstrap-vue alert (globalAlerts) */\n        self.showAlert = function() {}\n\n        /** Return a control msg containing the props/attribs/etc of a given Vue Component instance\n         * @param {String} componentRef The ref value of the component instance to be queried\n         * @returns {Object} msg - a uibuilder control msg object\n         */\n        self.showComponentDetails = function(componentRef) {\n            // Only if Vue is in use and a reference to the Vue master app is available ...\n            if ( !self.vueApp ) return\n\n            if ( ! self.vueApp.$refs[componentRef] ) return\n\n            let ref = self.vueApp.$refs[componentRef]\n\n            let msg = {}\n\n            // It is possible that what looks like a component is only a set of HTML elements\n            // So we have to test for that.\n            if ( ref.$options ) {\n                msg = {\n                    'uibuilderCtrl': 'vue component details',\n                    'componentDetails': {\n                        'ref': componentRef,\n                        'tag': ref.$options._componentTag,\n                        'props': ref.$options._propKeys,\n                    },\n                }\n            } else {\n                let warning = `[uibuilderfe:showComponentDetails] ref=\"${componentRef}\" is not a Vue Component. Details cannot be returned.`\n                self.uiDebug('warn', warning )\n                msg = {\n                    'uibuilderCtrl': 'vue component details',\n                    'componentDetails': {\n                        'warning': warning,\n                        'ref': componentRef,\n                        'tag': null,\n                        'props': null,\n                    },\n                }\n            }\n\n            return msg\n        }\n\n        /** If Vue is in use and we have a reference to the main app, this fn can send data and config direct to a Vue componant instance\n         *  if that component has been written in the right way.\n         * @param {Object} msg Message object from Node-RED\n         */\n        self.onChange('msg', function(msg) {\n\n            // Only if Vue is in use and a reference to the Vue master app is available ...\n            if ( !self.vueApp ) return\n            \n            // Do nothing if the msg doesn't have a _uib property\n            if ( !msg._uib ) return\n\n            // Process a client reload request from Node-RED - as the page is reloaded, everything else is ignored\n            if ( msg._uib.reload === true ) {\n                console.log('reloading')\n                location.reload()\n            }\n\n            // Do nothing if the msg doesn't have a component ref\n            if ( !msg._uib.componentRef ) return\n\n            let vueApp = self.vueApp\n            let componentRef = msg._uib.componentRef\n\n            // 1) Return ctrl msg containing component instance details\n            if ( msg._uib.requestDetails ) {\n                let m = self.showComponentDetails(componentRef)\n                if (m) {\n                    if (msg.topic) m.topic = msg.topic\n                    self.send(m, self.ioChannels.control)\n                }\n                return\n            }\n\n            // 2) Deal with toast requests (notifications)\n            if (componentRef === 'globalNotification') {\n                // This dynamically inserts a toast into the DOM\n                self.showToast(msg)\n                return\n            }\n            \n            // 3) Deal with alert requests (using b-modal message boxes)\n            if (componentRef === 'globalAlert') {\n                // This dynamically inserts an alert into the DOM\n                self.showAlert(msg)\n                return\n            }\n\n            // 4) Does the component ref exist? Remember to include a ref=\"xxxx\" on each component instance in your html - note: this doesn't always work, depends on component\n            if ( componentRef in vueApp.$refs ) {\n\n                /** Copy each prop direct into the component (updates the DOM if needed) */\n                if ( msg._uib.options ) {\n\n                    self.uiDebug('log', ' new component instance options received for ref', componentRef, ':', msg._uib.options)\n\n                    Object.keys(msg._uib.options).forEach( function(key) {\n                        try {\n                            vueApp.$set(vueApp.$refs[componentRef], key,  msg._uib.options[key])\n                        } catch (e) {\n                            self.uiDebug('warn', `[uibuilderfe:internal:onChange] Could not update prop \"${key}\" for component ref=\"${componentRef}\". Error: ${e.message}`)\n                        }\n                    })\n                }\n\n                /** Also check if the payload exists. If it does, update the components value with it\n                 * WARNING: No type or other checking is done - make sure you pass the right data type\n                 *          and make sure that custom components check inputs.\n                 */\n                if ( msg.payload ) {\n\n                    self.uiDebug('log', ' new component instance value received for ref', componentRef, ':', msg.payload)\n\n                    // TODO: Not sure this is quite right ...\n                    try {\n                        vueApp.$refs[componentRef].$props['config']['value'] = msg.payload\n                    } catch (e) {}\n                    \n                }\n            \n            } else {\n                let warning = `[uibuilderfe:internal:onChange] ref=\"${componentRef}\" is not a Vue Component. Cannot set props.`\n                self.uiDebug('warn', warning )\n                let m = {\n                    'uibuilderCtrl': 'vue component details',\n                    'componentDetails': {\n                        'warning': warning,\n                        'ref': componentRef,\n                        'tag': null,\n                        'props': null,\n                    },\n                }\n                if (msg.topic) m.topic = msg.topic\n                self.send(m, self.ioChannels.control)\n            }\n\n        }) // ---- End of internal onChange(msg) handler ---- //\n        //#endregion ========== VueJS Specific functions ========== //\n\n        //#endregion --- end of internal functions --- //\n\n        // uiReturn contains a set of functions that are returned when this function\n        // self-executes (on-load)\n        self.uiReturn = {\n\n            /** Function to set uibuilder properties to a new value. Also triggers any event listeners.\n             * This version is for external use and disallows certain properties to be set\n             * Example: uibuilder.set('foo', {name:'uibuilder', data:42}); uibuilder.set('oldMsg', uibuilder.get('msg'));\n             * @param {string} prop\n             * @param {*} val\n             */\n            set: function (prop, val) {\n                /** Add exclusions for protected properties.\n                 * Can't use hasOwnProperty or use an allow list as that would exclude new properties\n                 * @type {Array}\n                 */\n                var excluded = [\n                    'autoSendReady',\n                    'ctrlMsg', \n                    'debug', \n                    'events', \n                    'httpNodeRoot',\n                    'ioChannels', 'ioConnected', 'ioNamespace', 'ioPath', 'ioTransport', \n                    'isAuthorised', 'isUnminified',\n                    'loaded',\n                    'msg', 'msgsCtrl', 'msgsReceived', 'msgsSent', 'msgsSentCtrl', 'moduleName',\n                    'retryFactor', 'retryMs',\n                    'sentMsg', 'sentCtrlMsg', 'serverTimeOffset', 'socket',\n                    'timerid', \n                    'url',\n                    'version', \n                    // Ensure no clashes with internal and external method names\n                    'checkConnect', 'checkTimestamp',\n                    'emit', \n                    'get', \n                    'ioSetup',\n                    'logon', 'logoff',\n                    'markLoggedOut', 'me', \n                    'newScript', 'newStyle', \n                    'onChange', \n                    'self', 'set', 'send', 'sendAuth', 'sendCtrl', 'setIOnamespace', 'showComponentDetails', 'showToast', 'socket', \n                    'uiDebug', 'updateAuth',\n                    'uiReturn',\n                ]\n                if (excluded.indexOf(prop) !== -1) {\n                    console.warn('[uibuilder:set] Cannot use set() on protected property \"' + prop + '\"')\n                    self.uiDebug('warn', 'uibuilderfe:uibuilder:set: \"' + prop + '\" is in list of excluded properties, not set')\n                    return\n                }\n\n                // if setting _auth, make sure it has the right bits in it\n                if (prop === '_auth') {\n                    if ( (!val.id) || val.id.length === 0 ) {\n                        console.warn('[uibuilder:set] _auth must contain a valid _auth.id property')\n                        return\n                    }\n                    if ( !val.info ) val.info = self.dummyAuth.info\n                }\n\n                // Set & Trigger this prop's event callbacks (listeners)\n                self.set(prop, val)\n            },\n\n            /** Function to get the value of a uibuilder property\n             * Example: uibuilder.get('msg')\n             * @param {string} prop The name of the property to get\n             * @return {*} The current value of the property\n             */\n            get: function (prop) {\n                /** Add exclusions for protected properties.\n                 * Can't use hasOwnProperty or use an allow list as that would exclude new properties\n                 * @type {Array}\n                 */\n                var excluded = [\n                    // Exclude internal methods\n                    'checkConnect', 'checkTimestamp',\n                    'emit', \n                    'get', \n                    'ioSetup',\n                    'logon', 'logoff',\n                    'markLoggedOut', 'me', \n                    'newScript', 'newStyle', \n                    'onChange', \n                    'self', 'set', 'send', 'sendAuth', 'sendCtrl', 'setIOnamespace', 'showComponentDetails', 'showToast', 'socket', \n                    'uiDebug', 'updateAuth',\n                    'uiReturn',\n                ]\n                if (excluded.indexOf(prop) !== -1) {\n                    console.warn('[uibuilder] Cannot use get() on protected property \"' + prop + '\"')\n                    self.uiDebug('warn', 'uibuilderfe:uibuilder:get: \"' + prop + '\" is in list of excluded properties, not get')\n                    return\n                }\n                //if ( prop !== 'debug' ) self.uiDebug('log', `uibuilderfe:uibuilder:get Property: ${prop}`)\n                if ( self[prop] === undefined ) {\n                    console.warn('[uibuilder] get() - property \"' + prop + '\" does not exist')\n                }\n                return self[prop]\n            },\n\n            /** Register on-change event listeners \n             * Example: uibuilder.onChange('msg', function(msg){ console.log(msg) })\n             */\n            onChange: self.onChange,\n\n            /** Forcably removes all event listeners from the events array\n             * Use if you need to re-initialise the environment\n             */\n            clearEventListeners: self.clearEventListeners,\n\n            /** Helper fn, shortcut to return current value of msg\n             * Use instead of having to do: uibuilder.get('msg')\n             * Example: console.log( uibuilder.msg )\n             *\n             * @return {Object} msg\n             */\n            msg: self.msg,\n\n            /** Helper fn, Send a message to NR\n             * Example: uibuilder.sendMsg({payload:'Hello'})\n             */\n            send: self.send,\n            sendCtrl: function(msg) {\n                self.send(msg, self.ioChannels.control)\n            },\n\n            /** Control auto sending of '' control message\n             * @param {boolean} sw True= Send ctrl msg on window.load, false=have to send manually\n             */\n            autoSendReady: function(sw) {\n                if ( sw !== true ) sw = false\n                self.autoSendReady = sw\n            },\n\n            /** Turn on/off debugging\n             * Example: uibuilder.debug(true)\n             * @param {boolean} [onOff] Debug flag\n             * @return {boolean|void} If no parameter given, returns current debug state\n             */\n            debug: function (onOff) {\n                if ( typeof onOff === 'undefined' ) return self.debug\n                if ( typeof onOff === 'boolean' ) self.debug = onOff\n            },\n\n            /** Debugging function\n             * Example: uibuilder.debug('info', 'This is an information message to console.log')\n             * @param {string} type One of log|error|info|dir\n             * @param {*} msg Msg to send to console\n             */\n            uiDebug: self.uiDebug,\n\n            /** Return self object (if debug true) or module version\n             * Use only for debugging as: console.dir(uibuilder.me())\n             * @return {object|string} Returns self object or version string\n             **/\n            me: self.me,\n\n            /** Startup socket.io comms - must be done manually by user to allow for changes to namespace/path \n             * @param {Object|string} [namespace] Optional. Object containing ref to vueApp, Object containing settings, or IO Namespace override. changes self.ioNamespace from the default.\n             * @param {string=} ioPath Optional. changes self.ioPath from the default\n             * @param {Object=} vueApp Optional. reference to the VueJS instance\n             */\n            start: function(namespace,ioPath,vueApp) {\n                if ( self.started === true ) {\n                    self.uiDebug('log', ' [uibuilderfe:start] Start function already called. Do not call more than once.')\n                    return\n                }\n\n                self.uiDebug('log', '[uibuilderfe:start] start() called')\n\n                // If 1st param is an object ...\n                if ( toString.call(namespace) === '[object Object]' ) {\n                    self.uiDebug('log', ' [uibuilderfe:start] namespace IS an object!')\n\n                    // Is it the vue instance?\n                    if ( namespace._isVue === true ) {\n                        self.uiDebug('log', ' [uibuilderfe:start] Vue instance object IS available!')\n                        vueApp = namespace\n                        namespace = undefined\n                    } else {\n                        // if not vue instance, is it an options object? If so, separate them out\n                        if ( namespace.ioPath ) ioPath = namespace.ioPath\n                        if ( namespace.vueApp ) vueApp = namespace.vueApp\n                        if ( namespace.namespace ) namespace = namespace.namespace // make sure this is the last entry\n                        else namespace = undefined // finally reset the namespace var but only if it wasn't in the object\n                    }\n                } else {\n                    // If the 1st param wasn't an object, was the vueApp param provided?\n                    if ( ! vueApp ) {\n                        self.uiDebug('log', ' [uibuilderfe:start] app1 not available!')\n                    } else if ( toString.call(vueApp) === '[object Object]' && vueApp._isVue === true ) {\n                        self.uiDebug('log', ' [uibuilderfe:start] Vue instance object IS available!')\n                    } else {\n                        self.uiDebug('log', ' [uibuilderfe:start] Vue instance object not available!')\n                        vueApp = undefined\n                    }\n                }\n\n                self.uiDebug('log', '[uibuilderfe:start] Calling params - namespace', namespace, 'ioPath', ioPath, 'vueApp', vueApp)\n                \n                // Save the parameters\n                if (namespace !== undefined && namespace !== null) self.ioNamespace = namespace\n                if (ioPath !== undefined && ioPath !== null) self.ioPath = ioPath\n                if (vueApp !== undefined && vueApp !== null) self.vueApp = vueApp\n\n                self.uiDebug('log', '[uibuilderfe:start] Final Socket.IO params - namespace', namespace, 'ioPath', ioPath)\n\n                self.ioSetup()\n\n                self.started = true\n            },\n\n            /** Send a logon request control message\n             * Node-RED will respond with another control msg indicating success or failure,\n             * the `isAuthorised` variable is set accordingly to true or false.\n             * @param {Object} [data] Optional. Logon specific data to be passed to Node-RED\n             */\n            logon: self.logon,\n\n            /** Send a logoff request message\n             * Note that the local auth data is NOT removed here.\n             *   That happens when the client receives the control msg \"logged off\" from the server.\n             */\n            logoff: self.logoff,\n\n            /** Return a control msg containing the props/attribs/etc of a given Vue Component instance\n             * @param {String} componentRef The ref value of the component instance to be queried\n             * @returns {Object} msg - a uibuilder control msg object\n             */\n            showComponentDetails: self.showComponentDetails,\n\n            /** Display a pop-up notification\n             * @see docs/vue-component-handling.md\n             * @param {string|html} text Text to show in the notification body. May be HTML. Use options params for more control.\n             * @param {string} [ref] Optional. If provided, positions the notification next to the referenced component instance\n             * @param {Object} [options] Optional. Additional toast options\n             */\n            showToast: function(text, ref='globalNotification', options={}) {\n                const msg = {\n                    '_uib': {\n                        'componentRef': ref,\n                        'options': options,\n                    },\n                    'payload': text,\n                }\n                self.showToast(msg)\n            },\n\n            /** Easily send a msg back to Node-RED on a DOM event\n             * In HTML: `<b-button id=\"myButton1\" @click=\"doEvent\" data-something=\"hello\"></b-button>`\n             * In JS methods: `doEvent: uibuilder.eventSend,`\n             * All `data-` attributes will be passed back to Node-RED, \n             *    use them instead of arguments in the click function\n             * @param {MouseEvent|any} domevent DOM Event object\n             */\n            eventSend: function(domevent) {\n                // The argument must be a DOM event\n                if ( (! domevent.constructor.name.endsWith('Event')) || (! domevent.currentTarget) ) {\n                    self.uiDebug('log', '[uibuilderfe:eventSend] ARGUMENT NOT A DOM EVENT - use data attributes not function arguments to pass data')\n                    return\n                }\n                const target = domevent.currentTarget\n\n                // Try to get a meaningful ID. id attrib is highest priority, text content is lowest\n                let id = ''\n                try { if (target.textContent !== '') id = target.textContent.substring(0,25) } catch (e) {}\n                try { if (target.name !== '') id = target.name } catch (e) {}\n                try { if (target.id !== '') id = target.id } catch (e) {}\n\n                self.send({\n                    topic: self.msg.topic,  // repeats the topic from the last inbound msg if it exists\n\n                    uibDomEvent: {\n                        sourceId: id,\n                        event: domevent.type,\n                    },\n\n                    // Each `data-xxxx` attribute is added as a property\n                    // - this may be an empty Object if no data attributes defined\n                    payload: target.dataset,\n                })\n            },\n\n            /** auto map msg.topic's to variables */\n            automap: self.automap,\n\n        } // --- End of return callback functions --- //\n\n        //#endregion ========== End of setup ========== //\n\n        //#region ======== start of execution ======== //\n\n        /** Are all browser resources loaded?\n         * DOMContentLoaded: DOM is ready but external resources may not be loaded yet\n         * load: All resources are loaded\n         */\n        /* document.addEventListener('DOMContentLoaded', function(){\n           self.send({'uibuilderCtrl':'DOMContentLoaded'},self.ioChannels.control)\n          }) */\n        window.addEventListener('load', function(){\n            self.uiDebug('debug', 'uibuilderfe:load: All resources loaded')\n            self.loaded = true\n        })\n\n        //#endregion ======== end of execution ======== //\n\n        // Make externally available the external methods\n        return self.uiReturn\n\n    }).call(root) // --- End of uibuilder function --- //\n\n    /** Allows users to use a noConflict version in case they already have a uibuilder var in the starting context\n     * In parent code, use as:\n     *    var othername = uibuilder.noConflict()\n     *    // the variable uibuilder is back to its old value from here\n     * @return {object}\n     */\n    uibuilder.noConflict = function () {\n        root.uibuilder = previous_uibuilder\n        return uibuilder\n    }\n\n    // Makes uibuilder function available to the browser or as a module to Node.js or bundle\n    if( typeof exports !== 'undefined' ) {\n        // If running bundled code or in Node.js, this exports uibuilder you would need to import or require it\n        if( typeof module !== 'undefined' && module.exports ) {\n            exports = module.exports = uibuilder\n        }\n        exports.uibuilder = uibuilder\n    } else {\n        // If running in browser, this creates window.uibuilder\n        root.uibuilder = uibuilder\n    }\n\n    /** Makes a null or non-object into an object\n     * If not null, moves \"thing\" to {payload:thing}\n     *\n     * @param {*} thing Thing to check\n     * @param {string} [property='payload'] property that \"thing\" is moved to if not null and not an object\n     * @return {!Object}\n     */\n    function makeMeAnObject(thing, property) {\n        if (property === null || property === undefined) property = 'payload'\n        if ( typeof property !== 'string' ) {\n            console.warn('[uibuilderfe:makeMeAnObject] WARNING: property parameter must be a string and not: ' + typeof property)\n            property = 'payload'\n        }\n        var out = {}\n        if (typeof thing === 'object') { out = thing }\n        else if (thing !== null) { out[property] = thing }\n        return out\n    } // --- End of make me an object --- //\n\n    /** Joins all arguments as a URL string\n     * @see http://stackoverflow.com/a/28592528/3016654\n     * @since v1.0.10, fixed potential double // issue\n     * @arguments {string} URL fragments\n     * @returns {string}\n     */\n    function urlJoin() {\n        var paths = Array.prototype.slice.call(arguments)\n        var url =\n            '/'+paths.map(function(e){\n                return e.replace(/^\\/|\\/$/g,'')\n            }).filter(function(e){\n                return e\n            }).join('/')\n        return  url.replace('//','/')\n    } // ---- End of urlJoin ---- //\n\n// eslint-disable-next-line semi\n}).call(this); // Pass current context into the IIFE\n// --- End of isolation IIFE --- //\n\n\n// EOF\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./markdown.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./markdown.vue?vue&type=script&scoped=true&lang=js&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./time-plot.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}