import{n as t}from"./index.af32e0ef.js";import"./vue.1457ee3a.js";import"./vuetify.50e96a45.js";function e(t,e,n,l){let i;n=n||0;let o=(l=l||e.length-1)<=2147483647;for(;l-n>1;)i=o?n+l>>1:g((n+l)/2),e[i]<t?n=i:l=i;return t-e[n]<=e[l]-t?n:l}function n(t,e,n,l){for(let i=1==l?e:n;i>=e&&i<=n;i+=l)if(null!=t[i])return i;return-1}const l=[0,0];function i(t,e,n,i){return l[0]=n<0?R(t,-n):t,l[1]=i<0?R(e,-i):e,l}function o(t,e,n,l){let o,s,r,a=10==n?y:k;return t==e&&(t/=n,e*=n),l?(o=g(a(t)),s=x(a(e)),r=i(_(n,o),_(n,s),o,s),t=r[0],e=r[1]):(o=g(a(m(t))),s=g(a(m(e))),r=i(_(n,o),_(n,s),o,s),t=H(t,r[0]),e=C(e,r[1])),[t,e]}function s(t,e,n,l){let i=o(t,e,n,l);return 0==t&&(i[0]=0),0==e&&(i[1]=0),i}const r={pad:0,soft:null,mode:0},a={min:r,max:r};function u(t,e,n,l){return B(n)?f(t,e,n):(r.pad=n,r.soft=l?0:null,r.mode=l?3:0,f(t,e,a))}function c(t,e){return null==t?e:t}function f(t,e,n){let l=n.min,i=n.max,o=c(l.pad,0),s=c(i.pad,0),r=c(l.hard,-S),a=c(i.hard,S),u=c(l.soft,S),f=c(i.soft,-S),h=c(l.mode,0),d=c(i.mode,0),p=e-t;p<1e-9&&(p=0);let w=p||m(e)||1e3,x=y(w),k=_(10,g(x)),M=R(H(t-w*(0==p?0==t?.1:1:o),k/10),9),T=t>=u&&(1==h||3==h&&M<=u||2==h&&M>=u)?u:S,z=b(r,M<T&&t>=T?T:v(T,M)),P=R(C(e+w*(0==p?0==e?.1:1:s),k/10),9),D=e<=f&&(1==d||3==d&&P>=f||2==d&&P<=f)?f:-S,E=v(a,P>D&&e<=D?D:b(D,P));return z==E&&0==z&&(E=100),[z,E]}const h=new Intl.NumberFormat(navigator.language).format,d=Math,p=d.PI,m=d.abs,g=d.floor,w=d.round,x=d.ceil,v=d.min,b=d.max,_=d.pow,y=d.log10,k=d.log2,M=(t,e=1)=>d.asinh(t/e),S=1/0;function T(t,e){return w(t/e)*e}function z(t,e,n){return v(b(t,e),n)}function P(t){return"function"==typeof t?t:()=>t}const D=t=>t,E=(t,e)=>e,Y=t=>null,A=t=>!0,W=(t,e)=>t==e;function C(t,e){return x(t/e)*e}function H(t,e){return g(t/e)*e}function R(t,e){return w(t*(e=10**e))/e}const F=new Map;function L(t){return((""+t).split(".")[1]||"").length}function $(t,e,n,l){let i=[],o=l.map(L);for(let s=e;s<n;s++){let e=m(s),n=R(_(t,s),e);for(let t=0;t<l.length;t++){let r=l[t]*n,a=(r>=0&&s>=0?0:e)+(s>=o[t]?0:o[t]),u=R(r,a);i.push(u),F.set(u,a)}}return i}const N={},O=[null,null],I=Array.isArray;function j(t){return"string"==typeof t}function B(t){let e=!1;if(null!=t){let n=t.constructor;e=null==n||n==Object}return e}function G(t){return null!=t&&"object"==typeof t}function J(t,e){let n;if(e=e||B,I(t))n=t.map((t=>J(t,e)));else if(e(t))for(var l in n={},t)n[l]=J(t[l],e);else n=t;return n}function U(t){let e=arguments;for(let n=1;n<e.length;n++){let l=e[n];for(let e in l)B(t[e])?U(t[e],J(l[e])):t[e]=J(l[e])}return t}function V(t,e,n){for(let l,i=0,o=-1;i<e.length;i++){let s=e[i];if(s>o){for(l=s-1;l>=0&&null==t[l];)t[l--]=null;for(l=s+1;l<n&&null==t[l];)t[o=l++]=null}}}const q="undefined"==typeof queueMicrotask?t=>Promise.resolve().then(t):queueMicrotask,K="u-off",Z=document,X=window,Q=devicePixelRatio;function tt(t,e){if(null!=e){let n=t.classList;!n.contains(e)&&n.add(e)}}function et(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function nt(t,e,n){t.style[e]=n+"px"}function lt(t,e,n,l){let i=Z.createElement(t);return null!=e&&tt(i,e),null!=n&&n.insertBefore(i,l),i}function it(t,e){return lt("div",t,e)}function ot(t,e,n,l,i){t.style.transform="translate("+e+"px,"+n+"px)",e<0||n<0||e>l||n>i?tt(t,K):et(t,K)}const st={passive:!0},rt=U({capture:!0},st);function at(t,e,n,l){e.addEventListener(t,n,l?rt:st)}function ut(t,e,n,l){e.removeEventListener(t,n,l?rt:st)}const ct=["January","February","March","April","May","June","July","August","September","October","November","December"],ft=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ht(t){return t.slice(0,3)}const dt=ft.map(ht),pt=ct.map(ht),mt={MMMM:ct,MMM:pt,WWWW:ft,WWW:dt};function gt(t){return(t<10?"0":"")+t}const wt={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>gt(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>gt(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>gt(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return 0==e?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>gt(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>gt(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>{return((e=t.getMilliseconds())<10?"00":e<100?"0":"")+e;var e}};function xt(t,e){e=e||mt;let n,l=[],i=/\{([a-z]+)\}|[^{]+/gi;for(;n=i.exec(t);)l.push("{"==n[0][0]?wt[n[1]]:n[0]);return t=>{let n="";for(let i=0;i<l.length;i++)n+="string"==typeof l[i]?l[i]:l[i](t,e);return n}}const vt=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const bt=t=>t%1==0,_t=[1,2,2.5,5],yt=$(10,-16,0,_t),kt=$(10,0,16,_t),Mt=kt.filter(bt),St=yt.concat(kt),Tt="{M}/{D}",zt="\n"+Tt,Pt=zt+"/{YY}",Dt="{h}:{mm}{aa}",Et=null;function Yt(t){let e=1e3*t,n=60*e,l=60*n,i=24*l,o=30*i,s=365*i;return[(1==t?$(10,0,3,_t).filter(bt):$(10,-3,0,_t)).concat([e,5*e,10*e,15*e,30*e,n,5*n,10*n,15*n,30*n,l,2*l,3*l,4*l,6*l,8*l,12*l,i,2*i,3*i,4*i,5*i,6*i,7*i,8*i,9*i,10*i,15*i,o,2*o,3*o,4*o,6*o,s,2*s,5*s,10*s,25*s,50*s,100*s]),[[s,"{YYYY}",Et,Et,Et,Et,Et,Et,1],[28*i,"{MMM}","\n{YYYY}",Et,Et,Et,Et,Et,1],[i,Tt,"\n{YYYY}",Et,Et,Et,Et,Et,1],[l,"{h}{aa}",Pt,Et,zt,Et,Et,Et,1],[n,Dt,Pt,Et,zt,Et,Et,Et,1],[e,":{ss}",Pt+" "+Dt,Et,zt+" "+Dt,Et,"\n{h}:{mm}{aa}",Et,1],[t,":{ss}.{fff}",Pt+" "+Dt,Et,zt+" "+Dt,Et,"\n{h}:{mm}{aa}",Et,1]],function(e){return(r,a,u,c,f,h)=>{let d=[],p=f>=s,m=f>=o&&f<s,x=e(u),v=R(x*t,3),b=Nt(x.getFullYear(),p?0:x.getMonth(),m||p?1:x.getDate()),_=R(b*t,3);if(m||p){let n=m?f/o:0,l=p?f/s:0,i=v==_?v:R(Nt(b.getFullYear()+l,b.getMonth()+n,1)*t,3),r=new Date(w(i/t)),a=r.getFullYear(),u=r.getMonth();for(let o=0;i<=c;o++){let s=Nt(a+l*o,u+n*o,1),r=s-e(R(s*t,3));i=R((+s+r)*t,3),i<=c&&d.push(i)}}else{let o=f>=i?i:f,s=_+(g(u)-g(v))+C(v-_,o);d.push(s);let p=e(s),m=p.getHours()+p.getMinutes()/n+p.getSeconds()/l,w=f/l,x=h/r.axes[a]._space;for(;s=R(s+f,1==t?0:3),!(s>c);)if(w>1){let t=g(R(m+w,6))%24,n=e(s).getHours()-t;n>1&&(n=-1),s-=n*l,m=(m+w)%24,R((s-d[d.length-1])/f,3)*x>=.7&&d.push(s)}else d.push(s)}return d}}]}const[At,Wt,Ct]=Yt(1),[Ht,Rt,Ft]=Yt(.001);function Lt(t,e){return t.map((t=>t.map(((n,l)=>0==l||8==l||null==n?n:e(1==l||0==t[8]?n:t[1]+n)))))}function $t(t,e){return(n,l,i,o,s)=>{let r,a,u,c,f,h,d=e.find((t=>s>=t[0]))||e[e.length-1];return l.map((e=>{let n=t(e),l=n.getFullYear(),i=n.getMonth(),o=n.getDate(),s=n.getHours(),p=n.getMinutes(),m=n.getSeconds(),g=l!=r&&d[2]||i!=a&&d[3]||o!=u&&d[4]||s!=c&&d[5]||p!=f&&d[6]||m!=h&&d[7]||d[1];return r=l,a=i,u=o,c=s,f=p,h=m,g(n)}))}}function Nt(t,e,n){return new Date(t,e,n)}function Ot(t,e){return e(t)}$(2,-53,53,[1]);function It(t,e){return(n,l)=>e(t(l))}const jt={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:function(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null},fill:function(t,e){return t.series[e].fill(t,e)},dash:"solid"},idx:null,values:[]};const Bt=[0,0];function Gt(t,e,n){return t=>{0==t.button&&n(t)}}function Jt(t,e,n){return n}const Ut={show:!0,x:!0,y:!0,lock:!1,move:function(t,e,n){return Bt[0]=e,Bt[1]=n,Bt},points:{show:function(t,e){let n=t.cursor.points,l=it(),i=n.stroke(t,e),o=n.fill(t,e);l.style.background=o||i;let s=n.size(t,e),r=n.width(t,e,s);r&&(l.style.border=r+"px solid "+i);let a=s/-2;return nt(l,"width",s),nt(l,"height",s),nt(l,"marginLeft",a),nt(l,"marginTop",a),l},size:function(t,e){return fe(t.series[e].width,1)},width:0,stroke:function(t,e){return t.series[e].stroke(t,e)},fill:function(t,e){return t.series[e].stroke(t,e)}},bind:{mousedown:Gt,mouseup:Gt,click:Gt,dblclick:Gt,mousemove:Jt,mouseleave:Jt,mouseenter:Jt},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:function(t,e,n){return n}},Vt={show:!0,stroke:"rgba(0,0,0,0.07)",width:2,filter:E},qt=U({},Vt,{size:10}),Kt='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Zt="bold "+Kt,Xt={show:!0,scale:"x",stroke:"#000",space:50,gap:5,size:50,labelSize:30,labelFont:Zt,side:2,grid:Vt,ticks:qt,font:Kt,rotate:0},Qt={show:!0,scale:"x",auto:!1,sorted:1,min:S,max:-S,idxs:[]};function te(t,e,n,l,i){return e.map((t=>null==t?"":h(t)))}function ee(t,e,n,l,i,o,s){let r=[],a=F.get(i)||0;for(let u=n=s?n:R(C(n,i),a);u<=l;u=R(u+i,a))r.push(Object.is(u,-0)?0:u);return r}function ne(t,e,n,l,i,o,s){const r=[],a=t.scales[t.axes[e].scale].log,u=g((10==a?y:k)(n));i=_(a,u),u<0&&(i=R(i,-u));let c=n;do{r.push(c),c=R(c+i,F.get(i)),c>=i*a&&(i=c)}while(c<=l);return r}function le(t,e,n,l,i,o,s){let r=t.scales[t.axes[e].scale].asinh,a=l>r?ne(t,e,b(r,n),l,i):[r],u=l>=0&&n<=0?[0]:[];return(n<-r?ne(t,e,b(r,-l),-n,i):[r]).reverse().map((t=>-t)).concat(u,a)}const ie=/./,oe=/[12357]/,se=/[125]/,re=/1/;function ae(t,e,n,l,i){let o=t.axes[n],s=o.scale,r=t.scales[s];if(3==r.distr&&2==r.log)return e;let a=t.valToPos,u=o._space,c=a(10,s),f=a(9,s)-c>=u?ie:a(7,s)-c>=u?oe:a(5,s)-c>=u?se:re;return e.map((t=>4==r.distr&&0==t||f.test(t)?t:null))}function ue(t,e){return null==e?"":h(e)}const ce={show:!0,scale:"y",stroke:"#000",space:30,gap:5,size:50,labelSize:30,labelFont:Zt,side:3,grid:Vt,ticks:qt,font:Kt,rotate:0};function fe(t,e){return R((3+2*(t||1))*e,3)}function he(t,e,n,l){let i=t.scales[t.series[e].scale],o=t.bands&&t.bands.some((t=>t.series[0]==e));return 3==i.distr||o?i.min:0}const de={scale:"y",auto:!0,sorted:0,show:!0,band:!1,spanGaps:!1,alpha:1,points:{show:function(t,e){let n=(0==t.scales[t.series[0].scale].ori?t.bbox.width:t.bbox.height)/(t.series[e].points.space*Q),l=t.series[0].idxs;return l[1]-l[0]<=n}},values:null,min:S,max:-S,idxs:[],path:null,clip:null};function pe(t,e,n,l,i){return n/10}const me={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ge=U({},me,{time:!1,ori:1}),we={};function xe(t,e){let n=we[t];return n||(n={key:t,plots:[],sub(t){n.plots.push(t)},unsub(t){n.plots=n.plots.filter((e=>e!=t))},pub(t,e,l,i,o,s,r){for(let a=0;a<n.plots.length;a++)n.plots[a]!=e&&n.plots[a].pub(t,e,l,i,o,s,r)}},null!=t&&(we[t]=n)),n}function ve(t,e,n){const l=t.series[e],i=t.scales,o=t.bbox,s=i[t.series[0].scale];let r=t._data[0],a=t._data[e],u=s,c=i[l.scale],f=o.left,h=o.top,d=o.width,p=o.height,m=t.valToPosH,g=t.valToPosV;return 0==u.ori?n(l,r,a,u,c,m,g,f,h,d,p,Me,Te,Pe,Ee,Ae):n(l,r,a,u,c,g,m,h,f,p,d,Se,ze,De,Ye,We)}function be(t,e,n,l,i){return ve(t,e,((t,e,o,s,r,a,u,c,f,h,d)=>{const p=s.dir*(0==s.ori?1:-1),m=0==s.ori?Te:ze;let g,w;1==p?(g=n,w=l):(g=l,w=n);let x=T(a(e[g],s,h,c),.5),v=T(u(o[g],r,d,f),.5),b=T(a(e[w],s,h,c),.5),_=T(u(r.max,r,d,f),.5),y=new Path2D(i);return m(y,b,_),m(y,x,_),m(y,x,v),y}))}function _e(t,e,n,l,i,o){let s=null;if(t.length>0){s=new Path2D;const r=0==e?Pe:De;let a=n;for(let e=0;e<t.length;e++){let n=t[e];r(s,a,l,n[0]-a,l+o),a=n[1]}r(s,a,l,n+i-a,l+o)}return s}function ye(t,e,n){if(n>e){let l=t[t.length-1];l&&l[0]==e?l[1]=n:t.push([e,n])}}function ke(t){return 0==t?D:1==t?w:e=>T(e,t)}function Me(t,e,n){t.moveTo(e,n)}function Se(t,e,n){t.moveTo(n,e)}function Te(t,e,n){t.lineTo(e,n)}function ze(t,e,n){t.lineTo(n,e)}function Pe(t,e,n,l,i){t.rect(e,n,l,i)}function De(t,e,n,l,i){t.rect(n,e,i,l)}function Ee(t,e,n,l,i,o){t.arc(e,n,l,i,o)}function Ye(t,e,n,l,i,o){t.arc(n,e,l,i,o)}function Ae(t,e,n,l,i,o,s){t.bezierCurveTo(e,n,l,i,o,s)}function We(t,e,n,l,i,o,s){t.bezierCurveTo(n,e,i,l,s,o)}function Ce(t){return(e,n,l,i,o,s)=>{l!=i&&(o!=l&&s!=l&&t(e,n,l),o!=i&&s!=i&&t(e,n,i),t(e,n,s))}}const He=Ce(Te),Re=Ce(ze);function Fe(){return(t,e,l,i)=>ve(t,e,((o,s,r,a,u,c,f,h,d,p,m)=>{let g,w,x=o.pxRound;0==a.ori?(g=Te,w=He):(g=ze,w=Re);const _=a.dir*(0==a.ori?1:-1),y={stroke:new Path2D,fill:null,clip:null,band:null},k=y.stroke;let M,z,P,D,E=S,Y=-S,A=[],W=x(c(s[1==_?l:i],a,p,h)),C=!1,H=n(r,l,i,1*_),R=n(r,l,i,-1*_),F=T(c(s[H],a,p,h),.5),L=T(c(s[R],a,p,h),.5);F>h&&ye(A,h,F);for(let t=1==_?l:i;t>=l&&t<=i;t+=_){let e=x(c(s[t],a,p,h));if(e==W)null!=r[t]?(z=x(f(r[t],u,m,d)),E==S&&(g(k,e,z),M=z),E=v(z,E),Y=b(z,Y)):C||null!==r[t]||(C=!0);else{let n=!1;E!=S?(w(k,W,E,Y,M,z),P=D=W):C&&(n=!0,C=!1),null!=r[t]?(z=x(f(r[t],u,m,d)),g(k,e,z),E=Y=M=z,e-W>1&&null===r[t-_]&&(n=!0)):(E=S,Y=-S,C||null!==r[t]||(C=!0)),n&&ye(A,P,e),W=e}}if(E!=S&&E!=Y&&D!=W&&w(k,W,E,Y,M,z),L<h+p&&ye(A,L,h+p),null!=o.fill){let n=y.fill=new Path2D(k),l=x(f(o.fillTo(t,e,o.min,o.max),u,m,d));g(n,L,l),g(n,F,l)}return o.spanGaps||(y.clip=_e(A,a.ori,h,d,p,m)),t.bands.length>0&&(y.band=be(t,e,l,i,k)),y}))}function Le(t,e,n,l,i,o){const s=t.length;if(s<2)return null;const r=new Path2D;if(n(r,t[0],e[0]),2==s)l(r,t[1],e[1]);else{let n=Array(s),l=Array(s-1),o=Array(s-1),a=Array(s-1);for(let i=0;i<s-1;i++)o[i]=e[i+1]-e[i],a[i]=t[i+1]-t[i],l[i]=o[i]/a[i];n[0]=l[0];for(let t=1;t<s-1;t++)0===l[t]||0===l[t-1]||l[t-1]>0!=l[t]>0?n[t]=0:(n[t]=3*(a[t-1]+a[t])/((2*a[t]+a[t-1])/l[t-1]+(a[t]+2*a[t-1])/l[t]),isFinite(n[t])||(n[t]=0));n[s-1]=l[s-2];for(let u=0;u<s-1;u++)i(r,t[u]+a[u]/3,e[u]+n[u]*a[u]/3,t[u+1]-a[u]/3,e[u+1]-n[u+1]*a[u]/3,t[u+1],e[u+1])}return r}const $e=new Set;function Ne(){$e.forEach((t=>{t.syncRect(!0)}))}at("resize",X,Ne),at("scroll",X,Ne,!0);const Oe=Fe();function Ie(t,e,n,l){return(l?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map(((t,l)=>je(t,l,e,n)))}function je(t,e,n,l){return U({},0==e?n:l,t)}function Be(t,e,n){return null==e?O:[e,n]}const Ge=Be;function Je(t,e,n){return null==e?O:u(e,n,.1,!0)}function Ue(t,e,n,l){return null==e?O:o(e,n,t.scales[l].log,!1)}const Ve=Ue;function qe(t,e,n,l){return null==e?O:s(e,n,t.scales[l].log,!1)}const Ke=qe;function Ze(t){let e;return[t=t.replace(/(\d+)px/,((t,n)=>(e=w(n*Q))+"px")),e]}function Xe(t,n,l){const i={};function r(t,e){return((3==e.distr?y(t>0?t:e.clamp(i,t,e.min,e.max,e.key)):4==e.distr?M(t,e.asinh):t)-e._min)/(e._max-e._min)}function a(t,e,n,l){let i=r(t,e);return l+n*(-1==e.dir?1-i:i)}function f(t,e,n,l){let i=r(t,e);return l+n*(-1==e.dir?i:1-i)}function h(t,e,n,l){return 0==e.ori?a(t,e,n,l):f(t,e,n,l)}i.valToPosH=a,i.valToPosV=f;let k=!1;i.status=0;const D=i.root=it("uplot");if(null!=t.id&&(D.id=t.id),tt(D,t.class),t.title){it("u-title",D).textContent=t.title}const H=lt("canvas"),L=i.ctx=H.getContext("2d"),$=it("u-wrap",D),V=i.under=it("u-under",$);$.appendChild(H);const X=i.over=it("u-over",$),st=+c((t=J(t)).pxAlign,1),rt=ke(st);(t.plugins||[]).forEach((e=>{e.opts&&(t=e.opts(i,t)||t)}));const ct=t.ms||.001,ft=i.series=Ie(t.series||[],Qt,de,!1),ht=i.axes=Ie(t.axes||[],Xt,ce,!0),dt=i.scales={},pt=i.bands=t.bands||[];pt.forEach((t=>{t.fill=P(t.fill||null)}));const mt=ft[0].scale,gt={axes:function(){ht.forEach(((t,e)=>{if(!t.show||!t._show)return;let n,l,o=dt[t.scale],s=t.side,r=s%2,a=0==r?Re:Fe,u=0==r?Ce:He,c=w(t.gap*Q),[f,d]=t._found,m=t.stroke(i,e);if(t.label){L.save();let e=w(t._lpos*Q);1==r?(n=l=0,L.translate(e,w(He+Fe/2)),L.rotate((3==s?-p:p)/2)):(n=w(Ce+Re/2),l=e),L.font=t.labelFont[0],L.fillStyle=m,L.textAlign="center",L.textBaseline=2==s?"top":"bottom",L.fillText(t.label,n,l),L.restore()}if(0==d)return;let g=t._splits,x=2==o.distr?g.map((t=>wn[t])):g,v=2==o.distr?wn[g[1]]-wn[g[0]]:f,b=t.ticks,_=b.show?w(b.size*Q):0,y=t._rotate*-p/180,k=rt(t._pos*Q),M=k+(_+c)*(0==r&&0==s||1==r&&3==s?-1:1);l=0==r?M:0,n=1==r?M:0,L.font=t.font[0],L.fillStyle=m,L.textAlign=1==t.align?"left":2==t.align?"right":y>0?"left":y<0?"right":0==r?"center":3==s?"right":"left",L.textBaseline=y||1==r?"middle":2==s?"top":"bottom";let S=1.5*t.font[1],T=g.map((t=>rt(h(t,o,a,u))));t._values.forEach(((t,e)=>{null!=t&&(0==r?n=T[e]:l=T[e],(""+t).split(/\n/gm).forEach(((t,e)=>{y?(L.save(),L.translate(n,l+e*S),L.rotate(y),L.fillText(t,0,0),L.restore()):L.fillText(t,n,l+e*S)})))})),b.show&&Sn(T,b.filter(i,x,e,d,v),r,s,k,_,R(b.width*Q,3),b.stroke(i,e),b.dash,b.cap);let z=t.grid;z.show&&Sn(T,z.filter(i,x,e,d,v),r,0==r?2:1,0==r?He:Ce,0==r?Fe:Re,R(z.width*Q,3),z.stroke(i,e),z.dash,z.cap)})),kl("drawAxes")},series:function(){dn>0&&(ft.forEach(((t,e)=>{if(e>0&&t.show&&null==t._paths){let l=function(t){let e=z(pn-1,0,dn-1),n=z(mn+1,0,dn-1);for(;null==t[e]&&e>0;)e--;for(;null==t[n]&&n<dn-1;)n++;return[e,n]}(n[e]);t._paths=t.paths(i,e,l[0],l[1])}})),ft.forEach(((t,e)=>{e>0&&t.show&&(t._paths&&function(t){const e=ft[t],{stroke:n,fill:l,clip:o}=e._paths,s=R(e.width*Q,3),r=s%2/2,a=e._stroke=e.stroke(i,t),u=e._fill=e.fill(i,t);L.globalAlpha=e.alpha;const c=1==e.pxAlign;c&&L.translate(r,r),L.save();let f=Ce,h=He,d=Re,p=Fe,m=s*Q/2;0==e.min&&(p+=m);0==e.max&&(h-=m,p+=m);L.beginPath(),L.rect(f,h,d,p),L.clip(),o&&L.clip(o),function(t,e,n,l,o,s,r,a){let u=!1;pt.forEach(((c,f)=>{if(c.series[0]==t){let t=ft[c.series[1]],h=(t._paths||N).band;L.save();let d=null;t.show&&h&&(d=c.fill(i,f)||s,L.clip(h)),kn(e,n,l,o,d,r,a),L.restore(),u=!0}})),u||kn(e,n,l,o,s,r,a)}(t,a,s,e.dash,e.cap,u,n,l),L.restore(),c&&L.translate(-r,-r),L.globalAlpha=1}(e),t.points.show(i,e,pn,mn)&&function(t){let e=ft[t],l=e.points,o=e.pxRound;const s=R(l.width*Q,3),r=s%2/2,a=l.width>0;let u=(l.size-l.width)/2*Q,c=R(2*u,3);const f=1==e.pxAlign;f&&L.translate(r,r),L.save(),L.beginPath(),L.rect(Ce-c,He-c,Re+2*c,Fe+2*c),L.clip(),L.globalAlpha=e.alpha;const h=new Path2D,d=dt[e.scale];let m,g,w,x;0==bt.ori?(m=Re,g=Ce,w=Fe,x=He):(m=Fe,g=He,w=Re,x=Ce);for(let i=pn;i<=mn;i++)if(null!=n[t][i]){let e=o(yt(n[0][i],bt,m,g)),l=o(kt(n[t][i],d,w,x));Tt(h,e+u,l),zt(h,e,l,u,0,2*p)}const v=l._stroke=l.stroke(i,t),b=l._fill=l.fill(i,t);_n(v,s,l.dash,l.cap,b||(a?"#fff":e._stroke)),L.fill(h),a&&L.stroke(h),L.globalAlpha=1,L.restore(),f&&L.translate(-r,-r)}(e),kl("drawSeries",e))})))}},wt=(t.drawOrder||["axes","series"]).map((t=>gt[t]));function vt(e){let n=dt[e];if(null==n){let l=(t.scales||N)[e]||N;if(null!=l.from)vt(l.from),dt[e]=U({},dt[l.from],l);else{n=dt[e]=U({},e==mt?me:ge,l),n.key=e;let t=n.time,i=n.range,o=I(i);if(e!=mt&&!o&&B(i)){let t=i;i=(e,n,l)=>null==n?O:u(n,l,t)}n.range=P(i||(t?Ge:e==mt?3==n.distr?Ve:4==n.distr?Ke:Be:3==n.distr?Ue:4==n.distr?qe:Je)),n.auto=P(!o&&n.auto),n.clamp=P(n.clamp||pe),n._min=n._max=null}}}vt("x"),vt("y"),ft.forEach((t=>{vt(t.scale)})),ht.forEach((t=>{vt(t.scale)}));for(let e in t.scales)vt(e);const bt=dt[mt],_t=bt.distr;let yt,kt,Tt,zt;0==bt.ori?(tt(D,"u-hz"),yt=a,kt=f,Tt=Me,zt=Ee):(tt(D,"u-vt"),yt=f,kt=a,Tt=Se,zt=Ye);const Pt={};for(let e in dt){let t=dt[e];null==t.min&&null==t.max||(Pt[e]={min:t.min,max:t.max},t.min=t.max=null)}const Dt=t.tzDate||(t=>new Date(w(t/ct))),Et=t.fmtDate||xt,Yt=1==ct?Ct(Dt):Ft(Dt),Nt=$t(Dt,Lt(1==ct?Wt:Rt,Et)),Bt=It(Dt,Ot("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",Et)),Gt=i.legend=U({},jt,t.legend),Jt=Gt.show,Vt=Gt.markers;let qt;Vt.width=P(Vt.width),Vt.dash=P(Vt.dash),Vt.stroke=P(Vt.stroke),Vt.fill=P(Vt.fill);let Kt,Zt=[],ie=[],oe=!1,se={};if(Gt.live){const t=ft[1]?ft[1].values:null;oe=null!=t,Kt=oe?t(i,1,0):{_:0};for(let e in Kt)se[e]="--"}if(Jt)if(qt=lt("table","u-legend",D),oe){let t=lt("tr","u-thead",qt);for(var re in lt("th",null,t),Kt)lt("th","u-label",t).textContent=re}else tt(qt,"u-inline"),Gt.live&&tt(qt,"u-live");const we={show:!0},ve={show:!1};const be=new Map;function _e(t,e,n){const l=be.get(e)||{},o=ln.bind[t](i,e,n);o&&(at(t,e,l[t]=o),be.set(e,l))}function ye(t,e,n){const l=be.get(e)||{};for(let i in l)null!=t&&i!=t||(ut(i,e,l[i]),delete l[i]);null==t&&be.delete(e)}let Te=0,ze=0,Pe=0,De=0,Ae=0,We=0,Ce=0,He=0,Re=0,Fe=0;i.bbox={};let Le=!1,Ne=!1,Xe=!1,Qe=!1,tn=!1;function en(t,e){t==i.width&&e==i.height||nn(t,e),Pn(!1),Xe=!0,Ne=!0,Qe=ln.left>=0,tn=!0,In()}function nn(t,e){i.width=Te=Pe=t,i.height=ze=De=e,Ae=We=0,function(){let t=!1,e=!1,n=!1,l=!1;ht.forEach(((i,o)=>{if(i.show&&i._show){let{side:o,_size:s}=i,r=o%2,a=s+(i.labelSize=null!=i.label?i.labelSize||30:0);a>0&&(r?(Pe-=a,3==o?(Ae+=a,l=!0):n=!0):(De-=a,0==o?(We+=a,t=!0):e=!0))}})),un[0]=t,un[1]=n,un[2]=e,un[3]=l,Pe-=hn[1]+hn[3],Ae+=hn[3],De-=hn[2]+hn[0],We+=hn[0]}(),function(){let t=Ae+Pe,e=We+De,n=Ae,l=We;function i(i,o){switch(i){case 1:return t+=o,t-o;case 2:return e+=o,e-o;case 3:return n-=o,n+o;case 0:return l-=o,l+o}}ht.forEach(((t,e)=>{if(t.show&&t._show){let e=t.side;t._pos=i(e,t._size),null!=t.label&&(t._lpos=i(e,t.labelSize))}}))}();let n=i.bbox;Ce=n.left=T(Ae*Q,.5),He=n.top=T(We*Q,.5),Re=n.width=T(Pe*Q,.5),Fe=n.height=T(De*Q,.5)}i.setSize=function({width:t,height:e}){en(t,e)};const ln=i.cursor=U({},Ut,t.cursor);{ln._lock=!1;let t=ln.points;t.show=P(t.show),t.size=P(t.size),t.stroke=P(t.stroke),t.width=P(t.width),t.fill=P(t.fill)}const on=i.focus=U({},t.focus||{alpha:.3},ln.focus),sn=on.prox>=0;let rn=[null];function an(t,e){let n=dt[t.scale].time,l=t.value;if(t.value=n?j(l)?It(Dt,Ot(l,Et)):l||Bt:l||ue,t.label=t.label||(n?"Time":"Value"),e>0){t.width=null==t.width?1:t.width,t.paths=t.paths||Oe||Y,t.fillTo=P(t.fillTo||he),t.pxAlign=+c(t.pxAlign,st),t.pxRound=ke(t.pxAlign),t.stroke=P(t.stroke||null),t.fill=P(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let e=fe(t.width,1),n=t.points=U({},{size:e,width:b(1,.2*e),stroke:t.stroke,space:2*e,_stroke:null,_fill:null},t.points);n.show=P(n.show),n.fill=P(n.fill),n.stroke=P(n.stroke)}if(Jt){let n=function(t,e){if(0==e&&(oe||!Gt.live))return O;let n=[],l=lt("tr","u-series",qt,qt.childNodes[e]);tt(l,t.class),t.show||tt(l,K);let o=lt("th",null,l);if(Vt.show){let t=it("u-marker",o);if(e>0){let n=Vt.width(i,e);n&&(t.style.border=n+"px "+Vt.dash(i,e)+" "+Vt.stroke(i,e)),t.style.background=Vt.fill(i,e)}}let s=it("u-label",o);for(var r in s.textContent=t.label,e>0&&(Vt.show||(s.style.color=t.width>0?Vt.stroke(i,e):Vt.fill(i,e)),_e("click",o,(e=>{if(ln._lock)return;let n=ft.indexOf(t);if(e.ctrlKey!=Gt.isolate){let t=ft.some(((t,e)=>e>0&&e!=n&&t.show));ft.forEach(((e,l)=>{l>0&&Qn(l,t?l==n?we:ve:we,Ml.setSeries)}))}else Qn(n,{show:!t.show},Ml.setSeries)})),sn&&_e("mouseenter",o,(e=>{ln._lock||Qn(ft.indexOf(t),ll,Ml.setSeries)}))),Kt){let t=lt("td","u-value",l);t.textContent="--",n.push(t)}return[l,n]}(t,e);Zt.splice(e,0,n[0]),ie.splice(e,0,n[1]),Gt.values.push(null)}if(ln.show){let n=function(t,e){if(e>0){let n=ln.points.show(i,e);if(n)return tt(n,"u-cursor-pt"),tt(n,t.class),ot(n,-10,-10,Pe,De),X.insertBefore(n,rn[e]),n}}(t,e);n&&rn.splice(e,0,n)}}i.addSeries=function(t,e){t=je(t,e=null==e?ft.length:e,Qt,de),ft.splice(e,0,t),an(ft[e],e)},i.delSeries=function(t){if(ft.splice(t,1),Jt){Gt.values.splice(t,1),ie.splice(t,1);let e=Zt.splice(t,1)[0];ye(null,e.firstChild),e.remove()}rn.length>1&&rn.splice(t,1)[0].remove()};const un=[!1,!1,!1,!1];function cn(t,e,n,l){let[i,o,s,r]=n,a=e%2,u=0;return 0==a&&(r||o)&&(u=0==e&&!i||2==e&&!s?w(Xt.size/3):0),1==a&&(i||s)&&(u=1==e&&!o||3==e&&!r?w(ce.size/2):0),u}const fn=i.padding=(t.padding||[cn,cn,cn,cn]).map((t=>P(c(t,cn)))),hn=i._padding=fn.map(((t,e)=>t(i,e,un,0)));let dn,pn=null,mn=null;const gn=ft[0].idxs;let wn=null,xn=!1;function vn(t,e){if((n=(t||[]).slice())[0]=n[0]||[],i.data=n.slice(),wn=n[0],dn=wn.length,2==_t&&(n[0]=wn.map(((t,e)=>e))),i._data=n,Pn(!0),kl("setData"),!1!==e){let t=bt;t.auto(i,xn)?bn():Xn(mt,t.min,t.max),Qe=ln.left>=0,tn=!0,In()}}function bn(){let t,e;xn=!0,dn>0?(pn=gn[0]=0,mn=gn[1]=dn-1,t=n[0][pn],e=n[0][mn],2==_t?(t=pn,e=mn):1==dn&&(3==_t?[t,e]=o(t,t,bt.log,!1):4==_t?[t,e]=s(t,t,bt.log,!1):bt.time?e=t+w(86400/ct):[t,e]=u(t,e,.1,!0))):(pn=gn[0]=t=null,mn=gn[1]=e=null),Xn(mt,t,e)}function _n(t,e,n,l,i){L.strokeStyle=t||"#0000",L.lineWidth=e,L.lineJoin="round",L.lineCap=l||"butt",L.setLineDash(n||[]),L.fillStyle=i||"#0000"}function yn(){let t=J(dt,G);for(let e in t){let n=t[e],l=Pt[e];if(null!=l&&null!=l.min)U(n,l),e==mt&&Pn(!0);else if(e!=mt)if(0==dn&&null==n.from){let t=n.range(i,null,null,e);n.min=t[0],n.max=t[1]}else n.min=S,n.max=-S}if(dn>0){ft.forEach(((l,o)=>{let s=l.scale,r=t[s],a=Pt[s];if(0==o){let t=r.range(i,r.min,r.max,s);r.min=t[0],r.max=t[1],pn=e(r.min,n[0]),mn=e(r.max,n[0]),n[0][pn]<r.min&&pn++,n[0][mn]>r.max&&mn--,l.min=wn[pn],l.max=wn[mn]}else if(l.show&&l.auto&&r.auto(i,xn)&&(null==a||null==a.min)){let t=null==l.min?3==r.distr?function(t,e,n){let l=S,i=-S;for(let o=e;o<=n;o++)t[o]>0&&(l=v(l,t[o]),i=b(i,t[o]));return[l==S?1:l,i==-S?10:i]}(n[o],pn,mn):function(t,e,n,l){let i=S,o=-S;if(1==l)i=t[e],o=t[n];else if(-1==l)i=t[n],o=t[e];else for(let s=e;s<=n;s++)null!=t[s]&&(i=v(i,t[s]),o=b(o,t[s]));return[i,o]}(n[o],pn,mn,l.sorted):[l.min,l.max];r.min=v(r.min,l.min=t[0]),r.max=b(r.max,l.max=t[1])}l.idxs[0]=pn,l.idxs[1]=mn}));for(let e in t){let n=t[e],l=Pt[e];if(null==n.from&&(null==l||null==l.min)){let t=n.range(i,n.min==S?null:n.min,n.max==-S?null:n.max,e);n.min=t[0],n.max=t[1]}}}for(let e in t){let n=t[e];if(null!=n.from){let l=t[n.from],o=n.range(i,l.min,l.max,e);n.min=o[0],n.max=o[1]}}let l={},o=!1;for(let e in t){let n=t[e],i=dt[e];if(i.min!=n.min||i.max!=n.max){i.min=n.min,i.max=n.max;let t=i.distr;i._min=3==t?y(i.min):4==t?M(i.min,i.asinh):i.min,i._max=3==t?y(i.max):4==t?M(i.max,i.asinh):i.max,l[e]=o=!0}}if(o){ft.forEach((t=>{l[t.scale]&&(t._paths=null)}));for(let t in l)Xe=!0,kl("setScale",t);ln.show&&(Qe=ln.left>=0)}for(let e in Pt)Pt[e]=null}function kn(t,e,n,l,i,o,s){_n(t,e,n,l,i),i&&s&&L.fill(s),t&&o&&e&&L.stroke(o)}function Mn(t,e,n,l){let o,s=ht[t];if(l<=0)o=[0,0];else{let r=s._space=s.space(i,t,e,n,l),a=s._incrs=s.incrs(i,t,e,n,l,r);o=s._found=function(t,e,n,l,i){let o=l/(e-t),s=(""+g(t)).length;for(var r=0;r<n.length;r++){let t=n[r]*o,e=n[r]<10?F.get(n[r]):0;if(t>=i&&s+e<17)return[n[r],t]}return[0,0]}(e,n,a,l,r)}return o}function Sn(t,e,n,l,i,o,s,r,a,u){let c=s%2/2;1==st&&L.translate(c,c),_n(r,s,a,u),L.beginPath();let f,h,d,p,m=i+(0==l||3==l?-o:o);0==n?(h=i,p=m):(f=i,d=m),t.forEach(((t,l)=>{null!=e[l]&&(0==n?f=d=t:h=p=t,L.moveTo(f,h),L.lineTo(d,p))})),L.stroke(),1==st&&L.translate(-c,-c)}function Tn(t){let e=!0;return ht.forEach(((n,l)=>{if(!n.show)return;let o=dt[n.scale];if(null==o.min)return void(n._show&&(e=!1,n._show=!1,Pn(!1)));n._show||(e=!1,n._show=!0,Pn(!1));let s=n.side,r=s%2,{min:a,max:u}=o,[c,f]=Mn(l,a,u,0==r?Pe:De);if(0==f)return;let h=2==o.distr,d=n._splits=n.splits(i,l,a,u,c,f,h),p=2==o.distr?d.map((t=>wn[t])):d,m=2==o.distr?wn[d[1]]-wn[d[0]]:c,g=n._values=n.values(i,n.filter(i,p,l,f,m),l,f,m);n._rotate=2==s?n.rotate(i,g,l,f):0;let w=n._size;n._size=x(n.size(i,g,l,t)),null!=w&&n._size!=w&&(e=!1)})),e}function zn(t){let e=!0;return fn.forEach(((n,l)=>{let o=n(i,l,un,t);o!=hn[l]&&(e=!1),hn[l]=o})),e}function Pn(t){ft.forEach(((e,n)=>{n>0&&(e._paths=null,t&&(e.min=null,e.max=null))}))}i.setData=vn;let Dn,En,Yn,An,Wn,Cn,Hn,Rn,Fn,Ln,$n,Nn,On=!1;function In(){On||(q(jn),On=!0)}function jn(){Le&&(yn(),Le=!1),Xe&&(!function(){let t=!1,e=0;for(;!t;){e++;let n=Tn(e),l=zn(e);t=3==e||n&&l,t||(nn(i.width,i.height),Ne=!0)}}(),Xe=!1),Ne&&(nt(V,"left",Ae),nt(V,"top",We),nt(V,"width",Pe),nt(V,"height",De),nt(X,"left",Ae),nt(X,"top",We),nt(X,"width",Pe),nt(X,"height",De),nt($,"width",Te),nt($,"height",ze),H.width=w(Te*Q),H.height=w(ze*Q),pl(!1),kl("setSize"),Ne=!1),Te>0&&ze>0&&(L.clearRect(0,0,H.width,H.height),kl("drawClear"),wt.forEach((t=>t())),kl("draw")),ln.show&&Qe&&(hl(),Qe=!1),k||(k=!0,i.status=1,kl("ready")),xn=!1,On=!1}function Bn(t,l){let o=dt[t];if(null==o.from){if(0==dn){let e=o.range(i,l.min,l.max,t);l.min=e[0],l.max=e[1]}if(l.min>l.max){let t=l.min;l.min=l.max,l.max=t}if(dn>1&&null!=l.min&&null!=l.max&&l.max-l.min<1e-16)return;t==mt&&2==o.distr&&dn>0&&(l.min=e(l.min,n[0]),l.max=e(l.max,n[0])),Pt[t]=l,Le=!0,In()}}i.redraw=(t,e)=>{Xe=e||!1,!1!==t?Xn(mt,bt.min,bt.max):In()},i.setScale=Bn;let Gn=!1;const Jn=ln.drag;let Un=Jn.x,Vn=Jn.y;ln.show&&(ln.x&&(Dn=it("u-cursor-x",X)),ln.y&&(En=it("u-cursor-y",X)),0==bt.ori?(Yn=Dn,An=En):(Yn=En,An=Dn),$n=ln.left,Nn=ln.top);const qn=i.select=U({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Kn=qn.show?it("u-select",qn.over?X:V):null;function Zn(t,e){if(qn.show){for(let e in t)nt(Kn,e,qn[e]=t[e]);!1!==e&&kl("setSelect")}}function Xn(t,e,n){Bn(t,{min:e,max:n})}function Qn(t,e,n){let l=ft[t];null!=e.focus&&function(t){if(t!=nl){let e=null==t,n=1!=on.alpha;ft.forEach(((l,i)=>{let o=e||0==i||i==t;l._focus=e?null:o,n&&function(t,e){ft[t].alpha=e,ln.show&&rn[t]&&(rn[t].style.opacity=e);Jt&&Zt[t]&&(Zt[t].style.opacity=e)}(i,o?1:on.alpha)})),nl=t,n&&In()}}(t),null!=e.show&&(l.show=e.show,function(t,e){let n=ft[t],l=Jt?Zt[t]:null;n.show?l&&et(l,K):(l&&tt(l,K),rn.length>1&&ot(rn[t],-10,-10,Pe,De))}(t,e.show),Xn(l.scale,null,null),In()),kl("setSeries",t,e),n&&zl("setSeries",i,t,e)}let tl,el,nl;i.setSelect=Zn,i.setSeries=Qn,i.addBand=function(t,e){e=null==e?pt.length:e,pt.splice(e,0,t)},i.setBand=function(t,e){U(pt[t],e)},i.delBand=function(t){null==t?pt.length=0:pt.splice(t,1)};const ll={focus:!0},il={focus:!1};function ol(t,e){let n=dt[e],l=Pe;1==n.ori&&(l=De,t=l-t),-1==n.dir&&(t=l-t);let i=n._min,o=i+(n._max-i)*(t/l),s=n.distr;return 3==s?_(10,o):4==s?((t,e=1)=>d.sinh(t/e))(o,n.asinh):o}function sl(t,e){nt(Kn,"left",qn.left=t),nt(Kn,"width",qn.width=e)}function rl(t,e){nt(Kn,"top",qn.top=t),nt(Kn,"height",qn.height=e)}Jt&&sn&&at("mouseleave",qt,(t=>{ln._lock||(Qn(null,il,Ml.setSeries),hl())})),i.valToIdx=t=>e(t,n[0]),i.posToIdx=function(t){return e(ol(t,mt),n[0],pn,mn)},i.posToVal=ol,i.valToPos=(t,e,n)=>0==dt[e].ori?a(t,dt[e],n?Re:Pe,n?Ce:0):f(t,dt[e],n?Fe:De,n?He:0),i.batch=function(t){t(i),In()},i.setCursor=(t,e)=>{$n=t.left,Nn=t.top,hl(null,null,e)};let al=0==bt.ori?sl:rl,ul=1==bt.ori?sl:rl;function cl(t,e){if(null!=t){let e=t.idx;Gt.idx=e,ft.forEach(((t,n)=>{(n>0||!oe)&&fl(n,e)}))}Jt&&Gt.live&&function(){if(Jt&&Gt.live)for(let t=0;t<ft.length;t++){if(0==t&&oe)continue;let e=Gt.values[t],n=0;for(let l in e)ie[t][n++].firstChild.nodeValue=e[l]}}(),tn=!1,!1!==e&&kl("setLegend")}function fl(t,e){let l;if(null==e)l=se;else{let o=ft[t],s=0==t&&2==_t?wn:n[t];l=oe?o.values(i,t,e):{_:o.value(i,s[e],t,e)}}Gt.values[t]=l}function hl(t,l,o){let s;Fn=$n,Ln=Nn,[$n,Nn]=ln.move(i,$n,Nn),ln.show&&(Yn&&ot(Yn,w($n),0,Pe,De),An&&ot(An,0,w(Nn),Pe,De));let r=!1,a=pn>mn;tl=S;let u=0==bt.ori?Pe:De,c=1==bt.ori?Pe:De;if($n<0||0==dn||a){s=null;for(let t=0;t<ft.length;t++)t>0&&rn.length>1&&ot(rn[t],-10,-10,Pe,De);if(sn&&Qn(null,ll,Ml.setSeries),Gt.live){r=!0;for(let t=0;t<ft.length;t++)Gt.values[t]=se}}else{let t=ol(0==bt.ori?$n:Nn,mt);s=e(t,n[0],pn,mn);let l=C(yt(n[0][s],bt,u,0),.5);for(let e=0;e<ft.length;e++){let o=ft[e],a=ln.dataIdx(i,e,s,t),f=a==s?l:C(yt(n[0][a],bt,u,0),.5);if(e>0&&o.show){let t,l,i=n[e][a],s=null==i?-10:C(kt(i,dt[o.scale],c,0),.5);if(s>0){let t=m(s-Nn);t<=tl&&(tl=t,el=e)}0==bt.ori?(t=f,l=s):(t=s,l=f),rn.length>1&&ot(rn[e],t,l,Pe,De)}if(Gt.live){if(a==ln.idx&&!tn||0==e&&oe)continue;r=!0,fl(e,a)}}}if(r&&(Gt.idx=s,cl()),qn.show&&Gn)if(null!=l){let[t,e]=Ml.scales,[n,i]=Ml.match,[o,s]=l.cursor.sync.scales,r=l.cursor.drag;Un=r._x,Vn=r._y;let a,f,h,d,p,{left:g,top:w,width:x,height:b}=l.select,_=l.scales[t].ori,y=l.posToVal,k=null!=t&&n(t,o),M=null!=e&&i(e,s);k&&(0==_?(a=g,f=x):(a=w,f=b),Un?(h=dt[t],d=yt(y(a,o),h,u,0),p=yt(y(a+f,o),h,u,0),al(v(d,p),m(p-d))):al(0,u),M||ul(0,c)),M&&(1==_?(a=g,f=x):(a=w,f=b),Vn?(h=dt[e],d=kt(y(a,s),h,c,0),p=kt(y(a+f,s),h,c,0),ul(v(d,p),m(p-d))):ul(0,c),k||al(0,u))}else{let t=m(Fn-Wn),e=m(Ln-Cn);if(1==bt.ori){let n=t;t=e,e=n}Un=Jn.x&&t>=Jn.dist,Vn=Jn.y&&e>=Jn.dist;let n,l,i=Jn.uni;null!=i?Un&&Vn&&(Un=t>=i,Vn=e>=i,Un||Vn||(e>t?Vn=!0:Un=!0)):Jn.x&&Jn.y&&(Un||Vn)&&(Un=Vn=!0),Un&&(0==bt.ori?(n=Hn,l=$n):(n=Rn,l=Nn),al(v(n,l),m(l-n)),Vn||ul(0,c)),Vn&&(1==bt.ori?(n=Hn,l=$n):(n=Rn,l=Nn),ul(v(n,l),m(l-n)),Un||al(0,u)),Un||Vn||(al(0,0),ul(0,0))}if(ln.idx=s,ln.left=$n,ln.top=Nn,Jn._x=Un,Jn._y=Vn,null!=t){if(null!=Sl){let[t,e]=Ml.scales;Ml.values[0]=null!=t?ol(0==bt.ori?$n:Nn,t):null,Ml.values[1]=null!=e?ol(1==bt.ori?$n:Nn,e):null}if(zl("mousemove",i,$n,Nn,Pe,De,s),sn){let t=Ml.setSeries,e=on.prox;null==nl?tl<=e&&Qn(el,ll,t):tl>e?Qn(null,ll,t):el!=nl&&Qn(el,ll,t)}}k&&!1!==o&&kl("setCursor")}i.setLegend=cl;let dl=null;function pl(t){!0===t?dl=null:(dl=X.getBoundingClientRect(),kl("syncRect",dl))}function ml(t,e,n,l,i,o,s){ln._lock||(gl(t,e,n,l,i,o,s,!1,null!=t),null!=t?hl(1):hl(null,e))}function gl(t,e,n,l,o,s,r,a,u){if(null==dl&&pl(!1),null!=t)n=t.clientX-dl.left,l=t.clientY-dl.top;else{if(n<0||l<0)return $n=-10,void(Nn=-10);let[t,i]=Ml.scales,r=e.cursor.sync,[a,u]=r.values,[c,f]=r.scales,[d,p]=Ml.match,m=1==e.scales[c].ori,g=0==bt.ori?Pe:De,w=1==bt.ori?Pe:De,x=m?s:o,v=m?o:s,b=m?l:n,_=m?n:l;if(n=null!=c?d(t,c)?h(a,dt[t],g,0):-10:g*(b/x),l=null!=f?p(i,f)?h(u,dt[i],w,0):-10:w*(_/v),1==bt.ori){let t=n;n=l,l=t}}u&&((n<=1||n>=Pe-1)&&(n=T(n,Pe)),(l<=1||l>=De-1)&&(l=T(l,De))),a?(Wn=n,Cn=l,[Hn,Rn]=ln.move(i,n,l)):($n=n,Nn=l)}function wl(){Zn({width:0,height:0},!1)}function xl(t,e,n,l,o,s,r){Gn=!0,Un=Vn=Jn._x=Jn._y=!1,gl(t,e,n,l,o,s,0,!0,!1),null!=t&&(_e("mouseup",Z,vl),zl("mousedown",i,Hn,Rn,Pe,De,null))}function vl(t,e,n,l,o,s,r){Gn=Jn._x=Jn._y=!1,gl(t,e,n,l,o,s,0,!1,!0);let{left:a,top:u,width:c,height:f}=qn,h=c>0||f>0;if(h&&Zn(qn),Jn.setScale&&h){let t=a,e=c,n=u,l=f;if(1==bt.ori&&(t=u,e=f,n=a,l=c),Un&&Xn(mt,ol(t,mt),ol(t+e,mt)),Vn)for(let i in dt){let t=dt[i];i!=mt&&null==t.from&&t.min!=S&&Xn(i,ol(n+l,i),ol(n,i))}wl()}else ln.lock&&(ln._lock=!ln._lock,ln._lock||hl());null!=t&&(ye("mouseup",Z),zl("mouseup",i,$n,Nn,Pe,De,null))}function bl(t,e,n,l,o,s,r){bn(),wl(),null!=t&&zl("dblclick",i,$n,Nn,Pe,De,null)}const _l={};_l.mousedown=xl,_l.mousemove=ml,_l.mouseup=vl,_l.dblclick=bl,_l.setSeries=(t,e,n,l)=>{Qn(n,l)},ln.show&&(_e("mousedown",X,xl),_e("mousemove",X,ml),_e("mouseenter",X,pl),_e("mouseleave",X,(function(t,e,n,l,i,o,s){if(!ln._lock){let t=Gn;if(Gn){let t,e,n=!0,l=!0,i=10;0==bt.ori?(t=Un,e=Vn):(t=Vn,e=Un),t&&e&&(n=$n<=i||$n>=Pe-i,l=Nn<=i||Nn>=De-i),t&&n&&($n=$n<Hn?0:Pe),e&&l&&(Nn=Nn<Rn?0:De),hl(1),Gn=!1}$n=-10,Nn=-10,hl(1),t&&(Gn=t)}})),_e("dblclick",X,bl),$e.add(i),i.syncRect=pl);const yl=i.hooks=t.hooks||{};function kl(t,e,n){t in yl&&yl[t].forEach((t=>{t.call(null,i,e,n)}))}(t.plugins||[]).forEach((t=>{for(let e in t.hooks)yl[e]=(yl[e]||[]).concat(t.hooks[e])}));const Ml=U({key:null,setSeries:!1,filters:{pub:A,sub:A},scales:[mt,ft[1]?ft[1].scale:null],match:[W,W],values:[null,null]},ln.sync);ln.sync=Ml;const Sl=Ml.key,Tl=xe(Sl);function zl(t,e,n,l,i,o,s){Ml.filters.pub(t,e,n,l,i,o,s)&&Tl.pub(t,e,n,l,i,o,s)}function Pl(){kl("init",t,n),vn(n||t.data,!1),Pt[mt]?Bn(mt,Pt[mt]):bn(),en(t.width,t.height),hl(),Zn(qn,!1)}return Tl.sub(i),i.pub=function(t,e,n,l,i,o,s){Ml.filters.sub(t,e,n,l,i,o,s)&&_l[t](null,e,n,l,i,o,s)},i.destroy=function(){Tl.unsub(i),$e.delete(i),be.clear(),D.remove(),kl("destroy")},ft.forEach(an),ht.forEach((function(t,e){if(t._show=t.show,t.show){let n=t.side%2,l=dt[t.scale];null==l&&(t.scale=n?ft[1].scale:mt,l=dt[t.scale]);let o=l.time;t.size=P(t.size),t.space=P(t.space),t.rotate=P(t.rotate),t.incrs=P(t.incrs||(2==l.distr?Mt:o?1==ct?At:Ht:St)),t.splits=P(t.splits||(o&&1==l.distr?Yt:3==l.distr?ne:4==l.distr?le:ee)),t.stroke=P(t.stroke),t.grid.stroke=P(t.grid.stroke),t.ticks.stroke=P(t.ticks.stroke);let s=t.values;t.values=I(s)&&!I(s[0])?P(s):o?I(s)?$t(Dt,Lt(s,Et)):j(s)?function(t,e){let n=xt(e);return(e,l,i,o,s)=>l.map((e=>n(t(e))))}(Dt,s):s||Nt:s||te,t.filter=P(t.filter||(l.distr>=3?ae:E)),t.font=Ze(t.font),t.labelFont=Ze(t.labelFont),t._size=t.size(i,null,e,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(un[e]=!0)}})),l?l instanceof HTMLElement?(l.appendChild(D),Pl()):l(i,Pl):Pl(),i}Xe.assign=U,Xe.fmtNum=h,Xe.rangeNum=u,Xe.rangeLog=o,Xe.rangeAsinh=s,Xe.orient=ve,Xe.join=function(t,e){let n=new Set;for(let s=0;s<t.length;s++){let e=t[s][0],l=e.length;for(let t=0;t<l;t++)n.add(e[t])}let l=[Array.from(n).sort(((t,e)=>t-e))],i=l[0].length,o=new Map;for(let s=0;s<i;s++)o.set(l[0][s],s);for(let s=0;s<t.length;s++){let n=t[s],r=n[0];for(let t=1;t<n.length;t++){let a=n[t],u=Array(i).fill(void 0),c=e?e[s][t]:1,f=[];for(let t=0;t<a.length;t++){let e=a[t],n=o.get(r[t]);null===e?0!=c&&(u[n]=e,2==c&&f.push(n)):u[n]=e}V(u,f,i),l.push(u)}}return l},Xe.fmtDate=xt,Xe.tzDate=function(t,e){let n;return"UTC"==e||"Etc/UTC"==e?n=new Date(+t+6e4*t.getTimezoneOffset()):e==vt?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n},Xe.sync=xe;{Xe.addGap=ye,Xe.clipGaps=_e;let t=Xe.paths={};t.linear=Fe,t.stepped=function(t){const e=c(t.align,1),l=c(t.ascDesc,!1);return(t,i,o,s)=>ve(t,i,((r,a,u,c,f,h,d,p,m,g,w)=>{let x=r.pxRound,v=0==c.ori?Te:ze;const b={stroke:new Path2D,fill:null,clip:null,band:null},_=b.stroke,y=1*c.dir*(0==c.ori?1:-1);o=n(u,o,s,1),s=n(u,o,s,-1);let k=[],M=!1,S=x(d(u[1==y?o:s],f,w,m)),T=x(h(a[1==y?o:s],c,g,p)),z=T;v(_,T,S);for(let t=1==y?o:s;t>=o&&t<=s;t+=y){let n=u[t],i=x(h(a[t],c,g,p));if(null==n){null===n&&(ye(k,z,i),M=!0);continue}let o=x(d(n,f,w,m));if(M){if(ye(k,z,i),S!=o){let t=r.width*Q/2,n=k[k.length-1];n[0]+=l||1==e?t:-t,n[1]-=l||-1==e?t:-t}M=!1}1==e?v(_,i,S):v(_,z,o),v(_,i,o),S=o,z=i}if(null!=r.fill){let e=b.fill=new Path2D(_),n=x(d(r.fillTo(t,i,r.min,r.max),f,w,m));v(e,z,n),v(e,T,n)}return r.spanGaps||(b.clip=_e(k,c.ori,p,m,g,w)),t.bands.length>0&&(b.band=be(t,i,o,s,_)),b}))},t.bars=function(t){const e=c((t=t||N).size,[.6,S]),l=t.align||0,i=(t.gap||0)*Q,o=1-e[0],s=c(e[1],S)*Q;return(t,e,r,a)=>ve(t,e,((u,c,f,h,d,p,g,w,x,_,y)=>{let k=u.pxRound;const M=h.dir*(0==h.ori?1:-1);let S=0==h.ori?Pe:De,z=1==c.length?_:m(p(c[1],h,_,w)-p(c[0],h,_,w)),P=z*o,D=g(u.fillTo(t,e,u.min,u.max),d,y,x),E=k(u.width*Q),Y=k(v(s,z-P)-E-i);const A=(0==l?Y/2:l==M?0:Y)-l*M*i/2,W={stroke:new Path2D,fill:null,clip:null,band:null},C=t.bands.length>0;let H;C&&(W.band=new Path2D,H=T(g(d.max,d,y,x),.5));const R=W.stroke,F=W.band;for(let t=1==M?r:a;t>=r&&t<=a;t+=M){let e=f[t];if(null==e){if(!C)continue;{let l=n(f,1==M?r:a,t,-M),i=n(f,t,1==M?a:r,M),o=f[l];e=o+(t-l)/(i-l)*(f[i]-o)}}let l=p(2==h.distr?t:c[t],h,_,w),i=g(e,d,y,x),o=k(l-A),s=k(b(i,D)),u=k(v(i,D)),m=s-u;null!=f[t]&&S(R,o,u,Y,m),C&&(s=u,u=H,m=s-u,S(F,o,u,Y,m))}return null!=u.fill&&(W.fill=new Path2D(R)),W}))},t.spline=function(t){return e=Le,(t,l,i,o)=>ve(t,l,((s,r,a,u,c,f,h,d,p,m,g)=>{let w,x,v,b=s.pxRound;0==u.ori?(w=Me,v=Te,x=Ae):(w=Se,v=ze,x=We);const _=1*u.dir*(0==u.ori?1:-1);i=n(a,i,o,1),o=n(a,i,o,-1);let y=[],k=!1,M=b(f(r[1==_?i:o],u,m,d)),S=M,T=[],z=[];for(let t=1==_?i:o;t>=i&&t<=o;t+=_){let e=a[t],n=f(r[t],u,m,d);null!=e?(k&&(ye(y,S,n),k=!1),T.push(S=n),z.push(h(a[t],c,g,p))):null===e&&(ye(y,S,n),k=!0)}const P={stroke:e(T,z,w,v,x,b),fill:null,clip:null,band:null},D=P.stroke;if(null!=s.fill&&null!=D){let e=P.fill=new Path2D(D),n=b(h(s.fillTo(t,l,s.min,s.max),c,g,p));v(e,S,n),v(e,M,n)}return s.spanGaps||(P.clip=_e(y,u.ori,d,p,m,g)),t.bands.length>0&&(P.band=be(t,l,i,o,D)),P}));var e}}function Qe(t){let e=0,n=0,l=null;function i(t){let i=t.over,o=null;for(e=n=0;!i.classList.contains("u-tooltip-attach")&&"BODY"!=i.tagName;)i.offsetParent!=o&&(e+=i.offsetLeft,n+=i.offsetTop,o=i.offsetParent),i=i.parentElement;l=i;let s=t.cursortt=document.createElement("div");function r(){s.style.display=null}s.className="u-tooltip",s.innerHTML="(x,y)",s.style.pointerEvents="none",i.appendChild(s),i.addEventListener("mouseleave",(()=>{t.cursor._lock||(s.style.display="none")})),i.addEventListener("mouseenter",(()=>r())),r()}return{hooks:{setCursor:function(t){null===l&&i(t);const{left:o,top:s,idx:r}=t.cursor;if(null===r)return void(t.cursortt.innerHTML="");const a=t.over.clientWidth,u=l.clientWidth;o<a/2?(t.cursortt.style.left=e+(o+20)+"px",t.cursortt.style.right="auto"):(t.cursortt.style.right=u-(e+o-20)+"px",t.cursortt.style.left="auto"),t.over.clientHeight,t.cursortt.style.top=n+(s+10)+"px",t.cursortt.style.bottom="auto";let c="<table>";t.series.forEach(((e,n)=>{if(e.show){const l=t.data[n][r],i=e.value(t,l);c+=0==n?`<tr><th colspan="2">${i}</th></tr>`:'<tr><td><div class="u-marker" style="border-color: '+e._stroke+`"></div>${e.label}</td><td>${i}</td></tr>`}})),t.cursortt.innerHTML=c+"</table>"},setSize:function(t){l=null}}}}const tn={};var en=t({name:"TimePlotRaw",help:'Time-series chart.\nTimePlotRaw displays a time-series chart using [uPlot](https://github.com/leeoniya/uPlot).\nIt deals with resizing, and transposes the data coming in.\nThe uPlot options must be provided via the `options` input otherwise\nnothing will show. For an easier way to use uPlot see the TimePlot widget.\n\nThe documentation on the uPlot options "leaves something to be desired"...\nSee https://github.com/leeoniya/uPlot/tree/master/docs for an overview.\nMore info can be gleaned from the demos at https://leeoniya.github.io/uPlot/demos/index.html\nand the ultimate reference is https://github.com/leeoniya/uPlot/blob/master/dist/uPlot.d.ts\n\nThe data must be input in the form of "data points" where a data point is an array consisting\na unix timestamp (seconds since 1970-01-01) followed by a value per series. Null values are OK\nto designate missing data. Note: each an every data point must have one value per series.\n\nEach data message may be either an array of data points or a single data point. If an array is\nprovided then it replaces the entire dataset being shown. If a single point is provided\nit is appended to the current dataset and an old data point may be rotated out.\nNote that this "row-wise" structure gets transposed to the columnar structure expected by uPlot.\n',props:{options:{type:Object,default:()=>null},data:{type:Array,default(){},validator:t=>Array.isArray(t)&&t.length}},full_page:!0,data:()=>({chart:null,ro:null,width:40,chart_data:null,dark_watcher:null}),watch:{options(){console.log("Time-plot options changed"),this._destroy(),this._create()},data(t){if(!t)return;const e=Array.isArray(t[0]);if(this.chart&&this.chart_data&&!e){const e=this.chart_data.length;for(let l=0;l<e;l++)this.chart_data[l].push(t[l]);const n=Math.max(this.width/2,20);for(;this.chart_data[0].length>n;)for(let t=0;t<e;t++)this.chart_data[t].shift();this.chart.setData(this.chart_data)}else this.chart&&this._destroy(),this.chart_data=this._transpose(e?t:[t]),this._create()}},mounted(){this._create();const t=this;this.dark_watcher=this.$watch((()=>t.$vuetify.theme.dark),(()=>{this._destroy(),this._create()}))},beforeDestroy(){console.log("BeforeDestroy uPlot",this.ro),this.ro&&this.ro(),this.ro=null,this._destroy(),this.dark_watcher()},methods:{_destroy(){this.chart&&(console.log("Destroying uPlot"),this.chart.destroy(),this.chart=null)},_observeSize(){this.ro&&this.ro(),this.ro=null;const t=this.$el.children[0];if(!t)return console.log("TPR: cannot observe: no uplot"),{width:0,height:0};const e=t.children[0];if(!e)return console.log("TPR: cannot observe: no uwrap"),{width:0,height:0};console.log("TPR: observing size"),this._onResize(e);const n=new ResizeObserver((()=>this._onResize(e))).observe(e);this.ro=()=>n&&n.unobserve(e)},_calcSize(t){let e=this.options.width||t.clientWidth,n=this.options.height||t.clientHeight;return console.log(`Time-plot container sized to ${e}x${n}`),this.width=e,{width:e,height:n}},_onResize(t){this.chart&&this.chart.setSize(this._calcSize(t))},_transpose(t){if(!t||0==t.length)return[];t[0].map;let e=t[0].map((()=>Array(t.length)));return t.forEach(((t,n)=>{t.forEach(((t,l)=>{e[l][n]=t}))})),e},_create(){if(console.log("Creating uPlot"),!this.chart_data||0===this.chart_data.length)return;if(!this.options||!this.options.series||this.options.series.length<2)return;let t=JSON.parse(JSON.stringify(this.options));for(let l=1;l<t.series.length;l++){const e=t.series[l];"string"==typeof e.value&&(e.value=new Function("u","v",`"use strict";return (${e.value})`),this.$vuetify.theme.dark&&(e.points||(e.points={}),e.points.fill||(e.points.fill="#1e1e1e")))}const e=t.series[0];e.value||(e.value="{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}");for(let l=0;l<t.axes.length;l++){const e=t.axes[l];l>0&&"string"==typeof e.values&&(e.values=new Function("u","vv","s",`"use strict";return (${e.values})`)),this.$vuetify.theme.dark&&(e.grid||(e.grid={}),e.grid.stroke||(e.grid.stroke="#444"),e.stroke||(e.stroke="#ccc"))}Object.values(t.scales||{}).forEach((t=>{"string"==typeof t.range&&(t.range=new Function("u","min","max",`"use strict";return (${t.range})`))})),t.padding=[8,null,null,null];const n=Qe();console.log("Tooltip:",n),t.plugins=[Qe()],t.legend={live:!1},console.log("uPlot options:",t),this.chart=new Xe(t,this.chart_data,this.$el),this.$nextTick((()=>this._observeSize()))}}},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"px-1 width100 flex-grow-1 flex-shrink-1"})}),[],!1,(function(t){for(let e in tn)this[e]=tn[e]}),null,null,null);en.options.__file="src/widgets/time-plot-raw.vue";var nn=en.exports;export default nn;
