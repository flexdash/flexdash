import{n as t}from"./index.e4dd5f0f.js";import"./vue.87a98c28.js";import"./vuetify.568efa99.js";function e(t,e,l,n){let i;l=l||0;let o=(n=n||e.length-1)<=2147483647;for(;n-l>1;)i=o?l+n>>1:g((l+n)/2),e[i]<t?l=i:n=i;return t-e[l]<=e[n]-t?l:n}function l(t,e,l,n){for(let i=1==n?e:l;i>=e&&i<=l;i+=n)if(null!=t[i])return i;return-1}const n=[0,0];function i(t,e,l,i){return n[0]=l<0?R(t,-l):t,n[1]=i<0?R(e,-i):e,n}function o(t,e,l,n){let o,s,r,a=10==l?y:k;return t==e&&(t/=l,e*=l),n?(o=g(a(t)),s=x(a(e)),r=i(_(l,o),_(l,s),o,s),t=r[0],e=r[1]):(o=g(a(m(t))),s=g(a(m(e))),r=i(_(l,o),_(l,s),o,s),t=H(t,r[0]),e=C(e,r[1])),[t,e]}function s(t,e,l,n){let i=o(t,e,l,n);return 0==t&&(i[0]=0),0==e&&(i[1]=0),i}const r={pad:0,soft:null,mode:0},a={min:r,max:r};function u(t,e,l,n){return B(l)?f(t,e,l):(r.pad=l,r.soft=n?0:null,r.mode=n?3:0,f(t,e,a))}function c(t,e){return null==t?e:t}function f(t,e,l){let n=l.min,i=l.max,o=c(n.pad,0),s=c(i.pad,0),r=c(n.hard,-S),a=c(i.hard,S),u=c(n.soft,S),f=c(i.soft,-S),h=c(n.mode,0),d=c(i.mode,0),p=e-t;p<1e-9&&(p=0);let w=p||m(e)||1e3,x=y(w),k=_(10,g(x)),M=R(H(t-w*(0==p?0==t?.1:1:o),k/10),9),T=t>=u&&(1==h||3==h&&M<=u||2==h&&M>=u)?u:S,z=b(r,M<T&&t>=T?T:v(T,M)),P=R(C(e+w*(0==p?0==e?.1:1:s),k/10),9),D=e<=f&&(1==d||3==d&&P>=f||2==d&&P<=f)?f:-S,E=v(a,P>D&&e<=D?D:b(D,P));return z==E&&0==z&&(E=100),[z,E]}const h=new Intl.NumberFormat(navigator.language).format,d=Math,p=d.PI,m=d.abs,g=d.floor,w=d.round,x=d.ceil,v=d.min,b=d.max,_=d.pow,y=d.log10,k=d.log2,M=(t,e=1)=>d.asinh(t/e),S=1/0;function T(t,e){return w(t/e)*e}function z(t,e,l){return v(b(t,e),l)}function P(t){return"function"==typeof t?t:()=>t}const D=t=>t,E=(t,e)=>e,Y=t=>null,A=t=>!0,W=(t,e)=>t==e;function C(t,e){return x(t/e)*e}function H(t,e){return g(t/e)*e}function R(t,e){return w(t*(e=10**e))/e}const F=new Map;function L(t){return((""+t).split(".")[1]||"").length}function $(t,e,l,n){let i=[],o=n.map(L);for(let s=e;s<l;s++){let e=m(s),l=R(_(t,s),e);for(let t=0;t<n.length;t++){let r=n[t]*l,a=(r>=0&&s>=0?0:e)+(s>=o[t]?0:o[t]),u=R(r,a);i.push(u),F.set(u,a)}}return i}const N={},O=[null,null],I=Array.isArray;function j(t){return"string"==typeof t}function B(t){let e=!1;if(null!=t){let l=t.constructor;e=null==l||l==Object}return e}function G(t){return null!=t&&"object"==typeof t}function J(t,e){let l;if(e=e||B,I(t))l=t.map((t=>J(t,e)));else if(e(t))for(var n in l={},t)l[n]=J(t[n],e);else l=t;return l}function U(t){let e=arguments;for(let l=1;l<e.length;l++){let n=e[l];for(let e in n)B(t[e])?U(t[e],J(n[e])):t[e]=J(n[e])}return t}function V(t,e,l){for(let n,i=0,o=-1;i<e.length;i++){let s=e[i];if(s>o){for(n=s-1;n>=0&&null==t[n];)t[n--]=null;for(n=s+1;n<l&&null==t[n];)t[o=n++]=null}}}const q="undefined"==typeof queueMicrotask?t=>Promise.resolve().then(t):queueMicrotask,K="u-off",Z=document,X=window,Q=devicePixelRatio;function tt(t,e){if(null!=e){let l=t.classList;!l.contains(e)&&l.add(e)}}function et(t,e){let l=t.classList;l.contains(e)&&l.remove(e)}function lt(t,e,l){t.style[e]=l+"px"}function nt(t,e,l,n){let i=Z.createElement(t);return null!=e&&tt(i,e),null!=l&&l.insertBefore(i,n),i}function it(t,e){return nt("div",t,e)}function ot(t,e,l,n,i){t.style.transform="translate("+e+"px,"+l+"px)",e<0||l<0||e>n||l>i?tt(t,K):et(t,K)}const st={passive:!0},rt=U({capture:!0},st);function at(t,e,l,n){e.addEventListener(t,l,n?rt:st)}function ut(t,e,l,n){e.removeEventListener(t,l,n?rt:st)}const ct=["January","February","March","April","May","June","July","August","September","October","November","December"],ft=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ht(t){return t.slice(0,3)}const dt=ft.map(ht),pt=ct.map(ht),mt={MMMM:ct,MMM:pt,WWWW:ft,WWW:dt};function gt(t){return(t<10?"0":"")+t}const wt={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>gt(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>gt(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>gt(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return 0==e?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>gt(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>gt(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>{return((e=t.getMilliseconds())<10?"00":e<100?"0":"")+e;var e}};function xt(t,e){e=e||mt;let l,n=[],i=/\{([a-z]+)\}|[^{]+/gi;for(;l=i.exec(t);)n.push("{"==l[0][0]?wt[l[1]]:l[0]);return t=>{let l="";for(let i=0;i<n.length;i++)l+="string"==typeof n[i]?n[i]:n[i](t,e);return l}}const vt=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const bt=t=>t%1==0,_t=[1,2,2.5,5],yt=$(10,-16,0,_t),kt=$(10,0,16,_t),Mt=kt.filter(bt),St=yt.concat(kt),Tt="{M}/{D}",zt="\n"+Tt,Pt=zt+"/{YY}",Dt="{h}:{mm}{aa}",Et=null;function Yt(t){let e=1e3*t,l=60*e,n=60*l,i=24*n,o=30*i,s=365*i;return[(1==t?$(10,0,3,_t).filter(bt):$(10,-3,0,_t)).concat([e,5*e,10*e,15*e,30*e,l,5*l,10*l,15*l,30*l,n,2*n,3*n,4*n,6*n,8*n,12*n,i,2*i,3*i,4*i,5*i,6*i,7*i,8*i,9*i,10*i,15*i,o,2*o,3*o,4*o,6*o,s,2*s,5*s,10*s,25*s,50*s,100*s]),[[s,"{YYYY}",Et,Et,Et,Et,Et,Et,1],[28*i,"{MMM}","\n{YYYY}",Et,Et,Et,Et,Et,1],[i,Tt,"\n{YYYY}",Et,Et,Et,Et,Et,1],[n,"{h}{aa}",Pt,Et,zt,Et,Et,Et,1],[l,Dt,Pt,Et,zt,Et,Et,Et,1],[e,":{ss}",Pt+" "+Dt,Et,zt+" "+Dt,Et,"\n{h}:{mm}{aa}",Et,1],[t,":{ss}.{fff}",Pt+" "+Dt,Et,zt+" "+Dt,Et,"\n{h}:{mm}{aa}",Et,1]],function(e){return(r,a,u,c,f,h)=>{let d=[],p=f>=s,m=f>=o&&f<s,x=e(u),v=R(x*t,3),b=Nt(x.getFullYear(),p?0:x.getMonth(),m||p?1:x.getDate()),_=R(b*t,3);if(m||p){let l=m?f/o:0,n=p?f/s:0,i=v==_?v:R(Nt(b.getFullYear()+n,b.getMonth()+l,1)*t,3),r=new Date(w(i/t)),a=r.getFullYear(),u=r.getMonth();for(let o=0;i<=c;o++){let s=Nt(a+n*o,u+l*o,1),r=s-e(R(s*t,3));i=R((+s+r)*t,3),i<=c&&d.push(i)}}else{let o=f>=i?i:f,s=_+(g(u)-g(v))+C(v-_,o);d.push(s);let p=e(s),m=p.getHours()+p.getMinutes()/l+p.getSeconds()/n,w=f/n,x=h/r.axes[a]._space;for(;s=R(s+f,1==t?0:3),!(s>c);)if(w>1){let t=g(R(m+w,6))%24,l=e(s).getHours()-t;l>1&&(l=-1),s-=l*n,m=(m+w)%24,R((s-d[d.length-1])/f,3)*x>=.7&&d.push(s)}else d.push(s)}return d}}]}const[At,Wt,Ct]=Yt(1),[Ht,Rt,Ft]=Yt(.001);function Lt(t,e){return t.map((t=>t.map(((l,n)=>0==n||8==n||null==l?l:e(1==n||0==t[8]?l:t[1]+l)))))}function $t(t,e){return(l,n,i,o,s)=>{let r,a,u,c,f,h,d=e.find((t=>s>=t[0]))||e[e.length-1];return n.map((e=>{let l=t(e),n=l.getFullYear(),i=l.getMonth(),o=l.getDate(),s=l.getHours(),p=l.getMinutes(),m=l.getSeconds(),g=n!=r&&d[2]||i!=a&&d[3]||o!=u&&d[4]||s!=c&&d[5]||p!=f&&d[6]||m!=h&&d[7]||d[1];return r=n,a=i,u=o,c=s,f=p,h=m,g(l)}))}}function Nt(t,e,l){return new Date(t,e,l)}function Ot(t,e){return e(t)}$(2,-53,53,[1]);function It(t,e){return(l,n)=>e(t(n))}const jt={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:function(t,e){let l=t.series[e];return l.width?l.stroke(t,e):l.points.width?l.points.stroke(t,e):null},fill:function(t,e){return t.series[e].fill(t,e)},dash:"solid"},idx:null,values:[]};const Bt=[0,0];function Gt(t,e,l){return t=>{0==t.button&&l(t)}}function Jt(t,e,l){return l}const Ut={show:!0,x:!0,y:!0,lock:!1,move:function(t,e,l){return Bt[0]=e,Bt[1]=l,Bt},points:{show:function(t,e){let l=t.cursor.points,n=it(),i=l.stroke(t,e),o=l.fill(t,e);n.style.background=o||i;let s=l.size(t,e),r=l.width(t,e,s);r&&(n.style.border=r+"px solid "+i);let a=s/-2;return lt(n,"width",s),lt(n,"height",s),lt(n,"marginLeft",a),lt(n,"marginTop",a),n},size:function(t,e){return fe(t.series[e].width,1)},width:0,stroke:function(t,e){return t.series[e].stroke(t,e)},fill:function(t,e){return t.series[e].stroke(t,e)}},bind:{mousedown:Gt,mouseup:Gt,click:Gt,dblclick:Gt,mousemove:Jt,mouseleave:Jt,mouseenter:Jt},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:function(t,e,l){return l}},Vt={show:!0,stroke:"rgba(0,0,0,0.07)",width:2,filter:E},qt=U({},Vt,{size:10}),Kt='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Zt="bold "+Kt,Xt={show:!0,scale:"x",stroke:"#000",space:50,gap:5,size:50,labelSize:30,labelFont:Zt,side:2,grid:Vt,ticks:qt,font:Kt,rotate:0},Qt={show:!0,scale:"x",auto:!1,sorted:1,min:S,max:-S,idxs:[]};function te(t,e,l,n,i){return e.map((t=>null==t?"":h(t)))}function ee(t,e,l,n,i,o,s){let r=[],a=F.get(i)||0;for(let u=l=s?l:R(C(l,i),a);u<=n;u=R(u+i,a))r.push(Object.is(u,-0)?0:u);return r}function le(t,e,l,n,i,o,s){const r=[],a=t.scales[t.axes[e].scale].log,u=g((10==a?y:k)(l));i=_(a,u),u<0&&(i=R(i,-u));let c=l;do{r.push(c),c=R(c+i,F.get(i)),c>=i*a&&(i=c)}while(c<=n);return r}function ne(t,e,l,n,i,o,s){let r=t.scales[t.axes[e].scale].asinh,a=n>r?le(t,e,b(r,l),n,i):[r],u=n>=0&&l<=0?[0]:[];return(l<-r?le(t,e,b(r,-n),-l,i):[r]).reverse().map((t=>-t)).concat(u,a)}const ie=/./,oe=/[12357]/,se=/[125]/,re=/1/;function ae(t,e,l,n,i){let o=t.axes[l],s=o.scale,r=t.scales[s];if(3==r.distr&&2==r.log)return e;let a=t.valToPos,u=o._space,c=a(10,s),f=a(9,s)-c>=u?ie:a(7,s)-c>=u?oe:a(5,s)-c>=u?se:re;return e.map((t=>4==r.distr&&0==t||f.test(t)?t:null))}function ue(t,e){return null==e?"":h(e)}const ce={show:!0,scale:"y",stroke:"#000",space:30,gap:5,size:50,labelSize:30,labelFont:Zt,side:3,grid:Vt,ticks:qt,font:Kt,rotate:0};function fe(t,e){return R((3+2*(t||1))*e,3)}function he(t,e,l,n){let i=t.scales[t.series[e].scale],o=t.bands&&t.bands.some((t=>t.series[0]==e));return 3==i.distr||o?i.min:0}const de={scale:"y",auto:!0,sorted:0,show:!0,band:!1,spanGaps:!1,alpha:1,points:{show:function(t,e){let l=(0==t.scales[t.series[0].scale].ori?t.bbox.width:t.bbox.height)/(t.series[e].points.space*Q),n=t.series[0].idxs;return n[1]-n[0]<=l}},values:null,min:S,max:-S,idxs:[],path:null,clip:null};function pe(t,e,l,n,i){return l/10}const me={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ge=U({},me,{time:!1,ori:1}),we={};function xe(t,e){let l=we[t];return l||(l={key:t,plots:[],sub(t){l.plots.push(t)},unsub(t){l.plots=l.plots.filter((e=>e!=t))},pub(t,e,n,i,o,s,r){for(let a=0;a<l.plots.length;a++)l.plots[a]!=e&&l.plots[a].pub(t,e,n,i,o,s,r)}},null!=t&&(we[t]=l)),l}function ve(t,e,l){const n=t.series[e],i=t.scales,o=t.bbox,s=i[t.series[0].scale];let r=t._data[0],a=t._data[e],u=s,c=i[n.scale],f=o.left,h=o.top,d=o.width,p=o.height,m=t.valToPosH,g=t.valToPosV;return 0==u.ori?l(n,r,a,u,c,m,g,f,h,d,p,Me,Te,Pe,Ee,Ae):l(n,r,a,u,c,g,m,h,f,p,d,Se,ze,De,Ye,We)}function be(t,e,l,n,i){return ve(t,e,((t,e,o,s,r,a,u,c,f,h,d)=>{const p=s.dir*(0==s.ori?1:-1),m=0==s.ori?Te:ze;let g,w;1==p?(g=l,w=n):(g=n,w=l);let x=T(a(e[g],s,h,c),.5),v=T(u(o[g],r,d,f),.5),b=T(a(e[w],s,h,c),.5),_=T(u(r.max,r,d,f),.5),y=new Path2D(i);return m(y,b,_),m(y,x,_),m(y,x,v),y}))}function _e(t,e,l,n,i,o){let s=null;if(t.length>0){s=new Path2D;const r=0==e?Pe:De;let a=l;for(let e=0;e<t.length;e++){let l=t[e];r(s,a,n,l[0]-a,n+o),a=l[1]}r(s,a,n,l+i-a,n+o)}return s}function ye(t,e,l){if(l>e){let n=t[t.length-1];n&&n[0]==e?n[1]=l:t.push([e,l])}}function ke(t){return 0==t?D:1==t?w:e=>T(e,t)}function Me(t,e,l){t.moveTo(e,l)}function Se(t,e,l){t.moveTo(l,e)}function Te(t,e,l){t.lineTo(e,l)}function ze(t,e,l){t.lineTo(l,e)}function Pe(t,e,l,n,i){t.rect(e,l,n,i)}function De(t,e,l,n,i){t.rect(l,e,i,n)}function Ee(t,e,l,n,i,o){t.arc(e,l,n,i,o)}function Ye(t,e,l,n,i,o){t.arc(l,e,n,i,o)}function Ae(t,e,l,n,i,o,s){t.bezierCurveTo(e,l,n,i,o,s)}function We(t,e,l,n,i,o,s){t.bezierCurveTo(l,e,i,n,s,o)}function Ce(t){return(e,l,n,i,o,s)=>{n!=i&&(o!=n&&s!=n&&t(e,l,n),o!=i&&s!=i&&t(e,l,i),t(e,l,s))}}const He=Ce(Te),Re=Ce(ze);function Fe(){return(t,e,n,i)=>ve(t,e,((o,s,r,a,u,c,f,h,d,p,m)=>{let g,w,x=o.pxRound;0==a.ori?(g=Te,w=He):(g=ze,w=Re);const _=a.dir*(0==a.ori?1:-1),y={stroke:new Path2D,fill:null,clip:null,band:null,flags:1},k=y.stroke;let M,z,P,D,E=S,Y=-S,A=[],W=x(c(s[1==_?n:i],a,p,h)),C=!1,H=l(r,n,i,1*_),R=l(r,n,i,-1*_),F=T(c(s[H],a,p,h),.5),L=T(c(s[R],a,p,h),.5);F>h&&ye(A,h,F);for(let t=1==_?n:i;t>=n&&t<=i;t+=_){let e=x(c(s[t],a,p,h));if(e==W)null!=r[t]?(z=x(f(r[t],u,m,d)),E==S&&(g(k,e,z),M=z),E=v(z,E),Y=b(z,Y)):C||null!==r[t]||(C=!0);else{let l=!1;E!=S?(w(k,W,E,Y,M,z),P=D=W):C&&(l=!0,C=!1),null!=r[t]?(z=x(f(r[t],u,m,d)),g(k,e,z),E=Y=M=z,e-W>1&&null===r[t-_]&&(l=!0)):(E=S,Y=-S,C||null!==r[t]||(C=!0)),l&&ye(A,P,e),W=e}}if(E!=S&&E!=Y&&D!=W&&w(k,W,E,Y,M,z),L<h+p&&ye(A,L,h+p),null!=o.fill){let l=y.fill=new Path2D(k),n=x(f(o.fillTo(t,e,o.min,o.max),u,m,d));g(l,L,n),g(l,F,n)}return o.spanGaps||(y.clip=_e(A,a.ori,h,d,p,m)),t.bands.length>0&&(y.band=be(t,e,n,i,k)),y}))}function Le(t,e,l,n,i,o){const s=t.length;if(s<2)return null;const r=new Path2D;if(l(r,t[0],e[0]),2==s)n(r,t[1],e[1]);else{let l=Array(s),n=Array(s-1),o=Array(s-1),a=Array(s-1);for(let i=0;i<s-1;i++)o[i]=e[i+1]-e[i],a[i]=t[i+1]-t[i],n[i]=o[i]/a[i];l[0]=n[0];for(let t=1;t<s-1;t++)0===n[t]||0===n[t-1]||n[t-1]>0!=n[t]>0?l[t]=0:(l[t]=3*(a[t-1]+a[t])/((2*a[t]+a[t-1])/n[t-1]+(a[t]+2*a[t-1])/n[t]),isFinite(l[t])||(l[t]=0));l[s-1]=n[s-2];for(let u=0;u<s-1;u++)i(r,t[u]+a[u]/3,e[u]+l[u]*a[u]/3,t[u+1]-a[u]/3,e[u+1]-l[u+1]*a[u]/3,t[u+1],e[u+1])}return r}const $e=new Set;function Ne(){$e.forEach((t=>{t.syncRect(!0)}))}at("resize",X,Ne),at("scroll",X,Ne,!0);const Oe=Fe();function Ie(t,e,l,n){return(n?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map(((t,n)=>je(t,n,e,l)))}function je(t,e,l,n){return U({},0==e?l:n,t)}function Be(t,e,l){return null==e?O:[e,l]}const Ge=Be;function Je(t,e,l){return null==e?O:u(e,l,.1,!0)}function Ue(t,e,l,n){return null==e?O:o(e,l,t.scales[n].log,!1)}const Ve=Ue;function qe(t,e,l,n){return null==e?O:s(e,l,t.scales[n].log,!1)}const Ke=qe;function Ze(t){let e;return[t=t.replace(/(\d+)px/,((t,l)=>(e=w(l*Q))+"px")),e]}function Xe(t,l,n){const i={};function r(t,e){return((3==e.distr?y(t>0?t:e.clamp(i,t,e.min,e.max,e.key)):4==e.distr?M(t,e.asinh):t)-e._min)/(e._max-e._min)}function a(t,e,l,n){let i=r(t,e);return n+l*(-1==e.dir?1-i:i)}function f(t,e,l,n){let i=r(t,e);return n+l*(-1==e.dir?i:1-i)}function h(t,e,l,n){return 0==e.ori?a(t,e,l,n):f(t,e,l,n)}i.valToPosH=a,i.valToPosV=f;let k=!1;i.status=0;const D=i.root=it("uplot");if(null!=t.id&&(D.id=t.id),tt(D,t.class),t.title){it("u-title",D).textContent=t.title}const H=nt("canvas"),L=i.ctx=H.getContext("2d"),$=it("u-wrap",D),V=i.under=it("u-under",$);$.appendChild(H);const X=i.over=it("u-over",$),st=+c((t=J(t)).pxAlign,1),rt=ke(st);(t.plugins||[]).forEach((e=>{e.opts&&(t=e.opts(i,t)||t)}));const ct=t.ms||.001,ft=i.series=Ie(t.series||[],Qt,de,!1),ht=i.axes=Ie(t.axes||[],Xt,ce,!0),dt=i.scales={},pt=i.bands=t.bands||[];pt.forEach((t=>{t.fill=P(t.fill||null)}));const mt=ft[0].scale,gt={axes:function(){ht.forEach(((t,e)=>{if(!t.show||!t._show)return;let l,n,o=dt[t.scale],s=t.side,r=s%2,a=0==r?Re:Fe,u=0==r?Ce:He,c=w(t.gap*Q),[f,d]=t._found,m=t.stroke(i,e);if(t.label){L.save();let e=w(t._lpos*Q);1==r?(l=n=0,L.translate(e,w(He+Fe/2)),L.rotate((3==s?-p:p)/2)):(l=w(Ce+Re/2),n=e),L.font=t.labelFont[0],L.fillStyle=m,L.textAlign="center",L.textBaseline=2==s?"top":"bottom",L.fillText(t.label,l,n),L.restore()}if(0==d)return;let g=t._splits,x=2==o.distr?g.map((t=>gl[t])):g,v=2==o.distr?gl[g[1]]-gl[g[0]]:f,b=t.ticks,_=b.show?w(b.size*Q):0,y=t._rotate*-p/180,k=rt(t._pos*Q),M=k+(_+c)*(0==r&&0==s||1==r&&3==s?-1:1);n=0==r?M:0,l=1==r?M:0,L.font=t.font[0],L.fillStyle=m,L.textAlign=1==t.align?"left":2==t.align?"right":y>0?"left":y<0?"right":0==r?"center":3==s?"right":"left",L.textBaseline=y||1==r?"middle":2==s?"top":"bottom";let S=1.5*t.font[1],T=g.map((t=>rt(h(t,o,a,u))));t._values.forEach(((t,e)=>{null!=t&&(0==r?l=T[e]:n=T[e],(""+t).split(/\n/gm).forEach(((t,e)=>{y?(L.save(),L.translate(l,n+e*S),L.rotate(y),L.fillText(t,0,0),L.restore()):L.fillText(t,l,n+e*S)})))})),b.show&&Tl(T,b.filter(i,x,e,d,v),r,s,k,_,R(b.width*Q,3),b.stroke(i,e),b.dash,b.cap);let z=t.grid;z.show&&Tl(T,z.filter(i,x,e,d,v),r,0==r?2:1,0==r?He:Ce,0==r?Fe:Re,R(z.width*Q,3),z.stroke(i,e),z.dash,z.cap)})),Sn("drawAxes")},series:function(){hl>0&&(ft.forEach(((t,e)=>{if(e>0&&t.show&&null==t._paths){let n=function(t){let e=z(dl-1,0,hl-1),l=z(pl+1,0,hl-1);for(;null==t[e]&&e>0;)e--;for(;null==t[l]&&l<hl-1;)l++;return[e,l]}(l[e]);t._paths=t.paths(i,e,n[0],n[1])}})),ft.forEach(((t,e)=>{e>0&&t.show&&(t._paths&&function(t){const e=ft[t],{stroke:l,fill:n,clip:o,flags:s}=e._paths,r=R(e.width*Q,3),a=r%2/2,u=e._stroke=e.stroke(i,t),c=e._fill=e.fill(i,t);L.globalAlpha=e.alpha;const f=1==e.pxAlign;f&&L.translate(a,a),L.save();let h=Ce,d=He,p=Re,m=Fe,g=r*Q/2;0==e.min&&(m+=g);0==e.max&&(d-=g,m+=g);L.beginPath(),L.rect(h,d,p,m),L.clip(),o&&L.clip(o),function(t,e,l,n,o,s,r,a,u){let c=!1;pt.forEach(((f,h)=>{if(f.series[0]==t){let t=ft[f.series[1]],d=(t._paths||N).band;L.save();let p=null;t.show&&d?p=f.fill(i,h)||s:d=null,yl(e,l,n,o,p,r,a,d,u),L.restore(),c=!0}})),c||yl(e,l,n,o,s,r,a,null,u)}(t,u,r,e.dash,e.cap,c,l,n,s),L.restore(),f&&L.translate(-a,-a),L.globalAlpha=1}(e),t.points.show(i,e,dl,pl)&&function(t){let e=ft[t],n=e.points,o=e.pxRound;const s=R(n.width*Q,3),r=s%2/2,a=n.width>0;let u=(n.size-n.width)/2*Q,c=R(2*u,3);const f=1==e.pxAlign;f&&L.translate(r,r),L.save(),L.beginPath(),L.rect(Ce-c,He-c,Re+2*c,Fe+2*c),L.clip(),L.globalAlpha=e.alpha;const h=new Path2D,d=dt[e.scale];let m,g,w,x;0==bt.ori?(m=Re,g=Ce,w=Fe,x=He):(m=Fe,g=He,w=Re,x=Ce);for(let i=dl;i<=pl;i++)if(null!=l[t][i]){let e=o(yt(l[0][i],bt,m,g)),n=o(kt(l[t][i],d,w,x));Tt(h,e+u,n),zt(h,e,n,u,0,2*p)}const v=n._stroke=n.stroke(i,t),b=n._fill=n.fill(i,t);bl(v,s,n.dash,n.cap,b||(a?"#fff":e._stroke)),L.fill(h),a&&L.stroke(h),L.globalAlpha=1,L.restore(),f&&L.translate(-r,-r)}(e),Sn("drawSeries",e))})))}},wt=(t.drawOrder||["axes","series"]).map((t=>gt[t]));function vt(e){let l=dt[e];if(null==l){let n=(t.scales||N)[e]||N;if(null!=n.from)vt(n.from),dt[e]=U({},dt[n.from],n);else{l=dt[e]=U({},e==mt?me:ge,n),l.key=e;let t=l.time,i=l.range,o=I(i);if(e!=mt&&!o&&B(i)){let t=i;i=(e,l,n)=>null==l?O:u(l,n,t)}l.range=P(i||(t?Ge:e==mt?3==l.distr?Ve:4==l.distr?Ke:Be:3==l.distr?Ue:4==l.distr?qe:Je)),l.auto=P(!o&&l.auto),l.clamp=P(l.clamp||pe),l._min=l._max=null}}}vt("x"),vt("y"),ft.forEach((t=>{vt(t.scale)})),ht.forEach((t=>{vt(t.scale)}));for(let e in t.scales)vt(e);const bt=dt[mt],_t=bt.distr;let yt,kt,Tt,zt;0==bt.ori?(tt(D,"u-hz"),yt=a,kt=f,Tt=Me,zt=Ee):(tt(D,"u-vt"),yt=f,kt=a,Tt=Se,zt=Ye);const Pt={};for(let e in dt){let t=dt[e];null==t.min&&null==t.max||(Pt[e]={min:t.min,max:t.max},t.min=t.max=null)}const Dt=t.tzDate||(t=>new Date(w(t/ct))),Et=t.fmtDate||xt,Yt=1==ct?Ct(Dt):Ft(Dt),Nt=$t(Dt,Lt(1==ct?Wt:Rt,Et)),Bt=It(Dt,Ot("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",Et)),Gt=i.legend=U({},jt,t.legend),Jt=Gt.show,Vt=Gt.markers;let qt;Vt.width=P(Vt.width),Vt.dash=P(Vt.dash),Vt.stroke=P(Vt.stroke),Vt.fill=P(Vt.fill);let Kt,Zt=[],ie=[],oe=!1,se={};if(Gt.live){const t=ft[1]?ft[1].values:null;oe=null!=t,Kt=oe?t(i,1,0):{_:0};for(let e in Kt)se[e]="--"}if(Jt)if(qt=nt("table","u-legend",D),oe){let t=nt("tr","u-thead",qt);for(var re in nt("th",null,t),Kt)nt("th","u-label",t).textContent=re}else tt(qt,"u-inline"),Gt.live&&tt(qt,"u-live");const we={show:!0},ve={show:!1};const be=new Map;function _e(t,e,l){const n=be.get(e)||{},o=nl.bind[t](i,e,l);o&&(at(t,e,n[t]=o),be.set(e,n))}function ye(t,e,l){const n=be.get(e)||{};for(let i in n)null!=t&&i!=t||(ut(i,e,n[i]),delete n[i]);null==t&&be.delete(e)}let Te=0,ze=0,Pe=0,De=0,Ae=0,We=0,Ce=0,He=0,Re=0,Fe=0;i.bbox={};let Le=!1,Ne=!1,Xe=!1,Qe=!1,tl=!1;function el(t,e){t==i.width&&e==i.height||ll(t,e),Dl(!1),Xe=!0,Ne=!0,Qe=nl.left>=0,tl=!0,jl()}function ll(t,e){i.width=Te=Pe=t,i.height=ze=De=e,Ae=We=0,function(){let t=!1,e=!1,l=!1,n=!1;ht.forEach(((i,o)=>{if(i.show&&i._show){let{side:o,_size:s}=i,r=o%2,a=s+(i.labelSize=null!=i.label?i.labelSize||30:0);a>0&&(r?(Pe-=a,3==o?(Ae+=a,n=!0):l=!0):(De-=a,0==o?(We+=a,t=!0):e=!0))}})),al[0]=t,al[1]=l,al[2]=e,al[3]=n,Pe-=fl[1]+fl[3],Ae+=fl[3],De-=fl[2]+fl[0],We+=fl[0]}(),function(){let t=Ae+Pe,e=We+De,l=Ae,n=We;function i(i,o){switch(i){case 1:return t+=o,t-o;case 2:return e+=o,e-o;case 3:return l-=o,l+o;case 0:return n-=o,n+o}}ht.forEach(((t,e)=>{if(t.show&&t._show){let e=t.side;t._pos=i(e,t._size),null!=t.label&&(t._lpos=i(e,t.labelSize))}}))}();let l=i.bbox;Ce=l.left=T(Ae*Q,.5),He=l.top=T(We*Q,.5),Re=l.width=T(Pe*Q,.5),Fe=l.height=T(De*Q,.5)}i.setSize=function({width:t,height:e}){el(t,e)};const nl=i.cursor=U({},Ut,t.cursor);{nl._lock=!1;let t=nl.points;t.show=P(t.show),t.size=P(t.size),t.stroke=P(t.stroke),t.width=P(t.width),t.fill=P(t.fill)}const il=i.focus=U({},t.focus||{alpha:.3},nl.focus),ol=il.prox>=0;let sl=[null];function rl(t,e){let l=dt[t.scale].time,n=t.value;if(t.value=l?j(n)?It(Dt,Ot(n,Et)):n||Bt:n||ue,t.label=t.label||(l?"Time":"Value"),e>0){t.width=null==t.width?1:t.width,t.paths=t.paths||Oe||Y,t.fillTo=P(t.fillTo||he),t.pxAlign=+c(t.pxAlign,st),t.pxRound=ke(t.pxAlign),t.stroke=P(t.stroke||null),t.fill=P(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let e=fe(t.width,1),l=t.points=U({},{size:e,width:b(1,.2*e),stroke:t.stroke,space:2*e,_stroke:null,_fill:null},t.points);l.show=P(l.show),l.fill=P(l.fill),l.stroke=P(l.stroke)}if(Jt){let l=function(t,e){if(0==e&&(oe||!Gt.live))return O;let l=[],n=nt("tr","u-series",qt,qt.childNodes[e]);tt(n,t.class),t.show||tt(n,K);let o=nt("th",null,n);if(Vt.show){let t=it("u-marker",o);if(e>0){let l=Vt.width(i,e);l&&(t.style.border=l+"px "+Vt.dash(i,e)+" "+Vt.stroke(i,e)),t.style.background=Vt.fill(i,e)}}let s=it("u-label",o);for(var r in s.textContent=t.label,e>0&&(Vt.show||(s.style.color=t.width>0?Vt.stroke(i,e):Vt.fill(i,e)),_e("click",o,(e=>{if(nl._lock)return;let l=ft.indexOf(t);if(e.ctrlKey!=Gt.isolate){let t=ft.some(((t,e)=>e>0&&e!=l&&t.show));ft.forEach(((e,n)=>{n>0&&tn(n,t?n==l?we:ve:we,Tn.setSeries)}))}else tn(l,{show:!t.show},Tn.setSeries)})),ol&&_e("mouseenter",o,(e=>{nl._lock||tn(ft.indexOf(t),on,Tn.setSeries)}))),Kt){let t=nt("td","u-value",n);t.textContent="--",l.push(t)}return[n,l]}(t,e);Zt.splice(e,0,l[0]),ie.splice(e,0,l[1]),Gt.values.push(null)}if(nl.show){let l=function(t,e){if(e>0){let l=nl.points.show(i,e);if(l)return tt(l,"u-cursor-pt"),tt(l,t.class),ot(l,-10,-10,Pe,De),X.insertBefore(l,sl[e]),l}}(t,e);l&&sl.splice(e,0,l)}}i.addSeries=function(t,e){t=je(t,e=null==e?ft.length:e,Qt,de),ft.splice(e,0,t),rl(ft[e],e)},i.delSeries=function(t){if(ft.splice(t,1),Jt){Gt.values.splice(t,1),ie.splice(t,1);let e=Zt.splice(t,1)[0];ye(null,e.firstChild),e.remove()}sl.length>1&&sl.splice(t,1)[0].remove()};const al=[!1,!1,!1,!1];function ul(t,e,l,n){let[i,o,s,r]=l,a=e%2,u=0;return 0==a&&(r||o)&&(u=0==e&&!i||2==e&&!s?w(Xt.size/3):0),1==a&&(i||s)&&(u=1==e&&!o||3==e&&!r?w(ce.size/2):0),u}const cl=i.padding=(t.padding||[ul,ul,ul,ul]).map((t=>P(c(t,ul)))),fl=i._padding=cl.map(((t,e)=>t(i,e,al,0)));let hl,dl=null,pl=null;const ml=ft[0].idxs;let gl=null,wl=!1;function xl(t,e){if((l=(t||[]).slice())[0]=l[0]||[],i.data=l.slice(),gl=l[0],hl=gl.length,2==_t&&(l[0]=gl.map(((t,e)=>e))),i._data=l,Dl(!0),Sn("setData"),!1!==e){let t=bt;t.auto(i,wl)?vl():Ql(mt,t.min,t.max),Qe=nl.left>=0,tl=!0,jl()}}function vl(){let t,e;wl=!0,hl>0?(dl=ml[0]=0,pl=ml[1]=hl-1,t=l[0][dl],e=l[0][pl],2==_t?(t=dl,e=pl):1==hl&&(3==_t?[t,e]=o(t,t,bt.log,!1):4==_t?[t,e]=s(t,t,bt.log,!1):bt.time?e=t+w(86400/ct):[t,e]=u(t,e,.1,!0))):(dl=ml[0]=t=null,pl=ml[1]=e=null),Ql(mt,t,e)}function bl(t,e,l,n,i){L.strokeStyle=t||"#0000",L.lineWidth=e,L.lineJoin="round",L.lineCap=n||"butt",L.setLineDash(l||[]),L.fillStyle=i||"#0000"}function _l(){let t=J(dt,G);for(let e in t){let l=t[e],n=Pt[e];if(null!=n&&null!=n.min)U(l,n),e==mt&&Dl(!0);else if(e!=mt)if(0==hl&&null==l.from){let t=l.range(i,null,null,e);l.min=t[0],l.max=t[1]}else l.min=S,l.max=-S}if(hl>0){ft.forEach(((n,o)=>{let s=n.scale,r=t[s],a=Pt[s];if(0==o){let t=r.range(i,r.min,r.max,s);r.min=t[0],r.max=t[1],dl=e(r.min,l[0]),pl=e(r.max,l[0]),l[0][dl]<r.min&&dl++,l[0][pl]>r.max&&pl--,n.min=gl[dl],n.max=gl[pl]}else if(n.show&&n.auto&&r.auto(i,wl)&&(null==a||null==a.min)){let t=null==n.min?3==r.distr?function(t,e,l){let n=S,i=-S;for(let o=e;o<=l;o++)t[o]>0&&(n=v(n,t[o]),i=b(i,t[o]));return[n==S?1:n,i==-S?10:i]}(l[o],dl,pl):function(t,e,l,n){let i=S,o=-S;if(1==n)i=t[e],o=t[l];else if(-1==n)i=t[l],o=t[e];else for(let s=e;s<=l;s++)null!=t[s]&&(i=v(i,t[s]),o=b(o,t[s]));return[i,o]}(l[o],dl,pl,n.sorted):[n.min,n.max];r.min=v(r.min,n.min=t[0]),r.max=b(r.max,n.max=t[1])}n.idxs[0]=dl,n.idxs[1]=pl}));for(let e in t){let l=t[e],n=Pt[e];if(null==l.from&&(null==n||null==n.min)){let t=l.range(i,l.min==S?null:l.min,l.max==-S?null:l.max,e);l.min=t[0],l.max=t[1]}}}for(let e in t){let l=t[e];if(null!=l.from){let n=t[l.from],o=l.range(i,n.min,n.max,e);l.min=o[0],l.max=o[1]}}let n={},o=!1;for(let e in t){let l=t[e],i=dt[e];if(i.min!=l.min||i.max!=l.max){i.min=l.min,i.max=l.max;let t=i.distr;i._min=3==t?y(i.min):4==t?M(i.min,i.asinh):i.min,i._max=3==t?y(i.max):4==t?M(i.max,i.asinh):i.max,n[e]=o=!0}}if(o){ft.forEach((t=>{n[t.scale]&&(t._paths=null)}));for(let t in n)Xe=!0,Sn("setScale",t);nl.show&&(Qe=nl.left>=0)}for(let e in Pt)Pt[e]=null}i.setData=xl;function yl(t,e,l,n,i,o,s,r,a){bl(t,e,l,n,i),r?3==(3&a)?(L.clip(r),Ml(i,s),kl(t,o,e)):2&a?(Ml(i,s),L.clip(r),kl(t,o,e)):1&a&&(L.save(),L.clip(r),Ml(i,s),L.restore(),kl(t,o,e)):(Ml(i,s),kl(t,o,e))}function kl(t,e,l){t&&e&&l&&L.stroke(e)}function Ml(t,e){t&&e&&L.fill(e)}function Sl(t,e,l,n){let o,s=ht[t];if(n<=0)o=[0,0];else{let r=s._space=s.space(i,t,e,l,n),a=s._incrs=s.incrs(i,t,e,l,n,r);o=s._found=function(t,e,l,n,i){let o=n/(e-t),s=(""+g(t)).length;for(var r=0;r<l.length;r++){let t=l[r]*o,e=l[r]<10?F.get(l[r]):0;if(t>=i&&s+e<17)return[l[r],t]}return[0,0]}(e,l,a,n,r)}return o}function Tl(t,e,l,n,i,o,s,r,a,u){let c=s%2/2;1==st&&L.translate(c,c),bl(r,s,a,u),L.beginPath();let f,h,d,p,m=i+(0==n||3==n?-o:o);0==l?(h=i,p=m):(f=i,d=m),t.forEach(((t,n)=>{null!=e[n]&&(0==l?f=d=t:h=p=t,L.moveTo(f,h),L.lineTo(d,p))})),L.stroke(),1==st&&L.translate(-c,-c)}function zl(t){let e=!0;return ht.forEach(((l,n)=>{if(!l.show)return;let o=dt[l.scale];if(null==o.min)return void(l._show&&(e=!1,l._show=!1,Dl(!1)));l._show||(e=!1,l._show=!0,Dl(!1));let s=l.side,r=s%2,{min:a,max:u}=o,[c,f]=Sl(n,a,u,0==r?Pe:De);if(0==f)return;let h=2==o.distr,d=l._splits=l.splits(i,n,a,u,c,f,h),p=2==o.distr?d.map((t=>gl[t])):d,m=2==o.distr?gl[d[1]]-gl[d[0]]:c,g=l._values=l.values(i,l.filter(i,p,n,f,m),n,f,m);l._rotate=2==s?l.rotate(i,g,n,f):0;let w=l._size;l._size=x(l.size(i,g,n,t)),null!=w&&l._size!=w&&(e=!1)})),e}function Pl(t){let e=!0;return cl.forEach(((l,n)=>{let o=l(i,n,al,t);o!=fl[n]&&(e=!1),fl[n]=o})),e}function Dl(t){ft.forEach(((e,l)=>{l>0&&(e._paths=null,t&&(e.min=null,e.max=null))}))}let El,Yl,Al,Wl,Cl,Hl,Rl,Fl,Ll,$l,Nl,Ol,Il=!1;function jl(){Il||(q(Bl),Il=!0)}function Bl(){Le&&(_l(),Le=!1),Xe&&(!function(){let t=!1,e=0;for(;!t;){e++;let l=zl(e),n=Pl(e);t=3==e||l&&n,t||(ll(i.width,i.height),Ne=!0)}}(),Xe=!1),Ne&&(lt(V,"left",Ae),lt(V,"top",We),lt(V,"width",Pe),lt(V,"height",De),lt(X,"left",Ae),lt(X,"top",We),lt(X,"width",Pe),lt(X,"height",De),lt($,"width",Te),lt($,"height",ze),H.width=w(Te*Q),H.height=w(ze*Q),gn(!1),Sn("setSize"),Ne=!1),Te>0&&ze>0&&(L.clearRect(0,0,H.width,H.height),Sn("drawClear"),wt.forEach((t=>t())),Sn("draw")),nl.show&&Qe&&(pn(),Qe=!1),k||(k=!0,i.status=1,Sn("ready")),wl=!1,Il=!1}function Gl(t,n){let o=dt[t];if(null==o.from){if(0==hl){let e=o.range(i,n.min,n.max,t);n.min=e[0],n.max=e[1]}if(n.min>n.max){let t=n.min;n.min=n.max,n.max=t}if(hl>1&&null!=n.min&&null!=n.max&&n.max-n.min<1e-16)return;t==mt&&2==o.distr&&hl>0&&(n.min=e(n.min,l[0]),n.max=e(n.max,l[0])),Pt[t]=n,Le=!0,jl()}}i.redraw=(t,e)=>{Xe=e||!1,!1!==t?Ql(mt,bt.min,bt.max):jl()},i.setScale=Gl;let Jl=!1;const Ul=nl.drag;let Vl=Ul.x,ql=Ul.y;nl.show&&(nl.x&&(El=it("u-cursor-x",X)),nl.y&&(Yl=it("u-cursor-y",X)),0==bt.ori?(Al=El,Wl=Yl):(Al=Yl,Wl=El),Nl=nl.left,Ol=nl.top);const Kl=i.select=U({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Zl=Kl.show?it("u-select",Kl.over?X:V):null;function Xl(t,e){if(Kl.show){for(let e in t)lt(Zl,e,Kl[e]=t[e]);!1!==e&&Sn("setSelect")}}function Ql(t,e,l){Gl(t,{min:e,max:l})}function tn(t,e,l){let n=ft[t];null!=e.focus&&function(t){if(t!=nn){let e=null==t,l=1!=il.alpha;ft.forEach(((n,i)=>{let o=e||0==i||i==t;n._focus=e?null:o,l&&function(t,e){ft[t].alpha=e,nl.show&&sl[t]&&(sl[t].style.opacity=e);Jt&&Zt[t]&&(Zt[t].style.opacity=e)}(i,o?1:il.alpha)})),nn=t,l&&jl()}}(t),null!=e.show&&(n.show=e.show,function(t,e){let l=ft[t],n=Jt?Zt[t]:null;l.show?n&&et(n,K):(n&&tt(n,K),sl.length>1&&ot(sl[t],-10,-10,Pe,De))}(t,e.show),Ql(n.scale,null,null),jl()),Sn("setSeries",t,e),l&&Dn("setSeries",i,t,e)}let en,ln,nn;i.setSelect=Xl,i.setSeries=tn,i.addBand=function(t,e){t.fill=P(t.fill||null),e=null==e?pt.length:e,pt.splice(e,0,t)},i.setBand=function(t,e){U(pt[t],e)},i.delBand=function(t){null==t?pt.length=0:pt.splice(t,1)};const on={focus:!0},sn={focus:!1};function rn(t,e){let l=dt[e],n=Pe;1==l.ori&&(n=De,t=n-t),-1==l.dir&&(t=n-t);let i=l._min,o=i+(l._max-i)*(t/n),s=l.distr;return 3==s?_(10,o):4==s?((t,e=1)=>d.sinh(t/e))(o,l.asinh):o}function an(t,e){lt(Zl,"left",Kl.left=t),lt(Zl,"width",Kl.width=e)}function un(t,e){lt(Zl,"top",Kl.top=t),lt(Zl,"height",Kl.height=e)}Jt&&ol&&at("mouseleave",qt,(t=>{nl._lock||(tn(null,sn,Tn.setSeries),pn())})),i.valToIdx=t=>e(t,l[0]),i.posToIdx=function(t){return e(rn(t,mt),l[0],dl,pl)},i.posToVal=rn,i.valToPos=(t,e,l)=>0==dt[e].ori?a(t,dt[e],l?Re:Pe,l?Ce:0):f(t,dt[e],l?Fe:De,l?He:0),i.batch=function(t){t(i),jl()},i.setCursor=(t,e)=>{Nl=t.left,Ol=t.top,pn(null,null,e)};let cn=0==bt.ori?an:un,fn=1==bt.ori?an:un;function hn(t,e){if(null!=t){let e=t.idx;Gt.idx=e,ft.forEach(((t,l)=>{(l>0||!oe)&&dn(l,e)}))}Jt&&Gt.live&&function(){if(Jt&&Gt.live)for(let t=0;t<ft.length;t++){if(0==t&&oe)continue;let e=Gt.values[t],l=0;for(let n in e)ie[t][l++].firstChild.nodeValue=e[n]}}(),tl=!1,!1!==e&&Sn("setLegend")}function dn(t,e){let n;if(null==e)n=se;else{let o=ft[t],s=0==t&&2==_t?gl:l[t];n=oe?o.values(i,t,e):{_:o.value(i,s[e],t,e)}}Gt.values[t]=n}function pn(t,n,o){let s;Ll=Nl,$l=Ol,[Nl,Ol]=nl.move(i,Nl,Ol),nl.show&&(Al&&ot(Al,w(Nl),0,Pe,De),Wl&&ot(Wl,0,w(Ol),Pe,De));let r=!1,a=dl>pl;en=S;let u=0==bt.ori?Pe:De,c=1==bt.ori?Pe:De;if(Nl<0||0==hl||a){s=null;for(let t=0;t<ft.length;t++)t>0&&sl.length>1&&ot(sl[t],-10,-10,Pe,De);if(ol&&tn(null,on,Tn.setSeries),Gt.live){r=!0;for(let t=0;t<ft.length;t++)Gt.values[t]=se}}else{let t=rn(0==bt.ori?Nl:Ol,mt);s=e(t,l[0],dl,pl);let n=C(yt(l[0][s],bt,u,0),.5);for(let e=0;e<ft.length;e++){let o=ft[e],a=nl.dataIdx(i,e,s,t),f=a==s?n:C(yt(l[0][a],bt,u,0),.5);if(e>0&&o.show){let t,n,i=l[e][a],s=null==i?-10:C(kt(i,dt[o.scale],c,0),.5);if(s>0){let t=m(s-Ol);t<=en&&(en=t,ln=e)}0==bt.ori?(t=f,n=s):(t=s,n=f),sl.length>1&&ot(sl[e],t,n,Pe,De)}if(Gt.live){if(a==nl.idx&&!tl||0==e&&oe)continue;r=!0,dn(e,a)}}}if(r&&(Gt.idx=s,hn()),Kl.show&&Jl)if(null!=n){let[t,e]=Tn.scales,[l,i]=Tn.match,[o,s]=n.cursor.sync.scales,r=n.cursor.drag;Vl=r._x,ql=r._y;let a,f,h,d,p,{left:g,top:w,width:x,height:b}=n.select,_=n.scales[t].ori,y=n.posToVal,k=null!=t&&l(t,o),M=null!=e&&i(e,s);k&&(0==_?(a=g,f=x):(a=w,f=b),Vl?(h=dt[t],d=yt(y(a,o),h,u,0),p=yt(y(a+f,o),h,u,0),cn(v(d,p),m(p-d))):cn(0,u),M||fn(0,c)),M&&(1==_?(a=g,f=x):(a=w,f=b),ql?(h=dt[e],d=kt(y(a,s),h,c,0),p=kt(y(a+f,s),h,c,0),fn(v(d,p),m(p-d))):fn(0,c),k||cn(0,u))}else{let t=m(Ll-Cl),e=m($l-Hl);if(1==bt.ori){let l=t;t=e,e=l}Vl=Ul.x&&t>=Ul.dist,ql=Ul.y&&e>=Ul.dist;let l,n,i=Ul.uni;null!=i?Vl&&ql&&(Vl=t>=i,ql=e>=i,Vl||ql||(e>t?ql=!0:Vl=!0)):Ul.x&&Ul.y&&(Vl||ql)&&(Vl=ql=!0),Vl&&(0==bt.ori?(l=Rl,n=Nl):(l=Fl,n=Ol),cn(v(l,n),m(n-l)),ql||fn(0,c)),ql&&(1==bt.ori?(l=Rl,n=Nl):(l=Fl,n=Ol),fn(v(l,n),m(n-l)),Vl||cn(0,u)),Vl||ql||(cn(0,0),fn(0,0))}if(nl.idx=s,nl.left=Nl,nl.top=Ol,Ul._x=Vl,Ul._y=ql,null!=t){if(null!=zn){let[t,e]=Tn.scales;Tn.values[0]=null!=t?rn(0==bt.ori?Nl:Ol,t):null,Tn.values[1]=null!=e?rn(1==bt.ori?Nl:Ol,e):null}if(Dn("mousemove",i,Nl,Ol,Pe,De,s),ol){let t=Tn.setSeries,e=il.prox;null==nn?en<=e&&tn(ln,on,t):en>e?tn(null,on,t):ln!=nn&&tn(ln,on,t)}}k&&!1!==o&&Sn("setCursor")}i.setLegend=hn;let mn=null;function gn(t){!0===t?mn=null:(mn=X.getBoundingClientRect(),Sn("syncRect",mn))}function wn(t,e,l,n,i,o,s){nl._lock||(xn(t,e,l,n,i,o,s,!1,null!=t),null!=t?pn(1):pn(null,e))}function xn(t,e,l,n,o,s,r,a,u){if(null==mn&&gn(!1),null!=t)l=t.clientX-mn.left,n=t.clientY-mn.top;else{if(l<0||n<0)return Nl=-10,void(Ol=-10);let[t,i]=Tn.scales,r=e.cursor.sync,[a,u]=r.values,[c,f]=r.scales,[d,p]=Tn.match,m=1==e.scales[c].ori,g=0==bt.ori?Pe:De,w=1==bt.ori?Pe:De,x=m?s:o,v=m?o:s,b=m?n:l,_=m?l:n;if(l=null!=c?d(t,c)?h(a,dt[t],g,0):-10:g*(b/x),n=null!=f?p(i,f)?h(u,dt[i],w,0):-10:w*(_/v),1==bt.ori){let t=l;l=n,n=t}}u&&((l<=1||l>=Pe-1)&&(l=T(l,Pe)),(n<=1||n>=De-1)&&(n=T(n,De))),a?(Cl=l,Hl=n,[Rl,Fl]=nl.move(i,l,n)):(Nl=l,Ol=n)}function vn(){Xl({width:0,height:0},!1)}function bn(t,e,l,n,o,s,r){Jl=!0,Vl=ql=Ul._x=Ul._y=!1,xn(t,e,l,n,o,s,0,!0,!1),null!=t&&(_e("mouseup",Z,_n),Dn("mousedown",i,Rl,Fl,Pe,De,null))}function _n(t,e,l,n,o,s,r){Jl=Ul._x=Ul._y=!1,xn(t,e,l,n,o,s,0,!1,!0);let{left:a,top:u,width:c,height:f}=Kl,h=c>0||f>0;if(h&&Xl(Kl),Ul.setScale&&h){let t=a,e=c,l=u,n=f;if(1==bt.ori&&(t=u,e=f,l=a,n=c),Vl&&Ql(mt,rn(t,mt),rn(t+e,mt)),ql)for(let i in dt){let t=dt[i];i!=mt&&null==t.from&&t.min!=S&&Ql(i,rn(l+n,i),rn(l,i))}vn()}else nl.lock&&(nl._lock=!nl._lock,nl._lock||pn());null!=t&&(ye("mouseup",Z),Dn("mouseup",i,Nl,Ol,Pe,De,null))}function yn(t,e,l,n,o,s,r){vl(),vn(),null!=t&&Dn("dblclick",i,Nl,Ol,Pe,De,null)}const kn={};kn.mousedown=bn,kn.mousemove=wn,kn.mouseup=_n,kn.dblclick=yn,kn.setSeries=(t,e,l,n)=>{tn(l,n)},nl.show&&(_e("mousedown",X,bn),_e("mousemove",X,wn),_e("mouseenter",X,gn),_e("mouseleave",X,(function(t,e,l,n,i,o,s){if(!nl._lock){let t=Jl;if(Jl){let t,e,l=!0,n=!0,i=10;0==bt.ori?(t=Vl,e=ql):(t=ql,e=Vl),t&&e&&(l=Nl<=i||Nl>=Pe-i,n=Ol<=i||Ol>=De-i),t&&l&&(Nl=Nl<Rl?0:Pe),e&&n&&(Ol=Ol<Fl?0:De),pn(1),Jl=!1}Nl=-10,Ol=-10,pn(1),t&&(Jl=t)}})),_e("dblclick",X,yn),$e.add(i),i.syncRect=gn);const Mn=i.hooks=t.hooks||{};function Sn(t,e,l){t in Mn&&Mn[t].forEach((t=>{t.call(null,i,e,l)}))}(t.plugins||[]).forEach((t=>{for(let e in t.hooks)Mn[e]=(Mn[e]||[]).concat(t.hooks[e])}));const Tn=U({key:null,setSeries:!1,filters:{pub:A,sub:A},scales:[mt,ft[1]?ft[1].scale:null],match:[W,W],values:[null,null]},nl.sync);nl.sync=Tn;const zn=Tn.key,Pn=xe(zn);function Dn(t,e,l,n,i,o,s){Tn.filters.pub(t,e,l,n,i,o,s)&&Pn.pub(t,e,l,n,i,o,s)}function En(){Sn("init",t,l),xl(l||t.data,!1),Pt[mt]?Gl(mt,Pt[mt]):vl(),el(t.width,t.height),pn(),Xl(Kl,!1)}return Pn.sub(i),i.pub=function(t,e,l,n,i,o,s){Tn.filters.sub(t,e,l,n,i,o,s)&&kn[t](null,e,l,n,i,o,s)},i.destroy=function(){Pn.unsub(i),$e.delete(i),be.clear(),D.remove(),Sn("destroy")},ft.forEach(rl),ht.forEach((function(t,e){if(t._show=t.show,t.show){let l=t.side%2,n=dt[t.scale];null==n&&(t.scale=l?ft[1].scale:mt,n=dt[t.scale]);let o=n.time;t.size=P(t.size),t.space=P(t.space),t.rotate=P(t.rotate),t.incrs=P(t.incrs||(2==n.distr?Mt:o?1==ct?At:Ht:St)),t.splits=P(t.splits||(o&&1==n.distr?Yt:3==n.distr?le:4==n.distr?ne:ee)),t.stroke=P(t.stroke),t.grid.stroke=P(t.grid.stroke),t.ticks.stroke=P(t.ticks.stroke);let s=t.values;t.values=I(s)&&!I(s[0])?P(s):o?I(s)?$t(Dt,Lt(s,Et)):j(s)?function(t,e){let l=xt(e);return(e,n,i,o,s)=>n.map((e=>l(t(e))))}(Dt,s):s||Nt:s||te,t.filter=P(t.filter||(n.distr>=3?ae:E)),t.font=Ze(t.font),t.labelFont=Ze(t.labelFont),t._size=t.size(i,null,e,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(al[e]=!0)}})),n?n instanceof HTMLElement?(n.appendChild(D),En()):n(i,En):En(),i}Xe.assign=U,Xe.fmtNum=h,Xe.rangeNum=u,Xe.rangeLog=o,Xe.rangeAsinh=s,Xe.orient=ve,Xe.join=function(t,e){let l=new Set;for(let s=0;s<t.length;s++){let e=t[s][0],n=e.length;for(let t=0;t<n;t++)l.add(e[t])}let n=[Array.from(l).sort(((t,e)=>t-e))],i=n[0].length,o=new Map;for(let s=0;s<i;s++)o.set(n[0][s],s);for(let s=0;s<t.length;s++){let l=t[s],r=l[0];for(let t=1;t<l.length;t++){let a=l[t],u=Array(i).fill(void 0),c=e?e[s][t]:1,f=[];for(let t=0;t<a.length;t++){let e=a[t],l=o.get(r[t]);null===e?0!=c&&(u[l]=e,2==c&&f.push(l)):u[l]=e}V(u,f,i),n.push(u)}}return n},Xe.fmtDate=xt,Xe.tzDate=function(t,e){let l;return"UTC"==e||"Etc/UTC"==e?l=new Date(+t+6e4*t.getTimezoneOffset()):e==vt?l=t:(l=new Date(t.toLocaleString("en-US",{timeZone:e})),l.setMilliseconds(t.getMilliseconds())),l},Xe.sync=xe;{Xe.addGap=ye,Xe.clipGaps=_e;let t=Xe.paths={};t.linear=Fe,t.stepped=function(t){const e=c(t.align,1),n=c(t.ascDesc,!1);return(t,i,o,s)=>ve(t,i,((r,a,u,c,f,h,d,p,m,g,w)=>{let x=r.pxRound,v=0==c.ori?Te:ze;const b={stroke:new Path2D,fill:null,clip:null,band:null,flags:1},_=b.stroke,y=1*c.dir*(0==c.ori?1:-1);o=l(u,o,s,1),s=l(u,o,s,-1);let k=[],M=!1,S=x(d(u[1==y?o:s],f,w,m)),T=x(h(a[1==y?o:s],c,g,p)),z=T;v(_,T,S);for(let t=1==y?o:s;t>=o&&t<=s;t+=y){let l=u[t],i=x(h(a[t],c,g,p));if(null==l){null===l&&(ye(k,z,i),M=!0);continue}let o=x(d(l,f,w,m));if(M){if(ye(k,z,i),S!=o){let t=r.width*Q/2,l=k[k.length-1];l[0]+=n||1==e?t:-t,l[1]-=n||-1==e?t:-t}M=!1}1==e?v(_,i,S):v(_,z,o),v(_,i,o),S=o,z=i}if(null!=r.fill){let e=b.fill=new Path2D(_),l=x(d(r.fillTo(t,i,r.min,r.max),f,w,m));v(e,z,l),v(e,T,l)}return r.spanGaps||(b.clip=_e(k,c.ori,p,m,g,w)),t.bands.length>0&&(b.band=be(t,i,o,s,_)),b}))},t.bars=function(t){const e=c((t=t||N).size,[.6,S]),n=t.align||0,i=(t.gap||0)*Q,o=1-e[0],s=c(e[1],S)*Q;return(t,e,r,a)=>ve(t,e,((u,c,f,h,d,p,g,w,x,_,y)=>{let k=u.pxRound;const M=h.dir*(0==h.ori?1:-1);let S=0==h.ori?Pe:De,z=1==c.length?_:m(p(c[1],h,_,w)-p(c[0],h,_,w)),P=z*o,D=g(u.fillTo(t,e,u.min,u.max),d,y,x),E=k(u.width*Q),Y=k(v(s,z-P)-E-i);const A=(0==n?Y/2:n==M?0:Y)-n*M*i/2,W={stroke:new Path2D,fill:null,clip:null,band:null,flags:3},C=t.bands.length>0;let H;C&&(W.band=new Path2D,H=T(g(d.max,d,y,x),.5));const R=W.stroke,F=W.band;for(let t=1==M?r:a;t>=r&&t<=a;t+=M){let e=f[t];if(null==e){if(!C)continue;{let n=l(f,1==M?r:a,t,-M),i=l(f,t,1==M?a:r,M),o=f[n];e=o+(t-n)/(i-n)*(f[i]-o)}}let n=p(2==h.distr?t:c[t],h,_,w),i=g(e,d,y,x),o=k(n-A),s=k(b(i,D)),u=k(v(i,D)),m=s-u;null!=f[t]&&S(R,o,u,Y,m),C&&(s=u,u=H,m=s-u,S(F,o,u,Y,m))}return null!=u.fill&&(W.fill=new Path2D(R)),W}))},t.spline=function(t){return e=Le,(t,n,i,o)=>ve(t,n,((s,r,a,u,c,f,h,d,p,m,g)=>{let w,x,v,b=s.pxRound;0==u.ori?(w=Me,v=Te,x=Ae):(w=Se,v=ze,x=We);const _=1*u.dir*(0==u.ori?1:-1);i=l(a,i,o,1),o=l(a,i,o,-1);let y=[],k=!1,M=b(f(r[1==_?i:o],u,m,d)),S=M,T=[],z=[];for(let t=1==_?i:o;t>=i&&t<=o;t+=_){let e=a[t],l=f(r[t],u,m,d);null!=e?(k&&(ye(y,S,l),k=!1),T.push(S=l),z.push(h(a[t],c,g,p))):null===e&&(ye(y,S,l),k=!0)}const P={stroke:e(T,z,w,v,x,b),fill:null,clip:null,band:null,flags:1},D=P.stroke;if(null!=s.fill&&null!=D){let e=P.fill=new Path2D(D),l=b(h(s.fillTo(t,n,s.min,s.max),c,g,p));v(e,S,l),v(e,M,l)}return s.spanGaps||(P.clip=_e(y,u.ori,d,p,m,g)),t.bands.length>0&&(P.band=be(t,n,i,o,D)),P}));var e}}function Qe(t){let e=0,l=0,n=null;function i(t){let i=t.over,o=null;for(e=l=0;!i.classList.contains("u-tooltip-attach")&&"BODY"!=i.tagName;)i.offsetParent!=o&&(e+=i.offsetLeft,l+=i.offsetTop,o=i.offsetParent),i=i.parentElement;n=i;let s=t.cursortt=document.createElement("div");function r(){s.style.display=null}s.className="u-tooltip",s.innerHTML="(x,y)",s.style.pointerEvents="none",i.appendChild(s),i.addEventListener("mouseleave",(()=>{t.cursor._lock||(s.style.display="none")})),i.addEventListener("mouseenter",(()=>r())),r()}return{hooks:{setCursor:function(t){null===n&&i(t);const{left:o,top:s,idx:r}=t.cursor;if(null===r)return void(t.cursortt.innerHTML="");const a=t.over.clientWidth,u=n.clientWidth;o<a/2?(t.cursortt.style.left=e+(o+20)+"px",t.cursortt.style.right="auto"):(t.cursortt.style.right=u-(e+o-20)+"px",t.cursortt.style.left="auto"),t.over.clientHeight,t.cursortt.style.top=l+(s+10)+"px",t.cursortt.style.bottom="auto";let c="<table>";t.series.forEach(((e,l)=>{if(e.show){const n=t.data[l][r],i=e.value(t,n);c+=0==l?`<tr><th colspan="2">${i}</th></tr>`:'<tr><td><div class="u-marker" style="border-color: '+e._stroke+`"></div>${e.label}</td><td>${i}</td></tr>`}})),t.cursortt.innerHTML=c+"</table>"},setSize:function(t){n=null}}}}const tl={};var el=t({name:"TimePlotRaw",help:'Time-series chart.\nTimePlotRaw displays a time-series chart using [uPlot](https://github.com/leeoniya/uPlot).\nIt deals with resizing, and transposes the data coming in.\nThe uPlot options must be provided via the `options` input otherwise\nnothing will show. For an easier way to use uPlot see the TimePlot widget.\n\nThe documentation on the uPlot options "leaves something to be desired"...\nSee https://github.com/leeoniya/uPlot/tree/master/docs for an overview.\nMore info can be gleaned from the demos at https://leeoniya.github.io/uPlot/demos/index.html\nand the ultimate reference is https://github.com/leeoniya/uPlot/blob/master/dist/uPlot.d.ts\n\nThe data must be input in the form of "data points" where a data point is an array consisting\na unix timestamp (seconds since 1970-01-01) followed by a value per series. Null values are OK\nto designate missing data. Note: each an every data point must have one value per series.\n\nEach data message may be either an array of data points or a single data point. If an array is\nprovided then it replaces the entire dataset being shown. If a single point is provided\nit is appended to the current dataset and an old data point may be rotated out.\nNote that this "row-wise" structure gets transposed to the columnar structure expected by uPlot.\n',props:{options:{type:Object,default:()=>null},data:{type:Array,default(){},validator:t=>Array.isArray(t)&&t.length}},full_page:!0,data:()=>({chart:null,ro:null,width:40,chart_data:null,dark_watcher:null}),watch:{options(){console.log("Time-plot options changed"),this._destroy(),this._create()},data(t){if(!t)return;const e=Array.isArray(t[0]);if(this.chart&&this.chart_data&&!e){const e=this.chart_data.length;for(let n=0;n<e;n++)this.chart_data[n].push(t[n]);const l=Math.max(this.width/2,20);for(;this.chart_data[0].length>l;)for(let t=0;t<e;t++)this.chart_data[t].shift();this.chart.setData(this.chart_data)}else this.chart&&this._destroy(),this.chart_data=this._transpose(e?t:[t]),this._create()}},mounted(){this._create();const t=this;this.dark_watcher=this.$watch((()=>t.$vuetify.theme.dark),(()=>{this._destroy(),this._create()}))},beforeDestroy(){console.log("BeforeDestroy uPlot",this.ro),this.ro&&this.ro(),this.ro=null,this._destroy(),this.dark_watcher()},methods:{_destroy(){this.chart&&(console.log("Destroying uPlot"),this.chart.destroy(),this.chart=null)},_observeSize(){this.ro&&this.ro(),this.ro=null;const t=this.$el.children[0];if(!t)return console.log("TPR: cannot observe: no uplot"),{width:0,height:0};const e=t.children[0];if(!e)return console.log("TPR: cannot observe: no uwrap"),{width:0,height:0};console.log("TPR: observing size"),this._onResize(e);const l=new ResizeObserver((()=>this._onResize(e))).observe(e);this.ro=()=>l&&l.unobserve(e)},_calcSize(t){let e=this.options.width||t.clientWidth,l=this.options.height||t.clientHeight;return console.log(`Time-plot container sized to ${e}x${l}`),this.width=e,{width:e,height:l}},_onResize(t){this.chart&&this.chart.setSize(this._calcSize(t))},_transpose(t){if(!t||0==t.length)return[];t[0].map;let e=t[0].map((()=>Array(t.length)));return t.forEach(((t,l)=>{t.forEach(((t,n)=>{e[n][l]=t}))})),e},_create(){if(console.log("Creating uPlot"),!this.chart_data||0===this.chart_data.length)return;if(!this.options||!this.options.series||this.options.series.length<2)return;let t=JSON.parse(JSON.stringify(this.options));for(let n=1;n<t.series.length;n++){const e=t.series[n];"string"==typeof e.value&&(e.value=new Function("u","v",`"use strict";return (${e.value})`),this.$vuetify.theme.dark&&(e.points||(e.points={}),e.points.fill||(e.points.fill="#1e1e1e")))}const e=t.series[0];e.value||(e.value="{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}");for(let n=0;n<t.axes.length;n++){const e=t.axes[n];n>0&&"string"==typeof e.values&&(e.values=new Function("u","vv","s",`"use strict";return (${e.values})`)),this.$vuetify.theme.dark&&(e.grid||(e.grid={}),e.grid.stroke||(e.grid.stroke="#444"),e.stroke||(e.stroke="#ccc"))}Object.values(t.scales||{}).forEach((t=>{"string"==typeof t.range&&(t.range=new Function("u","min","max",`"use strict";return (${t.range})`))})),t.padding=[8,null,null,null];const l=Qe();console.log("Tooltip:",l),t.plugins=[Qe()],t.legend={live:!1},console.log("uPlot options:",t),this.chart=new Xe(t,this.chart_data,this.$el),this.$nextTick((()=>this._observeSize()))}}},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"px-1 width100 flex-grow-1 flex-shrink-1"})}),[],!1,(function(t){for(let e in tl)this[e]=tl[e]}),null,null,null);el.options.__file="src/widgets/time-plot-raw.vue";var ll=el.exports;export default ll;
